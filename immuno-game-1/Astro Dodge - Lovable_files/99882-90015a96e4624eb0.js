try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="55504b59-dd86-4dcb-8a85-a2d37a689eb9",e._sentryDebugIdIdentifier="sentry-dbid-55504b59-dd86-4dcb-8a85-a2d37a689eb9")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[99882],{175745:(e,t,a)=>{a.d(t,{X:()=>n});var r=a(812182);let n=(0,a(780493).w)(r.A,"CreditIcon")},231639:(e,t,a)=>{a.d(t,{E:()=>s});var r=a(21696),n=a(811138),l=a(572848);let s=e=>{let{authUser:t}=(0,r.Z2)(),{data:a=[],isLoading:s}=(0,n.V)(a=>{var r;return l.Y.list({userId:null!=(r=null==t?void 0:t.uid)?r:"",types:(null==e?void 0:e.notificationTypes)?[...e.notificationTypes]:void 0,limit:null==e?void 0:e.limit,db:a})});return{notifications:a,isLoading:s}}},391740:(e,t,a)=>{a.d(t,{b:()=>c,f:()=>n});var r=a(6442);let n=r.k5n(["default","reward_progress","reward_completed_chat"]),l=r.Ikc({id:r.YjP(),created_at:r.YjP(),updated_at:r.YjP(),read_at:r.YjP().optional(),deleted_at:r.YjP().optional()}),s=l.extend({type:r.euz(n.enum.default),data:r.Ikc({title:r.YjP(),message:r.YjP(),button_text:r.YjP().optional(),button_url:r.YjP().optional()})}),i=r.Ikc({reward_state_id:r.YjP(),title:r.YjP(),message:r.YjP(),button_text:r.YjP().optional(),reward_type:r.YjP()}),d=l.extend({type:r.euz(n.enum.reward_progress),data:i}),o=l.extend({type:r.euz(n.enum.reward_completed_chat),data:i}),c=r.KCZ([s,d,o])},406059:(e,t,a)=>{a.d(t,{A:()=>s});var r,n=a(325413);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(null,arguments)}let s=function(e){return n.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),r||(r=n.createElement("path",{fill:"currentColor",d:"M20.25 12a8.25 8.25 0 1 0-16.5 0 8.25 8.25 0 0 0 16.5 0m-9-5a.75.75 0 0 1 1.5 0v4.69l2.28 2.28a.75.75 0 1 1-1.06 1.06l-2.5-2.5a.75.75 0 0 1-.22-.53zm10.5 5c0 5.385-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12 6.615 2.25 12 2.25s9.75 4.365 9.75 9.75"})))}},425066:(e,t,a)=>{a.d(t,{$:()=>J});var r=a(20097),n=a(427321),l=a(325413),s=a(480695),i=a(168954),d=a(14700),o=a(878675),c=a(375896),u=a(6442),m=a(391740),f=function(e){return e.Credit="credit",e.DailyCredits="daily_credits",e}({}),x=function(e){return e.Once="once",e.Unlimited="unlimited",e}(x||{});let p=u.Ikc({reward_type:u.fc(f),amount:u.aig()}),g=u.Ikc({event_name:u.YjP(),event_description:u.YjP(),count:u.aig()}),h=u.Ikc({id:u.YjP(),reward:p,event_rules:u.YOg(g),notification_type:m.f.default("reward_progress"),scope:u.YjP(),name:u.YjP(),description:u.YjP(),active:u.zMY(),claim_limit:u.fc(x),expires_in_days:u.aig(),period_in_days:u.aig().nullable(),version:u.aig()}),v=u.Ikc({id:u.YjP(),event_name:u.YjP(),user_id:u.YjP(),project_id:u.YjP().nullable(),created_at:u.YjP()}),j=u.Ikc({id:u.YjP(),user_id:u.YjP(),project_id:u.YjP().nullable(),events:u.YOg(v),reward_configuration:h,started_at:u.YjP(),completed_at:u.YjP().nullable(),claimed_at:u.YjP().nullable(),expires_at:u.YjP(),status:u.YjP(),notification_id:u.YjP().nullable().optional()}),w=u.Ikc({configuration:h,state:j.nullable().optional(),in_cooldown:u.zMY().default(!1)}),b=u.Ikc({claimed:u.YOg(w),daily:u.YOg(w),one_off:u.YOg(w)});var y=a(470800),_=a(83245),N=a(501269),C=a(412753),k=a(313259),E=a(927987),I=a(816232),A=a(134472),S=a(715429),P=a(926206),Y=a(96324),T=a(630298),M=a(846952);let D=e=>{var t;let{reward:a,isCompleted:n,onClaimSuccess:s}=e,[i,d]=(0,l.useState)(""),[o,u]=(0,l.useState)(!1),m=(0,N.Mu)(e=>e.workspaces),f=(0,N.Mu)(e=>e.isLoading),x=m.find(e=>e.id===i),{mutate:p,isPending:g}=(()=>{let e=(0,A.jE)();return(0,S.n)({mutationFn:async e=>{let{rewardStateId:t,workspaceId:a}=e,r=(0,P.Pg)(),n=await r.post("/user/rewards/".concat(t,"/claim"),{workspace_id:a});return j.parse(n)},onSuccess:t=>{t.notification_id&&(0,M.S)(t.notification_id),e.invalidateQueries({queryKey:T.AS.all}),e.invalidateQueries({queryKey:T.workspaceKeys.all}),e.invalidateQueries({queryKey:T.rj.all})},onError:e=>{Y.logging.error("Failed to claim reward",{error:e}),_.toast.error("Failed to claim reward")}})})(),h=1===m.length,v=h?null==(t=m[0])?void 0:t.id:i,w=()=>{var e,t;return(y.Ay.capture(I.qh.CLAIM.CLAIM_REWARD_CLICKED,{reward_state_id:null==(e=a.state)?void 0:e.id,workspace_id:v}),v)?(null==(t=a.state)?void 0:t.id)?void p({rewardStateId:a.state.id,workspaceId:v},{onSuccess:()=>{var e;_.toast.success("".concat(a.configuration.reward.amount," credits added to your workspace!")),null==s||s(),y.Ay.capture(I.qh.CLAIM.CLAIM_REWARD_SUCCESS,{reward_state_id:null==(e=a.state)?void 0:e.id,workspace_id:v})},onError:e=>{var t;_.toast.error(e.message||"Failed to claim reward"),y.Ay.capture(I.qh.CLAIM.CLAIM_REWARD_FAILED,{reward_state_id:null==(t=a.state)?void 0:t.id,workspace_id:v,error_message:e.message})}}):void _.toast.error("Cannot claim reward: no reward state found"):void u(!0)};if(!n)return null;let b=g||f;return h?(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsx)(k.$,{onClick:w,disabled:b,children:g?"Claiming...":"Claim"})}):(0,r.jsxs)("div",{className:(0,c.cn)("mt-3 flex flex-col items-center gap-2 sm:flex-row",{"px-px":!0}),children:[(0,r.jsxs)(E.Select,{value:i,onValueChange:d,open:o,onOpenChange:u,disabled:b,children:[(0,r.jsx)(E.SelectTrigger,{className:"flex-1",children:(0,r.jsx)(E.SelectValue,{placeholder:"Choose where to receive credits",children:x&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(C.z,{workspace:x,className:"h-5 w-5"}),(0,r.jsx)("span",{className:"truncate",translate:"no",children:x.name})]})})}),(0,r.jsx)(E.SelectContent,{children:m.map(e=>{var t;return(0,r.jsx)(E.SelectItem,{value:null!=(t=e.id)?t:"",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(C.z,{workspace:e,className:"h-5 w-5"}),(0,r.jsx)("span",{className:"truncate",translate:"no",children:e.name})]})},e.id)})})]}),(0,r.jsx)(k.$,{onClick:w,disabled:b,className:"w-full sm:w-auto",children:g?"Claiming...":"Claim"})]})},R=e=>{var t;let{reward:a,isCompleted:n,onClaimSuccess:l}=e;if(null==(t=a.state)?void 0:t.claimed_at)return null;switch(a.configuration.reward.reward_type){case f.Credit:case f.DailyCredits:return(0,r.jsx)(D,{reward:a,isCompleted:n,onClaimSuccess:l});default:return null}};var O=a(372311);let F=e=>{let{className:t,amount:a,isCompleted:n=!1,isClaimed:l=!1}=e;return n&&!l?(0,r.jsx)("span",{className:"pointer-events-none font-normal text-muted-foreground",children:"Completed"}):(0,r.jsx)(O.E,{variant:"brand-twilight",className:(0,c.cn)("pointer-events-none bg-brand-twilight-primary px-2 text-brand-twilight-primary-foreground",t),children:(0,r.jsx)("span",{className:"pointer-events-none text-xs font-normal leading-none",children:l?"".concat(a," credits"):"Earn ".concat(a," credits")})})},L=e=>{let{className:t,rewardType:a,amount:n,isCompleted:l,isClaimed:s}=e;switch(a){case f.Credit:case f.DailyCredits:return(0,r.jsx)(F,{className:t,amount:n,isCompleted:l,isClaimed:s});default:return null}};function z(e){var t;return(null==(t=e.state)?void 0:t.status)==="completed"}let q=e=>{let{reward:t,eventRule:a}=e,{current:n,total:l}=function(e,t){var a,r,n;let l=t.count;return{current:Math.min(null!=(n=null==(r=e.state)||null==(a=r.events)?void 0:a.filter(e=>e.event_name===t.event_name).length)?n:0,l),total:l}}(t,a),s=l>0?n/l*100:0;return(0,r.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:a.event_description}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"h-1.5 flex-1 overflow-hidden rounded-full bg-foreground/20",children:(0,r.jsx)("div",{className:(0,c.cn)("h-full rounded-full bg-foreground transition-all duration-300",{"bg-brand-twilight-primary":z(t)}),style:{width:"".concat(s,"%")}})}),(0,r.jsxs)("span",{className:"text-sm tabular-nums",children:[(0,r.jsx)("span",{className:"text-foreground",children:n}),(0,r.jsxs)("span",{className:(0,c.cn)("text-muted-foreground",{"text-foreground":n===l}),children:["/",l]})]})]})]})},B=e=>{var t,a,n,l,s;let{reward:i,isExpanded:u,onExpandChange:m,onClaimSuccess:f}=e,x=!!((null==(t=i.state)?void 0:t.completed_at)&&i.state.claimed_at&&i.in_cooldown),p=z(i)&&!x&&!(null==(a=i.state)?void 0:a.claimed_at),g=z(i)&&(null==(n=i.state)?void 0:n.claimed_at),h=i.configuration.id;return(0,r.jsx)(o.Accordion,{type:"single",collapsible:!0,className:"w-full",value:u?h:void 0,onValueChange:e=>null==m?void 0:m(e===h),children:(0,r.jsxs)(o.AccordionItem,{value:h,className:(0,c.cn)("rounded-xl border bg-muted px-3",{"opacity-60":x}),children:[(0,r.jsxs)(o.AccordionTrigger,{className:(0,c.cn)("py-3 font-normal hover:no-underline","[&[data-state=open]>svg]:rotate-90",{"cursor-default":x}),disabled:x,children:[(0,r.jsx)("div",{className:(0,c.cn)("flex flex-1 justify-between gap-2 pr-2",{"items-start":!g,"items-center":g}),children:(0,r.jsx)("div",{className:"flex min-w-0 items-center gap-2",children:(0,r.jsx)("span",{className:(0,c.cn)("text-left text-sm leading-none",{"line-through":x,"text-success-foreground":p,"text-success-foreground line-through":g}),children:i.configuration.name})})}),(0,r.jsx)(L,{className:"mr-2 shrink-0",rewardType:i.configuration.reward.reward_type,amount:i.configuration.reward.amount,isCompleted:!!g})]}),(0,r.jsxs)(o.AccordionContent,{className:"pb-4",children:[(0,r.jsx)("div",{className:"flex flex-col gap-3",children:i.configuration.event_rules.map(e=>(0,r.jsx)(q,{reward:i,eventRule:e},"".concat(e.event_name,"-").concat(i.configuration.id)))}),(0,r.jsx)(R,{reward:i,isCompleted:z(i),onClaimSuccess:f}),(null==(l=i.state)?void 0:l.claimed_at)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(L,{className:"mt-3 shrink-0",rewardType:i.configuration.reward.reward_type,amount:i.configuration.reward.amount,isClaimed:!!(null==(s=i.state)?void 0:s.claimed_at)}),(0,r.jsxs)("p",{className:"mt-2 text-xs text-muted-foreground",children:["Claimed ",(0,d.m)(new Date(i.state.claimed_at),{addSuffix:!0})]})]})]})]})})};var U=a(595177);let K=()=>{let e=new Date;return new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()+1,0,0,0)).getTime()-e.getTime()},V=()=>{let[e,t]=(0,l.useState)(K);(0,l.useEffect)(()=>{let e=setInterval(()=>{t(K())},6e4);return()=>clearInterval(e)},[]);let{hours:a,minutes:n}=(e=>{let t=Math.floor(e/6e4);return{hours:Math.floor(t/60),minutes:t%60}})(e);return(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsx)(U.z,{className:"text-muted-foreground",size:"small"}),(0,r.jsxs)("span",{className:"text-sm tabular-nums tracking-wide text-muted-foreground",children:["Resets in ",a,"hr ",n,"min"]})]})},W=e=>{let{title:t,rewards:a,isLoading:n,emptyMessage:s,expandedRewardIds:d,onExpandedIdsChange:o,showTimer:c=!1,alwaysShowCounter:u=!1}=e,m=a.filter(z).length,f=a.length,x=(0,l.useCallback)((e,t)=>{let a=new Set(d);t?a.add(e):a.delete(e),o(a)},[d,o]),p=(0,l.useCallback)(e=>{let t=new Set(d);t.delete(e),o(t)},[d,o]);return(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"text-sm leading-none text-foreground",children:t}),c&&(0,r.jsx)(V,{})]}),n?(0,r.jsx)(i.E,{className:"h-6 w-12 rounded-md"}):(u||f>0)&&(0,r.jsxs)("div",{className:"rounded-md bg-muted p-2 text-xs leading-none text-foreground",children:[m," / ",f]})]}),n?(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsx)(i.E,{className:"h-12 w-full rounded-lg"}),(0,r.jsx)(i.E,{className:"h-12 w-full rounded-lg"})]}):f>0?a.map(e=>{var t;return(0,r.jsx)(B,{reward:e,isExpanded:d.has(e.configuration.id),onExpandChange:t=>x(e.configuration.id,t),onClaimSuccess:()=>p(e.configuration.id)},"".concat(e.configuration.id,"-").concat(null==(t=e.state)?void 0:t.id))}):(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:s})]})};var H=a(479275);let Q=e=>{let{canScrollDown:t,canScrollUp:a}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:(0,c.cn)("pointer-events-none absolute inset-x-0 top-0 h-12 bg-gradient-to-b from-background to-transparent transition-opacity duration-200",a?"opacity-100":"opacity-0")}),(0,r.jsx)("div",{className:(0,c.cn)("pointer-events-none absolute inset-x-0 bottom-0 h-12 bg-gradient-to-t from-background to-transparent transition-opacity duration-200",t?"opacity-100":"opacity-0")})]})},X=e=>{let{activeTab:t,onTabChange:a,children:n}=e,{scrollRef:s,canScrollDown:i,canScrollUp:d,onScroll:o}=function(e){let{activeTab:t,children:a}=e,r=(0,l.useRef)(null),[n,s]=(0,l.useState)(!1),[i,d]=(0,l.useState)(!1),o=(0,l.useRef)(null),c=(0,l.useCallback)(()=>{let e=r.current;e&&(s(e.scrollHeight-e.scrollTop-e.clientHeight>1),d(e.scrollTop>1))},[]);return(0,l.useEffect)(()=>{c()},[c,t,a]),(0,l.useEffect)(()=>{let e=r.current;if(!e)return;let t=new MutationObserver(()=>{c(),o.current&&clearTimeout(o.current),o.current=setTimeout(c,150)});return t.observe(e,{childList:!0,subtree:!0,attributes:!0}),()=>{t.disconnect(),o.current&&clearTimeout(o.current)}},[c]),{scrollRef:r,canScrollDown:n,canScrollUp:i,onScroll:c}}({activeTab:t,children:n});return(0,r.jsxs)(H.tU,{value:t,onValueChange:e=>{let t="available"===e?I.qh.TABS.AVAILABLE_OPENED:I.qh.TABS.CLAIMED_OPENED;y.Ay.capture(t),a(e)},className:"mt-8 flex min-h-0 flex-1 flex-col items-start",children:[(0,r.jsxs)(H.j7,{className:"mx-8 mb-4 h-8 shrink-0 border border-black/5 bg-muted backdrop-blur-sm dark:border-white/10",children:[(0,r.jsx)(H.Xi,{value:"available",className:"flex-1 px-2 py-1 text-xs",children:"Available"}),(0,r.jsx)(H.Xi,{value:"claimed",className:"flex-1 px-2 py-1 text-xs",children:"Claimed"})]}),(0,r.jsxs)("div",{className:"relative min-h-0 w-full flex-1",children:[(0,r.jsx)("div",{ref:s,onScroll:o,className:(0,c.cn)("h-full overflow-y-auto pb-4",{"[scrollbar-gutter:stable]":!0}),children:n}),(0,r.jsx)(Q,{canScrollDown:i,canScrollUp:d})]})]})},$=e=>{let{claimedRewards:t,isError:a,isLoading:n}=e;return a?(0,r.jsx)(H.av,{value:"claimed",className:"md:py-2",children:(0,r.jsx)("div",{className:"grid gap-2 px-8",children:(0,r.jsx)("div",{className:"text-destructive-foreground",children:"Error loading bonuses. Try again later."})})}):n?(0,r.jsx)(H.av,{value:"claimed",className:"md:py-2",children:(0,r.jsxs)("div",{className:"grid gap-2 px-8",children:[(0,r.jsx)(i.E,{className:"h-12 w-full rounded-lg"}),(0,r.jsx)(i.E,{className:"h-12 w-full rounded-lg"})]})}):0===t.length?(0,r.jsx)(H.av,{value:"claimed",className:"md:py-2",children:(0,r.jsx)("div",{className:"mt-8 flex flex-col items-center justify-center px-8 text-center text-muted-foreground",children:(0,r.jsx)("p",{className:"text-sm",children:"Your claimed bonuses history will appear here."})})}):(0,r.jsx)(H.av,{value:"claimed",className:"md:py-2",children:(0,r.jsx)("div",{className:"grid gap-2 px-8",children:t.map(e=>{var t;return(0,r.jsx)(B,{reward:e},"".concat(e.configuration.id,"-").concat(null==(t=e.state)?void 0:t.id))})})})};var Z=a(183031);let G=()=>(0,r.jsxs)("div",{className:"relative hidden h-full w-full shrink-0 overflow-hidden rounded-2xl pb-8 pr-8 md:block",children:[(0,r.jsx)(n.default,{src:"/img/bonuses/bonuses-dark-zy2xHf.webp",alt:"Bonuses",className:"hidden h-full w-full rounded-2xl object-cover dark:block",width:406,height:1e3,priority:!0}),(0,r.jsx)(n.default,{src:"/img/bonuses/bonuses-light-zy2xHf.webp",alt:"Bonuses",className:"block h-full w-full rounded-2xl object-cover dark:hidden",width:406,height:1e3,priority:!0})]}),J=e=>{let{initialExpandedRewardId:t}=e,[a,n]=(0,l.useState)("available"),[i,d]=(0,l.useState)(new Set),{dailyRewards:o,oneOffRewards:c,claimedRewards:u,isLoading:m,error:f}=function(){var e,t,a;let{data:r,isLoading:n,error:l}=(0,Z.I)({queryKey:T.AS.userRewards(),queryFn:async()=>{let e=(0,P.Pg)(),t=await e.get("/user/rewards");return b.parse(t)},refetchOnMount:"always"});return{dailyRewards:null!=(e=null==r?void 0:r.daily)?e:[],oneOffRewards:null!=(t=null==r?void 0:r.one_off)?t:[],claimedRewards:null!=(a=null==r?void 0:r.claimed)?a:[],isLoading:n,error:l}}(),x=(0,l.useRef)(!1);return(0,l.useEffect)(()=>{var e;if(m||x.current)return;x.current=!0;let a=function(e){let t=new Set;for(let n of e){var a,r;let e=!!((null==(a=n.state)?void 0:a.completed_at)&&n.state.claimed_at&&n.in_cooldown);!z(n)||e||(null==(r=n.state)?void 0:r.claimed_at)||t.add(n.configuration.id)}return t}([...o,...c]),r=null==(e=o[0])?void 0:e.configuration.id,n=new Set;r&&n.add(r),a.size>0?a.forEach(e=>n.add(e)):t&&n.add(t),d(n)},[m,o,c,t]),(0,r.jsxs)(s.Cf,{hideCloseButton:!0,className:"pointer-events-auto flex h-[80vh] max-h-[80vh] w-[90%] flex-col gap-4 overflow-hidden border bg-background !p-0 shadow-modal outline-none md:h-[640px] md:max-h-[640px] md:max-w-5xl md:rounded-3xl",children:[(0,r.jsx)(s.L3,{className:"sr-only",children:"Explore Lovable. Earn bonuses."}),(0,r.jsx)(s.rr,{className:"sr-only",children:"Try features and earn extra bonuses as you build"}),(0,r.jsxs)("div",{className:"grid min-h-0 flex-1 grid-cols-1 gap-8 pt-8 md:grid-cols-2",children:[(0,r.jsxs)("div",{className:"flex min-h-0 flex-1 flex-col",children:[(0,r.jsxs)(s.c7,{className:"px-8",children:[(0,r.jsx)("div",{className:"text-2xl font-medium text-foreground",children:"Explore Lovable. Earn bonuses."}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Try features and earn extra bonuses as you build"})]}),(0,r.jsxs)(X,{activeTab:a,onTabChange:n,children:[(0,r.jsx)(H.av,{value:"available",className:"px-8 md:py-2",children:(0,r.jsx)("div",{className:"grid gap-8",children:f?(0,r.jsx)("div",{className:"text-destructive-foreground",children:"Error loading bonuses. Try again later."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(W,{title:"Daily actions",rewards:o,isLoading:m,emptyMessage:"No daily actions available right now.",expandedRewardIds:i,onExpandedIdsChange:d,showTimer:!0,alwaysShowCounter:!0}),(0,r.jsx)(W,{title:"Other actions",rewards:c,isLoading:m,emptyMessage:"No actions available right now.",expandedRewardIds:i,onExpandedIdsChange:d})]})})}),(0,r.jsx)($,{isError:f,isLoading:m,claimedRewards:u})]})]}),(0,r.jsx)(G,{})]})]})}},448163:(e,t,a)=>{a.d(t,{A:()=>i});var r,n,l=a(325413);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(null,arguments)}let i=function(e){return l.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),r||(r=l.createElement("path",{fill:"currentColor",d:"M12 2.25c5.385 0 9.75 4.365 9.75 9.75s-4.365 9.75-9.75 9.75q-.728 0-1.43-.105a.75.75 0 0 1 .218-1.483q.593.087 1.212.088a8.25 8.25 0 1 0-1.212-16.412.75.75 0 0 1-.219-1.484A10 10 0 0 1 12 2.25M4.323 16.76a.75.75 0 0 1 1.05.154 8.3 8.3 0 0 0 1.713 1.713.75.75 0 0 1-.895 1.204A9.8 9.8 0 0 1 4.17 17.81a.75.75 0 0 1 .154-1.05"})),n||(n=l.createElement("path",{fill:"currentColor",d:"M12 7.25a.75.75 0 0 1 .75.75v3.69l2.78 2.78a.75.75 0 1 1-1.06 1.06l-3-3a.75.75 0 0 1-.22-.53V8a.75.75 0 0 1 .75-.75M2.354 10.57a.75.75 0 0 1 1.484.218 8.3 8.3 0 0 0 0 2.424.75.75 0 0 1-1.484.219 9.8 9.8 0 0 1 0-2.862M6.191 4.169a.75.75 0 1 1 .895 1.204 8.3 8.3 0 0 0-1.713 1.713.75.75 0 0 1-1.204-.895A9.8 9.8 0 0 1 6.19 4.17"})))}},479275:(e,t,a)=>{a.d(t,{Xi:()=>o,av:()=>c,j7:()=>d,tU:()=>i});var r=a(20097),n=a(35524),l=a(325413),s=a(375896);let i=n.bL,d=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(n.B8,{ref:t,className:(0,s.cn)("inline-flex h-9 items-center justify-center rounded-lg p-1 text-muted-foreground",a),...l})});d.displayName=n.B8.displayName;let o=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(n.l9,{ref:t,className:(0,s.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",a),...l})});o.displayName=n.l9.displayName;let c=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(n.UC,{ref:t,className:(0,s.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...l})});c.displayName=n.UC.displayName},572848:(e,t,a)=>{a.d(t,{Y:()=>o});var r=a(292968),n=a(391740),l=a(284985),s=a(96324),i=a(630298);let d=e=>{if(e)try{if((0,l.s)(e))return e.toDate().toISOString()}catch(t){s.logging.warn("Failed to convert timestamp to string",{error:t,timestamp:e})}},o={list:e=>(0,r.j)({queryKey:i.rj.list({userId:e.userId,types:e.types,unreadOnly:!1}),queryFn:async()=>{var t;let{collection:r,getDocs:l,query:i,where:o,orderBy:c,limit:u}=await Promise.all([a.e(65220),a.e(94088),a.e(88316)]).then(a.bind(a,531752)),m=[o("user_id","==",e.userId),o("deleted_at","==",null)];e.types&&e.types.length>0&&m.push(o("notification_type","in",e.types)),m.push(c("created_at","desc")),m.push(u(null!=(t=e.limit)?t:100));let f=i(r(e.db,"notifications"),...m),x=await l(f),p=[];return x.forEach(e=>{try{let t=e.data(),a=n.b.parse({id:e.id,type:t.notification_type,data:t.data,created_at:d(t.created_at)||"",updated_at:d(t.updated_at)||"",read_at:d(t.read_at),deleted_at:d(t.deleted_at)});p.push(a)}catch(t){s.logging.warn("Failed to parse notification",{error:t,docId:e.id})}}),p},staleTime:3e4,gcTime:3e5}),unreadCount:e=>(0,r.j)({queryKey:i.rj.unreadCount({userId:e.userId,types:e.types}),queryFn:async()=>{let{collection:t,getCountFromServer:r,query:n,where:l}=await Promise.all([a.e(65220),a.e(94088),a.e(88316)]).then(a.bind(a,531752)),s=[l("user_id","==",e.userId),l("read_at","==",null),l("deleted_at","==",null)];e.types&&e.types.length>0&&s.push(l("notification_type","in",e.types));let i=n(t(e.db,"notifications"),...s);return(await r(i)).data().count},staleTime:3e4,gcTime:3e5})}},595177:(e,t,a)=>{a.d(t,{z:()=>n});var r=a(448163);let n=(0,a(780493).w)(r.A,"ClockFadingIcon")},633750:(e,t,a)=>{a.d(t,{O:()=>n});var r=a(406059);let n=(0,a(780493).w)(r.A,"ClockIcon")},811138:(e,t,a)=>{a.d(t,{V:()=>s});var r=a(183031),n=a(21696),l=a(157173);function s(e,t){var a,s;let{db:i}=(0,l.j)(),{authUser:d}=(0,n.Z2)(),o=i?e(i):void 0,c=null==(a=null==t?void 0:t.enabled)||a,u=null==(s=null==o?void 0:o.enabled)||s;return(0,r.I)({...null!=o?o:{queryKey:["useFirestoreQuery-disabled"],queryFn:async()=>null},enabled:!!i&&!!(null==d?void 0:d.uid)&&c&&u})}},812182:(e,t,a)=>{a.d(t,{A:()=>i});var r,n,l=a(325413);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(null,arguments)}let i=function(e){return l.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),r||(r=l.createElement("path",{fill:"currentColor",d:"M7.25 10a3.75 3.75 0 0 1 7.435-.687A3.75 3.75 0 0 1 14 16.75H8a.75.75 0 0 1-.75-.75zm1.5 5.25H14a2.25 2.25 0 0 0 0-4.5h-.75V10a2.25 2.25 0 0 0-4.5 0z"})),n||(n=l.createElement("path",{fill:"currentColor",d:"M20.25 12a8.25 8.25 0 1 0-16.5 0 8.25 8.25 0 0 0 16.5 0m1.5 0c0 5.385-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12 6.615 2.25 12 2.25s9.75 4.365 9.75 9.75"})))}},817830:(e,t,a)=>{a.d(t,{n:()=>o});var r=a(134472),n=a(715429),l=a(83245),s=a(926206),i=a(96324),d=a(630298);let o=()=>{let e=(0,r.jE)();return(0,n.n)({mutationFn:async e=>(0,s.Pg)().patch("/user/notifications/".concat(e,"/read")),onSuccess:()=>{e.invalidateQueries({queryKey:d.rj.all})},onError:()=>{i.logging.error("Failed to mark notification as read"),l.toast.error("Could not mark notification as read")}})}},846952:(e,t,a)=>{a.d(t,{A:()=>j,S:()=>h});var r=a(20097),n=a(470800),l=a(325413),s=a(83245),i=a(145010),d=a(313259),o=a(175745),c=a(459931),u=a(816232),m=a(231639),f=a(817830),x=a(867155),p=a(917518),g=a(425066);let h=e=>{s.toast.dismiss("reward-completed-".concat(e))},v=e=>{let{notificationId:t,title:a,message:n,onClaim:l,onDismiss:i,buttonText:u}=e,m="reward-completed-".concat(t),f=()=>{null==l||l(),s.toast.dismiss(m)},p=()=>{s.toast.dismiss(m)};s.toast.custom(()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:p,className:"absolute -left-2 -top-2 z-10 flex h-6 w-6 items-center justify-center rounded-full bg-muted opacity-100 transition focus:outline-none sm:opacity-0 sm:group-hover:opacity-100","aria-label":"Close",tabIndex:0,type:"button",children:(0,r.jsx)(c.P,{size:"small",className:"text-foreground/80"})}),(0,r.jsxs)("div",{className:"group relative flex w-[356px] items-center gap-4 overflow-hidden rounded-lg bg-background px-4 py-3 shadow-lg",children:[(0,r.jsx)(x.k,{}),(0,r.jsx)(o.X,{size:"large",className:"ml-7 shrink-0 text-foreground"}),(0,r.jsxs)("div",{className:"flex flex-1 flex-col gap-0.5",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-foreground",children:a}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:n})]}),(0,r.jsx)(d.$,{size:"sm",onClick:f,className:"cursor-pointer",children:u})]})]}),{id:m,duration:1/0,dismissible:!0,unstyled:!0,className:"!rounded-lg !p-0 !bg-transparent !border-none !shadow-none",onDismiss:()=>{null==i||i()}})},j=()=>{let e=(0,l.useRef)(new Set),{notifications:t,isLoading:a}=(0,m.E)({notificationTypes:["reward_progress"]}),{mutate:r}=(0,f.n)(),s=(0,i.f)(g.$),d=(0,p.n)(),o=(0,l.useRef)(s);o.current=s;let c=(0,l.useCallback)(e=>{n.Ay.capture(u.qh.CLAIM.TOAST_CLAIM_REWARD_CLICKED,{notification_id:e}),r(e),o.current({childProps:{}})},[r]),x=(0,l.useCallback)(e=>{r(e),n.Ay.capture(u.qh.CLAIM.TOAST_DISMISSED,{notification_id:e})},[r]);return(0,l.useEffect)(()=>{if(!a&&d)for(let a of t.filter(e=>!e.read_at))e.current.has(a.id)||(e.current.add(a.id),v({notificationId:a.id,title:a.data.title,message:a.data.message,buttonText:a.data.button_text,onClaim:()=>c(a.id),onDismiss:()=>x(a.id)}))},[t,a,d,c,x]),null}},867155:(e,t,a)=>{a.d(t,{k:()=>l});var r=a(20097);a(325413);var n=a(375896);function l(e){let{borderWidth:t=1,duration:a=14,shineColor:l=["#A07CFE","#FE8FB5","#FFBE7B"],className:s,style:i,...d}=e;return(0,r.jsx)("div",{style:{"--border-width":"".concat(t,"px"),"--duration":"".concat(a,"s"),backgroundImage:"radial-gradient(transparent,transparent, ".concat(Array.isArray(l)?l.join(","):l,",transparent,transparent)"),backgroundSize:"300% 300%",mask:"linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0)",WebkitMask:"linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0)",WebkitMaskComposite:"xor",maskComposite:"exclude",padding:"var(--border-width)",...i},className:(0,n.cn)("motion-safe:animate-shine pointer-events-none absolute inset-0 size-full rounded-[inherit] will-change-[background-position]",s),...d})}},878675:(e,t,a)=>{a.d(t,{Accordion:()=>d,AccordionContent:()=>u,AccordionItem:()=>o,AccordionTrigger:()=>c});var r=a(20097),n=a(767013),l=a(325413),s=a(50319),i=a(375896);let d=n.bL,o=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(n.q7,{ref:t,className:(0,i.cn)("border-b",a),...l})});o.displayName="AccordionItem";let c=l.forwardRef((e,t)=>{let{className:a,hideChevron:l,leadingChevron:d,children:o,...c}=e;return(0,r.jsx)(n.Y9,{className:"flex",children:(0,r.jsxs)(n.l9,{ref:t,className:(0,i.cn)("flex flex-1 items-center justify-between py-4 text-left text-sm font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-90",d&&"justify-start gap-2 [&[data-state=open]>svg]:rotate-90",a),...c,children:[!l&&d&&(0,r.jsx)(s.v,{size:"small",className:"shrink-0 text-muted-foreground transition-transform duration-200"}),o,!l&&!d&&(0,r.jsx)(s.v,{className:"shrink-0 text-muted-foreground transition-transform duration-200"})]})})});c.displayName=n.l9.displayName;let u=l.forwardRef((e,t)=>{let{className:a,children:l,...s}=e;return(0,r.jsx)(n.UC,{ref:t,className:"overflow-hidden data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...s,children:(0,r.jsx)("div",{className:(0,i.cn)("pb-4 pt-0",a),children:l})})});u.displayName=n.UC.displayName},917518:(e,t,a)=>{a.d(t,{n:()=>l});var r=a(488381),n=a(433080);let l=()=>{let e=(0,r.j4)(e=>{var t;return null==(t=e.currentWorkspace)?void 0:t.plan}),{isBizOrEnterprisePlan:t}=(0,n.cb)(e);return!t}}}]);