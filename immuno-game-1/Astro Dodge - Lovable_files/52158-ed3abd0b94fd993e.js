try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="3ff8c7e3-efc4-47d5-9a71-3df685f6cc47",e._sentryDebugIdIdentifier="sentry-dbid-3ff8c7e3-efc4-47d5-9a71-3df685f6cc47")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[52158],{205326:()=>{let e=[/^\/$/,/^\/projects(\/|$)/,/^\/@/,/^\/invite(\/|$)/,/^\/discover(\/|$)/,/^\/settings(\/|$)/,/^\/dashboard(\/|$)/,/^\/login(\/|$)/,/^\/signup(\/|$)/,/^\/sso-login(\/|$)/,/^\/sso(\/|$)/,/^\/auth(\/|$)/,/^\/verify-email(\/|$)/,/^\/getting-started(\/|$)/,/^\/auth-bridge(\/|$)/];!function(){let t=window.ReactNativeWebView;if(!t)return;let r=t.postMessage.bind(t);document.addEventListener("click",t=>{let n=t.target;for(;n&&"A"!==n.tagName;)n=n.parentElement;if(!n)return;let a=n.href;if(a)try{let n=new URL(a);if("http:"!==n.protocol&&"https:"!==n.protocol)return;n.origin===window.location.origin&&function(t){try{var r;let n=new URL(t,window.location.origin);if(n.origin!==window.location.origin||(r=n.pathname,e.some(e=>e.test(r))))return!1;return!0}catch(e){return!1}}(n.pathname)&&(t.preventDefault(),t.stopPropagation(),r(JSON.stringify({type:"openExternalLink",url:a})))}catch(e){console.log("[Mobile App Navigation Interceptor] URL parsing failed, let it through",a)}},{capture:!0})}()},207536:(e,t,r)=>{"use strict";r.d(t,{CG:()=>p,KI:()=>d,Qs:()=>g,h:()=>f,j2:()=>h,m2:()=>v,qp:()=>m});var n=r(20097),a=r(65064),s=r(400282),o=r(325413),i=r(375896),l=r(313259),c=r(745784),u=r(493970);let d=e=>{let{license:t="commercial",...r}=e,i=(0,s.usePathname)(),l=(0,s.useSearchParams)(),c=(0,o.useRef)(i),u=(0,o.useRef)(null==l?void 0:l.toString());return(0,o.useEffect)(()=>{let e=null==l?void 0:l.toString();if(c.current!==i||u.current!==e){var t;c.current=i,u.current=e,null==(t=r.onPresentedChange)||t.call(r,!1)}},[i,l]),(0,n.jsx)(a.cj.Root,{license:t,...r})},p=e=>(0,n.jsx)(a.cj.Trigger,{...e}),f=e=>{let{children:t,className:r,bleedingBackground:s=!0,hideBackdrop:o=!1,showHandle:u=!0,sheetPortalProps:d,sheetViewProps:p,sheetBackdropProps:f,sheetContentProps:m,sheetBleedingBackgroundProps:g,handleProps:h,showCloseButton:v=!1,ref:w}=e;return(0,n.jsx)(a.cj.Portal,{...d,children:(0,n.jsxs)(a.cj.View,{swipeOvershoot:s,onPresentAutoFocus:{focus:!1},...p,className:(0,i.cn)("z-[10000]",null==p?void 0:p.className),children:[!o&&(0,n.jsx)(a.cj.Backdrop,{themeColorDimming:"auto",...f}),(0,n.jsxs)(a.cj.Content,{...m,className:(0,i.cn)("relative flex flex-col rounded-t-4xl bg-background p-4 pt-6",r,null==m?void 0:m.className),style:{paddingBottom:"calc(1rem + env(safe-area-inset-bottom))",...null==m?void 0:m.style},ref:w,children:[(0,n.jsx)(a.cj.Handle,{...h,className:(0,i.cn)(u?"absolute left-1/2 top-2 h-1.5 w-16 -translate-x-1/2 rounded-full bg-muted-active":"sr-only",null==h?void 0:h.className),children:"Close sheet"}),t,s&&(0,n.jsx)(a.cj.BleedingBackground,{...g,className:(0,i.cn)("rounded-t-4xl bg-background",null==g?void 0:g.className)}),v&&(0,n.jsx)(a.cj.Trigger,{action:"dismiss",asChild:!0,"aria-label":"Close sheet",children:(0,n.jsx)(l.$,{intent:"secondary",className:"absolute right-4 top-4 rounded-full",size:"md",iconOnly:!0,children:(0,n.jsx)(c.u,{size:"default"})})})]})]})})},m=e=>{let{children:t,className:r,...s}=e;return(0,n.jsx)(a.cj.Title,{className:(0,i.cn)(r),...s,children:t})},g=e=>{let{children:t,className:r,...s}=e;return(0,n.jsx)(a.cj.Description,{className:(0,i.cn)(r),...s,children:t})},h=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,i.cn)("my-1 h-px w-full bg-border",t),...r})},v=e=>{let{children:t,className:r,handleClose:a,...s}=e;return(0,n.jsxs)("div",{className:(0,i.cn)("relative flex items-center",r),...s,children:[(0,n.jsx)(l.$,{variant:"outline",rounded:!0,iconOnly:!0,onClick:a,"aria-label":"Go back",children:(0,n.jsx)(u.Y,{})}),(0,n.jsx)("p",{className:"absolute left-1/2 top-1/2 flex -translate-x-1/2 -translate-y-1/2 items-center gap-2 text-center text-lg font-medium",children:t})]})}},277464:(e,t,r)=>{"use strict";r.d(t,{x:()=>u});var n=r(325413),a=r(365588),s=r(926206),o=r(96324);let i="pending-promotion-code",l=()=>{try{let e,t=localStorage.getItem(i);if(!t)return null;try{e=JSON.parse(t)}catch(e){return o.logging.error("Failed to parse stored promotion code, clearing corrupted data",{error:e}),localStorage.removeItem(i),null}if(!e||!e.code||!e.timestamp)return o.logging.error("Invalid promotion code structure in storage, clearing",{parsed:e}),localStorage.removeItem(i),null;if(Date.now()-e.timestamp>12096e5)return localStorage.removeItem(i),null;return e}catch(e){return o.logging.error("Error retrieving stored promotion code",{error:e}),null}},c=async e=>{let t=(0,s.Pg)();await t.post("/user/stripe/pending-promotion-code",{promotion_code:e})},u=()=>{let e=(0,n.useCallback)(e=>{if(e&&""!==e.trim())try{l();let t={code:e.trim(),timestamp:Date.now()};localStorage.setItem(i,JSON.stringify(t))}catch(t){o.logging.error("Failed to store promotion code",{error:t,code:e})}},[]);return{storePromotionCode:e,applyStoredPromotionCode:(0,n.useCallback)(async()=>{let e=l();if(e){try{localStorage.removeItem(i)}catch(e){o.logging.error("Failed to remove stored promotion code",{error:e})}try{await c(e.code)}catch(t){if(t instanceof a.L&&t.status&&t.status>=400&&t.status<500);else{o.logging.error("Failed to apply pending promotion code, will retry on next login",{error:t});try{localStorage.setItem(i,JSON.stringify(e))}catch(e){o.logging.error("Failed to restore promotion code after error",{error:e})}}}}},[]),applyPromotionCode:(0,n.useCallback)(async e=>{try{await c(e)}catch(t){o.logging.error("Failed to apply promotion code",{error:t,code:e})}},[])}}},329252:(e,t,r)=>{"use strict";r.d(t,{D:()=>c,O:()=>l});var n=r(400282),a=r(325413);let s="utm-attribution",o=["utm_source","utm_medium","utm_campaign","utm_content","utm_term"];function i(){try{let e=sessionStorage.getItem(s);if(!e)return{};return JSON.parse(e)}catch(e){return{}}}let l=()=>{let e=(0,n.useSearchParams)();(0,a.useEffect)(()=>{let t={};o.forEach(r=>{let n=e.get(r);n&&(t[r]=n)}),0!==Object.keys(t).length&&sessionStorage.setItem(s,JSON.stringify(t))},[e])},c=()=>{let e=(0,n.usePathname)();return{getUtmParams:(0,a.useCallback)(()=>i(),[]),getAttributionUrl:(0,a.useCallback)(()=>{let t=window.location.origin,r=i();if(0===Object.keys(r).length)return"".concat(t).concat(e);let n=new URLSearchParams(r);return"".concat(t).concat(e,"?").concat(n.toString())},[e])}}},358855:(e,t,r)=>{"use strict";r.d(t,{B:()=>s,M:()=>a});var n=r(400282);let a=()=>{let e=(0,n.useParams)().project_id;return e&&"string"==typeof e?e:null},s=()=>{let e=a();if(!e)throw Error("Project ID is required and should always be set here");return e}},385883:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n,a=r(325413);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}let o=function(e){return a.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),n||(n=a.createElement("path",{fill:"currentColor",d:"M3.25 17V7A3.75 3.75 0 0 1 7 3.25h6a.75.75 0 0 1 0 1.5H7A2.25 2.25 0 0 0 4.75 7v10A2.25 2.25 0 0 0 7 19.25h6a.75.75 0 0 1 0 1.5H7A3.75 3.75 0 0 1 3.25 17m13.22-8.53a.75.75 0 0 1 1.06 0l3 3a.75.75 0 0 1 0 1.06l-3 3a.75.75 0 1 1-1.06-1.06l1.72-1.72H10a.75.75 0 0 1 0-1.5h8.19l-1.72-1.72a.75.75 0 0 1 0-1.06"})))}},447672:(e,t,r)=>{"use strict";r.d(t,{p:()=>o});var n=r(470800),a=r(325413),s=r(834669);let o=()=>{let{userData:e}=(0,s.u)();return(0,a.useCallback)((t,r)=>{n.Ay.capture(t,{...r,userId:null==e?void 0:e.id})},[null==e?void 0:e.id])}},452158:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>eT});var n=r(20097),a=r(134472),s=r(325413),o=r(271308),i=r(944266),l=r(198623),c=r(21696);function u(){let{authUser:e}=(0,c.Z2)();return(null==e?void 0:e.email)&&["movitz@lovable.dev","enterprise@lovable.dev"].includes(e.email)?(0,n.jsx)("div",{className:"flex w-full items-center justify-center bg-destructive px-4 py-2 text-sm text-destructive-foreground",children:(0,n.jsxs)("span",{children:["This account will be DELETED, please see this loom:"," ",(0,n.jsx)("a",{href:"https://www.loom.com/share/f50af6647ac543b1bc323b2af87e933f",target:"_blank",rel:"noopener noreferrer",className:"underline hover:no-underline",children:"https://www.loom.com/share/f50af6647ac543b1bc323b2af87e933f"})]})}):null}var d=r(695397),p=r(589708),f=r(96324);function m(){let{authUser:e}=(0,c.Z2)(),[t]=(0,d.I)(),r=(0,s.useRef)(!1),n=(0,s.useRef)(e);return(0,s.useEffect)(()=>{n.current=e},[e]),(0,s.useEffect)(()=>{let e=async e=>{let{pathname:a}=e;if(!(r.current||a.startsWith("/auth/action"))&&(!a.startsWith("/verify-email")||!n.current||n.current.emailVerified)){r.current=!0;try{f.logging.warn("auth_error_handler_triggered",{pathname:a});let e="/"===a||"/login"===a||"/signup"===a?"/login":"/login?redirect=".concat(encodeURIComponent(a));await t({redirectTo:e,redirectBehavior:"hard"})}finally{r.current=!1}}};return p.authEvents.on("auth:error",e),()=>{p.authEvents.off("auth:error",e)}},[t]),null}var g=r(400282),h=r(703825);function v(){let e=(0,g.useRouter)(),t=(0,g.useSearchParams)(),r=(0,s.useCallback)(()=>{let r=(0,h.C9)();if(r){let n=new URLSearchParams(t.toString());n.set("promptKey",r);let a="".concat(window.location.pathname,"?").concat(n.toString());e.replace(a)}},[e,t]);return(0,s.useEffect)(()=>((0,h.Fj)(),window.location.hash&&r(),window.addEventListener("hashchange",r),()=>{window.removeEventListener("hashchange",r)}),[r]),null}var w=r(980451),y=r(681061);let x=(0,w.default)(()=>Promise.all([r.e(7579),r.e(11151)]).then(r.bind(r,111151)).then(e=>e.MfaVerificationDialog),{loadableGenerated:{webpack:()=>[111151]},ssr:!1}),b=()=>{let e=(0,y.n)(e=>e.operations),[t,r]=(0,s.useState)(null!==e);return(0,s.useEffect)(()=>{e&&r(!0)},[e]),t?(0,n.jsx)(x,{}):null};var j=r(935429),k=r(985960),C=r(488381),_=r(834669),I=r(426333),S=r(428674),N=r(323867),E=r(630298),P=r(213224);r(205326);var A=r(234281),T=r.n(A),D=r(313259),R=r(691809),q=r(207536),M=r(65064);function L(e){return"".concat("ai_terms_consent_accepted_").concat(e)}function O(){var e;let{isIOSApp:t}=(0,I.V)(),r=(0,c.ZY)(),a=null!=(e=null==r?void 0:r.uid)?e:null,[o,i]=(0,s.useState)(!0),l=(0,s.useMemo)(()=>{if(!a)return!0;try{return"true"===localStorage.getItem(L(a))}catch(e){return!1}},[a]),u=(0,s.useCallback)(async()=>{if(a){try{localStorage.setItem(L(a),"true")}catch(e){}i(!1)}},[a]);return t&&a&&!l?(0,n.jsx)(q.KI,{presented:o,onPresentedChange:()=>{},sheetRole:"alertdialog",children:(0,n.jsxs)(q.h,{showHandle:!1,bleedingBackground:!1,children:[(0,n.jsxs)("div",{className:"flex flex-col items-center px-4 pb-2 pt-16 text-center",children:[(0,n.jsx)(M.s6.Root,{children:(0,n.jsx)(q.qp,{children:"Accept terms and conditions"})}),(0,n.jsx)(R.d,{size:"2xlarge",className:"mb-6 text-foreground"}),(0,n.jsxs)(q.Qs,{className:"text-muted-foreground flex flex-col gap-2 max-w-sm",children:[(0,n.jsx)("p",{children:"To build and update your project, Lovable securely sends your prompts to third-party AI providers."}),(0,n.jsxs)("p",{children:["Learn more in our"," ",(0,n.jsx)(T(),{tabIndex:-1,href:"/privacy",target:"_blank",className:"text-foreground underline underline-offset-4",children:"Privacy Policy"}),"."]})]})]}),(0,n.jsx)("div",{className:"px-4 mt-8 flex",children:(0,n.jsx)(D.$,{size:"lg",className:"w-full md:max-w-xs mx-auto",rounded:!0,onClick:u,tabIndex:-1,children:"Accept & continue"})})]})}):null}var B=r(286093);async function K(e){var t;if(null==(t=e.isNativeMethodAvailable)?void 0:t.call(e,"requestTrackingPermission"))try{let t=await e.requestTrackingPermission();console.log("[MobileAppInitializer] Tracking permission result:",t.status),("granted"===t.status||"denied"===t.status)&&(0,k.BJ)("granted"===t.status)}catch(e){console.warn("[MobileAppInitializer] Failed to request tracking permission:",e)}}function U(){let{state:e}=(0,c.Z2)(),t=(null==e?void 0:e.status)==="authenticated"||(null==e?void 0:e.status)==="authenticating"?e.user:null,r=null!==e,{getBridge:o,isAvailable:i}=(0,P.V)(),l=(0,s.useRef)(!1),u=(0,s.useRef)(0),d=(0,s.useRef)(0),p=(0,s.useRef)(void 0),f=(0,s.useRef)(null);!function(){let{isIOSApp:e}=(0,I.V)(),{getBridge:t}=(0,P.V)(),{currentWorkspace:r}=(0,C.j4)(e=>e),{userData:n}=(0,_.u)(),o=(0,a.jE)(),{data:i}=(0,S.X)(),l=i?[...i.creditProductIds,...i.subscriptionProductIds]:void 0,c=(0,s.useRef)(null),u=(0,s.useRef)(null);(0,s.useEffect)(()=>{e&&(null==n?void 0:n.id)&&(null==r?void 0:r.id)&&void 0!==l&&(c.current!==n.id||u.current!==r.id)&&(c.current=n.id,u.current=r.id,(async()=>{try{let e=await t();if(!e)return;let n=await e.getPendingPurchases();if(0===n.length)return;let a=n.filter(e=>l.includes(e.productId));if(0===a.length)return;for(let t of a)try{if(!(t.workspaceId?t.workspaceId===r.id||window.confirm("You have an unclaimed purchase (".concat(t.displayName,') from a different workspace. Would you like to claim it to your current workspace "').concat(r.name,'"?')):window.confirm("You have an unclaimed purchase (".concat(t.displayName,'). Would you like to claim it to your current workspace "').concat(r.name,'"?')))){await e.dismissPendingPurchase(t.transactionId);continue}switch((await (0,N.C)(e,r.id,t.purchaseToken,t.transactionId)).status){case"success":o.invalidateQueries({queryKey:E.workspaceKeys.detail(r.id)}),window.alert("".concat(t.displayName," restored successfully."));break;case"already_processed":window.alert("This purchase was already processed. If your credits haven't appeared, please contact support.");break;case"already_subscribed":break;case"permanent_error":window.alert("There was a problem with this purchase. Please contact support.");break;case"transient_error":window.alert("Failed to recover purchase. Please try again later.")}}catch(e){console.error("[IAP Recovery] Error processing pending purchase:",e),window.alert("Failed to recover purchase. Please check your connection and try again later.")}}catch(e){console.error("[IAP Recovery] Error checking pending purchases:",e)}})())},[e,null==n?void 0:n.id,null==r?void 0:r.id,null==r?void 0:r.name,t,i])}();let{getBridge:m,isAvailable:g}=(0,P.V)(),{theme:h,resolvedTheme:v}=(0,B.D)();return(0,s.useEffect)(()=>{if(!g||!v)return;let e="light"===h||"dark"===h?h:null;(async()=>{try{var t;let r=await m();(null==r?void 0:r.isWebViewBridgeAvailable)&&(null==(t=r.isNativeMethodAvailable)?void 0:t.call(r,"setNativeTheme"))&&await r.setNativeTheme(e)}catch(e){}})()},[g,h,v,m]),(0,s.useEffect)(()=>{i&&document.documentElement.classList.add("mobile-app")},[i]),(0,s.useEffect)(()=>{let e;if(!i||l.current)return;let t=async()=>{var r,n;let a=await o();if(!(null==a?void 0:a.isWebViewBridgeAvailable))return;let s=null==(n=j.P.api)||null==(r=n.getSession())?void 0:r.id;s?(a.setWebSessionId(s),l.current=!0):u.current<5&&(u.current+=1,e=setTimeout(t,1e3))};return t(),()=>{e&&clearTimeout(e)}},[i,o]),(0,s.useEffect)(()=>{var e;let n;if(!i)return;let a=null!=(e=null==t?void 0:t.uid)?e:null,s="".concat(a,"-").concat(r);if(p.current===s)return;d.current=0;let l=!1,c=async()=>{if(l)return;let e=await o();if(null==e?void 0:e.isWebViewBridgeAvailable){if(e.setUserContext(a,r),p.current=s,d.current=0,!a){f.current=null;return}if(f.current!==a){f.current=a;try{await K(e)}catch(e){f.current===a&&(f.current=null),console.warn("[MobileAppInitializer] ATT request failed:",e)}}}else d.current<30&&(d.current+=1,n=setTimeout(c,100))};return c(),()=>{l=!0,n&&clearTimeout(n)}},[t,r,i,o]),(0,n.jsx)(O,{})}var $=r(358855);function F(){let{authUser:e}=(0,c.Z2)(),t=(0,f.useLoggingStore)(e=>e.metadata);(0,s.useEffect)(()=>{e&&!t.user&&(t.setUser({id:e.uid}),o11y.setUser({id:e.uid}))},[e,t]);let r=(0,$.M)(),n=(0,s.useRef)(null);return(0,s.useEffect)(()=>{r!==n.current&&r&&t.setSession(r),n.current=r},[r,t]),null}var z=r(846952),G=r(592685);let V=(0,w.default)(()=>Promise.all([r.e(15249),r.e(59439)]).then(r.bind(r,659439)).then(e=>e.MFASetupDialog),{loadableGenerated:{webpack:()=>[659439]},ssr:!1}),J=()=>{let e=(0,G.o)(e=>e.open),[t,r]=(0,s.useState)(e);return((0,s.useEffect)(()=>{e&&r(!0)},[e]),t)?(0,n.jsx)(V,{}):null};var W=r(488430),Y=r(373924),Z=r(277464);let Q=()=>((()=>{let e=(0,g.useSearchParams)(),{isAuthenticated:t}=(0,c.Z2)(),{storePromotionCode:r,applyPromotionCode:n,applyStoredPromotionCode:a}=(0,Z.x)(),o=(0,s.useRef)(!1),i=(0,s.useRef)(!1);(0,s.useEffect)(()=>{if(o.current)return;let a=null==e?void 0:e.get("utm_campaign");a&&(o.current=!0,t?n(a):r(a))},[e,t,n,r]),(0,s.useEffect)(()=>{t&&!i.current&&(i.current=!0,a())},[t,a])})(),null);var H=r(708868),X=r(329252),ee=r(195107),et=r(544276),er=r(633750),en=r(617117),ea=r(17308),es=r(480260);let eo=()=>{var e;let{authUser:t}=(0,c.Z2)(),{userData:r}=(0,_.u)(),[a]=(0,d.I)(),o=(0,s.useRef)(null),{cancelDeletion:i,isLoading:l}=(0,es.$)({userId:null!=(e=null==r?void 0:r.id)?e:"",successDescription:"Your account will not be deleted. Welcome back!",onSuccess:()=>window.location.reload()});if((0,s.useEffect)(()=>{var e;null==(e=o.current)||e.focus()},[]),!(null==r?void 0:r.scheduledDeletionAt)||!t)return null;let u=r.scheduledDeletionAt.toDate(),p=(0,et.GP)(u,"MMMM d, yyyy"),f=u<=new Date;return(0,n.jsx)("div",{role:"alertdialog","aria-modal":"true","aria-labelledby":"deletion-title","aria-describedby":"deletion-description",className:"fixed inset-0 z-[10000] flex items-center justify-center bg-background",children:(0,n.jsxs)("div",{className:"flex w-full max-w-md flex-col items-center gap-8 px-6 py-8",children:[(0,n.jsxs)("div",{className:"flex flex-col items-center gap-3 text-center",children:[(0,n.jsx)("div",{className:"flex size-16 items-center justify-center rounded-full ".concat(f?"bg-destructive/20":"bg-amber-500/20"),"aria-hidden":"true",children:(0,n.jsx)(ea.Y,{className:"size-8 ".concat(f?"text-destructive":"text-amber-500")})}),(0,n.jsx)("h1",{id:"deletion-title",className:"text-2xl",children:f?"Account deletion in progress":"Account scheduled for deletion"}),(0,n.jsx)("p",{id:"deletion-description",className:"text-muted-foreground",children:f?"Your account and all associated data are being permanently deleted.":"Your account and all associated data will be permanently deleted."})]}),!f&&(0,n.jsx)("div",{className:"w-full rounded-lg border border-border bg-muted/50 p-4",children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(er.O,{className:"size-5 shrink-0 text-muted-foreground","aria-hidden":"true"}),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("span",{className:"text-sm text-muted-foreground",children:"Scheduled deletion date"}),(0,n.jsx)("time",{dateTime:u.toISOString(),className:"font-medium",children:p})]})]})}),(0,n.jsxs)("div",{className:"flex w-full flex-col gap-3",children:[(0,n.jsx)(D.$,{ref:o,onClick:()=>i().catch(()=>{}),loading:l,intent:"affirmative",size:"lg",className:"w-full",children:"Keep my account"}),(0,n.jsxs)(D.$,{variant:"ghost",onClick:()=>a(),disabled:l,size:"lg",className:"w-full",children:[(0,n.jsx)(en.J,{className:"size-4","aria-hidden":"true"}),"Sign out"]})]}),!f&&(0,n.jsx)("p",{className:"text-center text-xs text-muted-foreground",children:'Changed your mind? Click "Keep my account" to cancel the deletion and restore full access to your projects.'})]})})},ei=e=>{let{children:t}=e,{isAuthenticated:r}=(0,c.Z2)(),{userData:a}=(0,_.u)(),{shouldBlock:s}=function(e){let{isAuthenticated:t,userData:r,isUserDataLoading:n}=e;return{shouldBlock:t&&!n&&!!r&&!!r.scheduledDeletionAt}}({isAuthenticated:r,userData:a,isUserDataLoading:r&&void 0===a});return s?(0,n.jsx)(eo,{}):(0,n.jsx)(n.Fragment,{children:t})};var el=r(83245),ec=r(926206);let eu={B:"2.8.0"},ed="lov-last-checked-version";function ep(){let[e,t]=(0,s.useState)(!1),[r,n]=(0,s.useState)(new Date),a=(0,s.useCallback)(()=>{window.location.reload()},[]),o=(0,s.useCallback)(async()=>{let e=(0,ec.Pg)(),t=(await e.get("/app-version")).version;if(f.logging.info("App update check:",{fetchedVersion:t,currentVersion:eu.B}),localStorage.getItem(ed)===t)return;localStorage.setItem(ed,t);let r=((e,t)=>{let[r,n,a]=e.split("."),[s,o,i]=t.split(".");return parseInt(r)<parseInt(s)?"major":parseInt(n)<parseInt(o)?"minor":parseInt(a)<parseInt(i)?"patch":null})(eu.B,t);return f.logging.info("Update type:",{updateType:r}),r},[]);return(0,s.useEffect)(()=>{let n=async()=>{try{if(e)return;t(!0),f.logging.info("Checking for app updates");let n=new Date().getTime()-r.getTime();if(n<9e5)return;if(n>2592e5)return f.logging.info("Client older than 72 hours, forcing hard refresh",{passedTimeHours:Math.round(n/36e5)}),a();try{let e=await o();"major"===e||"minor"===e?(f.logging.info("Major/minor version update detected, forcing hard refresh",{updateType:e,currentVersion:eu.B}),a()):"patch"===e&&el.toast.info("A new version is available",{description:"Please update to the latest version",duration:1/0,action:{label:"Update",onClick:()=>{a()}}})}catch(e){f.logging.error("Error checking app version:",{error:e instanceof Error?e.message:String(e)})}}finally{t(!1)}},s=()=>{n().catch(e=>{f.logging.error("Error checking app version:",{error:e instanceof Error?e.message:String(e)})})};return window.addEventListener("focus",s),()=>{window.removeEventListener("focus",s)}},[e,r]),null}var ef=r(157173),em=r(516971);let eg={default:["default"],rewardProgress:["reward_progress"],rewardCompletedChat:["reward_completed_chat"]},eh=(0,s.createContext)(null);function ev(e){var t;let{children:r}=e,o=(0,a.jE)(),i=(0,c.ZY)(),{currentWorkspaceId:l}=(0,C.Dx)(),{db:u,firestore:d}=(0,ef.j)(),p=null!=(t=null==i?void 0:i.uid)?t:"",f=(0,c.XI)()&&!!p,m=(0,s.useMemo)(()=>p&&u&&d?[{id:"workspace-invites",query:d.query(d.collection(u,"workspace_memberships"),d.where("user_id","==",p),d.where("joined_at","==",!1)),onData:()=>{o.invalidateQueries({queryKey:E.workspaceKeys.pendingWorkspaceInvites()})}},{id:"project-invites",query:d.query(d.collectionGroup(u,"project_access"),d.where("user_id","==",p)),onData:()=>{o.invalidateQueries({queryKey:E.gO.sharedWithMe()})}}]:[],[p,o,u,d]);(0,em.B)({subscriptionKey:p,subscriptions:m,context:"user-inbox",enabled:f});let g=(0,s.useMemo)(()=>l&&u&&d?[{id:"workspace-access-requests",query:d.query(d.collection(u,"workspace_access_requests"),d.where("workspace_id","==",l)),onData:()=>{o.invalidateQueries({queryKey:E.workspaceKeys.workspaceAccessRequests(l)})}},{id:"project-access-requests",query:d.query(d.collection(u,"project_access_requests"),d.where("workspace_id","==",l)),onData:()=>{o.invalidateQueries({queryKey:E.workspaceKeys.projectAccessRequests(l)})}}]:[],[l,o,u,d]);(0,em.B)({subscriptionKey:l,subscriptions:g,context:"workspace-inbox",enabled:f&&!!l});let h=(0,s.useMemo)(()=>p&&u&&d?Object.entries(eg).map(e=>{let[t,r]=e;return{id:"notifications-".concat(t),query:d.query(d.collection(u,"notifications"),d.where("user_id","==",p),d.where("deleted_at","==",null),d.where("notification_type","in",r)),onData:()=>{o.invalidateQueries({queryKey:E.rj.list({userId:p,types:[...r],unreadOnly:!1})}),o.invalidateQueries({queryKey:E.rj.unreadCount({userId:p,types:[...r]})})}}}):[],[p,o,u,d]);return(0,em.B)({subscriptionKey:p,subscriptions:h,context:"notifications",enabled:f}),(0,n.jsx)(eh.Provider,{value:null,children:r})}eh.displayName="InboxSubscriptionContext";var ew=r(515777),ey=r(815198),ex=r(470800);r(439738);var eb=r(752712),ej=r(973912),ek=r(391326);let eC="phc_xdBVCyOkYw40Pqd7xp5Er88lGq2IGFd4kZHRiKvvkjr",e_=eC&&!0;function eI(e){let{children:t,bootstrapData:r}=e,{authUser:a}=(0,c.Z2)(),o=(0,c.Nm)(),i=(0,s.useMemo)(()=>null==a?void 0:a.uid,[null==a?void 0:a.uid]),l=(0,s.useMemo)(()=>null==a?void 0:a.displayName,[null==a?void 0:a.displayName]),u=(0,g.usePathname)();return(0,s.useEffect)(()=>{i&&o11y.setUser({id:i})},[i]),(0,s.useEffect)(()=>{e_&&i&&(ex.Ay.identify(i,{email:o,name:l}),ex.Ay.capture("github_branch",{branch:ek.env.BRANCH||null}))},[i,o,l]),(0,s.useEffect)(()=>{e_&&ex.Ay.init(eC,{api_host:"https://lovable.dev/app-data",ui_host:"https://us.posthog.com",bootstrap:r,session_recording:{maskAllInputs:!1,maskInputOptions:{password:!0}},autocapture:{element_allowlist:["button"]},verbose:(0,ej.Cu)()})},[r]),(0,s.useEffect)(()=>{ex.Ay.capture("$pageview")},[u]),(0,n.jsx)(eb.so,{client:ex.Ay,children:t})}eC||f.logging.info("Missing NEXT_PUBLIC_POSTHOG_KEY in env; set to 'skip' to disable");var eS=r(757423),eN=r(746651),eE=r(611442),eP=r(501269);let eA=()=>{let e=(0,a.jE)();return(0,s.useEffect)(()=>{let t=()=>{f.logging.info("Cachebuster event received"),e.invalidateQueries()};return document.addEventListener("lovable-cachebuster",t),()=>document.removeEventListener("lovable-cachebuster",t)},[e]),null};function eT(e){let{children:t,data:{authUser:r,posthogBootstrapData:a,featureFlagBootstrapData:s}}=e;return(0,H.r)(),(0,X.O)(),(0,n.jsxs)(c.OJ,{user:r,children:[(0,n.jsx)(u,{}),(0,n.jsx)(m,{}),(0,n.jsx)(b,{}),(0,n.jsx)(J,{}),(0,n.jsx)(v,{}),(0,n.jsx)(ef.z,{children:(0,n.jsx)(_.v,{children:(0,n.jsx)(eI,{bootstrapData:a,children:(0,n.jsx)(ei,{children:(0,n.jsx)(ee.n,{...s,children:(0,n.jsx)(eN.s,{children:(0,n.jsxs)(eE.G,{children:[(0,n.jsx)(eA,{}),(0,n.jsx)(ep,{}),(0,n.jsx)(Y.Bc,{children:(0,n.jsx)(l.Z,{children:(0,n.jsx)(ew.M,{children:(0,n.jsx)(o.B,{children:(0,n.jsx)(eP.$M,{children:(0,n.jsx)(W.d,{children:(0,n.jsx)(C.cA,{children:(0,n.jsxs)(ev,{children:[(0,n.jsx)(Q,{}),(0,n.jsx)(eS.ET,{children:(0,n.jsx)(ey.Us,{children:(0,n.jsxs)(i.n,{children:[t,(0,n.jsx)(z.A,{}),(0,n.jsx)(F,{}),(0,n.jsx)(U,{})]})})})]})})})})})})})})]})})})})})})})]})}},480260:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var n=r(325413),a=r(83245),s=r(447672),o=r(951121),i=r(926206),l=r(816232);function c(e){let{userId:t,onSuccess:r,successDescription:c="Your account will not be deleted."}=e,[u,d]=(0,n.useState)(!1),p=(0,s.p)();return{cancelDeletion:async()=>{d(!0);try{await (0,i.Pg)().post("/user/".concat(t,"/deletion/cancel")),p(l.fF.DELETE_ACCOUNT.DELETION_CANCELLED),a.toast.success("Deletion canceled",{description:c}),null==r||r()}catch(e){throw(0,o.Ni)(e),e}finally{d(!1)}},isLoading:u}}},515777:(e,t,r)=>{"use strict";r.d(t,{M:()=>c,l:()=>u});var n=r(20097),a=r(183031),s=r(325413),o=r(328699),i=r(21696);let l=(0,s.createContext)(null);function c(e){let{children:t}=e,{authUser:r}=(0,i.Z2)(),{data:c,isLoading:u}=(0,a.I)(o.Y.experimentalFeatures({user:r})),d=(0,s.useMemo)(()=>({features:c||null,isLoading:u}),[c,u]);return(0,n.jsx)(l.Provider,{value:d,children:t})}function u(){let e=(0,s.useContext)(l);if(!e)throw Error("LabsFeaturesContext not found");return e}l.displayName="LabsFeaturesContext"},592685:(e,t,r)=>{"use strict";r.d(t,{I:()=>a,o:()=>n});let n=(0,r(602571).vt)(e=>({open:!1,hasTotp:!1,hasPhone:!1,onSuccess:null,startSetup:(t,r,n)=>e({open:!0,hasTotp:t,hasPhone:r,onSuccess:n}),reset:()=>e({open:!1,hasTotp:!1,hasPhone:!1,onSuccess:null})}));function a(e,t,r){n.getState().startSetup(e,t,r)}},617117:(e,t,r)=>{"use strict";r.d(t,{J:()=>a});var n=r(385883);let a=(0,r(780493).w)(n.A,"SignOutIcon")},708868:(e,t,r)=>{"use strict";r.d(t,{r:()=>l});var n=r(400282),a=r(470800),s=r(325413),o=r(816232),i=r(64013);let l=()=>{let e=(0,n.useSearchParams)(),t=null==e?void 0:e.get("referral_code");(0,s.useEffect)(()=>{t&&(a.Ay.capture(o.h6.LINK_CLICKED,{referral_code:t}),(0,i.Q4)(t))},[t]),(0,s.useEffect)(()=>{void 0!==window.rewardful&&window.rewardful("ready",()=>{var e,t;(null==(e=window.Rewardful)?void 0:e.affiliate)&&(null==(t=window.Rewardful)?void 0:t.campaign)&&(0,i.gF)(window.Rewardful.affiliate,window.Rewardful.campaign.id)})},[])}},944266:(e,t,r)=>{"use strict";r.d(t,{G:()=>p,n:()=>d});var n=r(20097),a=r(980451),s=r(400282),o=r(325413),i=r(83245),l=r(96324);let c=(0,a.default)(async()=>(await r.e(40517).then(r.bind(r,740517))).RemixProgressToast,{loadableGenerated:{webpack:()=>[740517]},ssr:!1}),u=(0,o.createContext)(null);u.displayName="RemixProgressToastContext";let d=e=>{let{children:t}=e,r=(0,s.usePathname)(),[a,d]=(0,o.useState)([]),p=(0,o.useCallback)((e,t,r)=>{d(n=>n.some(t=>t.projectId===e)?n:[...n,{projectId:e,jobId:t,projectName:r}])},[]),f=(0,o.useCallback)(function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];d(t=>t.filter(t=>t.projectId!==e)),t&&i.toast.dismiss("remix-progress-".concat(e))},[]);return(0,o.useEffect)(()=>{if("/"===r)try{let e=localStorage.getItem("pendingRemixJob");if(!e)return;let t=JSON.parse(e);Date.now()-t.timestamp>3e5||p(t.projectId,t.jobId,t.projectName),localStorage.removeItem("pendingRemixJob")}catch(e){l.logging.error("Failed to check for pending remix job")}},[r,p]),(0,n.jsxs)(u.Provider,{value:{startRemixToast:p,stopRemixToast:f},children:[t,a.map(e=>{let{projectId:t,jobId:r,projectName:a}=e;return(0,n.jsx)(c,{projectId:t,jobId:r,projectName:a,onComplete:()=>f(t,!1)},t)})]})},p=()=>{let e=(0,o.useContext)(u);if(!e)throw Error("useRemixProgressToast must be used within RemixProgressToastProvider");return e}},985960:(e,t,r)=>{"use strict";r.d(t,{BJ:()=>l,H1:()=>o,fC:()=>i});var n=r(205164);function a(e){var t,r;let{allowed:a,denied:s}=function(){let e=[],t=[];for(let s of n.S){var r,a;(null==(a=window.DelveCookieConsent)||null==(r=a.acceptedCategory)?void 0:r.call(a,s))?e.push(s):t.push(s)}return{allowed:e,denied:t}}();null==(t=(r=window).__rudderStackUpdateConsent)||t.call(r,a,s,e)}let s=!1,o=()=>{var e;!s&&(null==(e=window.DelveCookieConsent)?void 0:e.init)&&(s=!0,window.DelveCookieConsent.init({message:"We use cookies to enhance your development experience and keep your data secure.",privacyPolicyUrl:"https://lovable.dev/privacy",settingsText:"Cookie settings",rejectText:"Reject non-essential",manageScriptTags:!0,categories:{necessary:{enabled:!0,cookieTable:{cookies:[{name:"delve_cookie_consent",purpose:"Stores your cookie preferences",duration:"1 year"},{name:"session_id",purpose:"Keeps you logged in",duration:"Session"},{name:"csrf_token",purpose:"Security protection",duration:"Session"}]}},analytics:{enabled:!1,cookieTable:{cookies:[{name:"_ga*",purpose:"Google Analytics - Distinguishes users",duration:"2 years"},{name:"_gid",purpose:"Google Analytics - Session identification",duration:"24 hours"},{name:"_gat",purpose:"Google Analytics - Throttles request rate",duration:"1 minute"},{name:"analytics_session",purpose:"Custom analytics session",duration:"Session"}]}},marketing:{enabled:!1,cookieTable:{cookies:[{name:"_fbp*",purpose:"Facebook Browser Pixel",duration:"3 months"},{name:"_fbc*",purpose:"Facebook Click ID",duration:"7 days"},{name:"_gcl_au",purpose:"Google Ads attribution",duration:"90 days"},{name:"utm_*",purpose:"UTM tracking parameters",duration:"Session"}]}},preferences:{enabled:!1,cookieTable:{cookies:[{name:"theme_*",purpose:"UI theme preferences",duration:"1 year"},{name:"lang_*",purpose:"Language preferences",duration:"1 year"},{name:"user_prefs",purpose:"General user settings",duration:"1 year"}]}}},onAccept:()=>a(!0),onReject:()=>a(!0),onChange:()=>a(!0)}),a(!1))},i=()=>{var e;(null==(e=window.DelveCookieConsent)?void 0:e.show)?window.DelveCookieConsent.show():console.error("Cookie consent manager not available")};function l(e){var t,r;let a=[],s=[];e?a.push(...n.S):s.push(...n.S),null==(t=(r=window).__rudderStackUpdateConsent)||t.call(r,a,s,!0)}}}]);