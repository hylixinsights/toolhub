try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="f75bb2f3-7883-481c-9227-4e6c920d126b",e._sentryDebugIdIdentifier="sentry-dbid-f75bb2f3-7883-481c-9227-4e6c920d126b")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3890],{157601:(e,t,r)=>{"use strict";r.d(t,{U:()=>ey,z:()=>eg});var n=r(20097),l=r(65064),s=r(234281),o=r.n(s),i=r(400282),a=r(618407),c=r(971563),d=r(325413),u=r(244889),p=r(616962),m=r(223189),h=r(488381),b=r(506286),x=r(915247),f=r(198623),j=r(117113),g=r(678661),v=r(311856),y=r(990996),_=r(43049),k=r(341243),w=r(372311),C=r(313259),N=r(413332),P=r(904879),T=r(124076),E=r(82904),S=r(835872),M=r(442049),D=r(390613),I=r(926387),z=r(758742),R=r(359674),O=r(515845),A=r(792317),B=r(154724),Z=r(633691),L=r(379815),W=r(76886),Q=r(610626),U=r(980990),F=r(275798),V=r(373924),q=r(102110),H=r(982965),G=r(147682),$=r(876721),J=r(816402),K=r(466683),X=r(552790),Y=r(433080),ee=r(375896),et=r(191115),er=r(640715),en=r(808634);let el={internal_tools:"bg-brand-sapphire text-brand-sapphire-foreground",website:"bg-brand-saffron text-brand-saffron-foreground",personal:"bg-brand-bubblegum text-brand-bubblegum-foreground",consumer_app:"bg-brand-flamingo text-brand-flamingo-foreground",b2b_app:"bg-brand-twilight text-brand-twilight-foreground",prototype:"bg-brand-tiger text-brand-tiger-foreground"},es=e=>{let{category:t}=e;if(!t)return null;let r=en.e[t],l=el[t];return(0,n.jsx)("span",{className:(0,ee.cn)("mr-2 inline-block rounded-md px-2 py-0.5 text-xs font-medium",l),title:r,children:r})};var eo=r(141254),ei=r(145010),ea=r(377568),ec=r(927398),ed=r(816232),eu=r(564052);let ep=e=>{let{project:t,isMobile:r,onClose:l,menuType:s="dropdown"}=e,o=(0,i.useRouter)(),a=(0,ec.D)(t.id),c=(0,ei.f)(eo.e),{shouldShow:d,isProfilePublished:u,isProjectPublished:p,canEdit:m,isLoadingPermission:h}=(0,eu.h)(t);if(!d||!t.name)return null;let b="context"===s?T.kt:E._2,x=()=>{t.name&&(a(ed.mb.HOME_PAGE_OPEN_CLICKED),null==l||l(),o.push("/products/".concat(encodeURIComponent(t.name)),{scroll:!0}))},f=()=>{a(ed.mb.HOME_PAGE_CREATE_CLICKED),null==l||l(),c({childProps:{projectId:t.id},dialogProps:{onOpenChange:e=>{e||a(ed.mb.HOME_PAGE_CREATE_CLOSED)}}})};if(u)return r?(0,n.jsxs)(k.A,{onClick:x,children:[(0,n.jsx)(ea.Q,{size:"small"}),"Profile ",(0,n.jsx)(S.Q,{size:"small"})]}):(0,n.jsxs)(b,{onClick:x,className:"hover:bg-muted-active focus:bg-muted-active",children:[(0,n.jsx)(ea.Q,{size:"small"}),"Profile ",(0,n.jsx)(S.Q,{size:"small"})]});if(!h&&!m)return null;if(r)return(0,n.jsxs)(k.A,{onClick:f,disabled:!p,children:[(0,n.jsx)(ea.Q,{size:"small"}),"Publish to profile"]});let j=(0,n.jsxs)(b,{disabled:!p,onClick:f,className:"hover:bg-muted-active focus:bg-muted-active",children:[(0,n.jsx)(ea.Q,{size:"small"}),"Publish to profile"]});return p||"dropdown"!==s?j:(0,n.jsx)(V.Bc,{children:(0,n.jsxs)(V.m_,{delayDuration:200,children:[(0,n.jsx)(V.k$,{children:j}),(0,n.jsx)(V.ZI,{side:"right",children:"Publish the project before creating a Lovable profile"})]})})};var em=r(827945),eh=r(254051);let eb=(0,d.createContext)(null);eb.displayName="ProjectMenuContext";let ex=()=>{let e=(0,d.useContext)(eb);if(!e)throw Error("ProjectMenu components must be used within a ProjectMenu.Root");return e},ef=e=>{let{baseActions:t,setIsOpen:r,setIsMoveToFolderOpen:n,setIsRenameDialogOpen:l,setIsDeleteDialogOpen:s,isProjectRemixAllowed:o,hasCheckedProjectRemixAllowed:i,isRemixing:a,getRemixTooltipContent:c}=e;return t.map(e=>{let t={...e,onClick:()=>{r(!1),"select"===e.key?e.onClick():"move-to-folder"===e.key?n(!0):"rename"===e.key?l(!0):"delete"===e.key?s(!0):e.onClick()}};if("remix"===e.key){let e={...t,disabled:!o||!i||a};return c&&(e.tooltip={show:!o&&!a,content:c()}),e}return t})},ej=e=>{let{actions:t,MenuItem:r,isMobile:l=!1,withTooltips:s=!0}=e;return(0,n.jsx)(n.Fragment,{children:t.map(e=>{if(!1===e.show)return null;let t=l?(0,n.jsxs)(k.A,{onClick:e.onClick,disabled:e.disabled,isDestructive:e.isDestructive,children:[e.icon,e.label]},e.key):(0,n.jsxs)(r,{onClick:e.onClick,disabled:e.disabled,className:(0,ee.cn)("text-foreground hover:bg-muted-active hover:text-foreground focus:bg-muted-active focus:text-foreground [&_svg]:text-foreground",e.isDestructive&&"text-destructive-primary hover:bg-destructive-primary/10 hover:text-destructive-primary focus:bg-destructive-primary/10 focus:text-destructive-primary [&_svg]:text-destructive-primary"),children:[e.icon,e.label]},e.key);return e.tooltip&&!l&&s?(0,n.jsx)(P.Q,{showTooltip:e.tooltip.show,tooltipContent:e.tooltip.content,side:"left",children:t},e.key):t})})},eg={Root:e=>{let{project:t,onSelectModeToggle:r,enableBulkSelection:l=!1,children:s}=e,o=(0,h.lR)(),[i,a]=(0,d.useState)(!1),[c,p]=(0,d.useState)(!1),[m,x]=(0,d.useState)(!1),j=t.workspace_id===o,{permitted:g}=(0,b.J)(er.eZ.AddProjectsToFolders),{permitted:k}=(0,b.J)(er.eZ.RemoveProjectsFromFolders),{isPending:w}=(0,eh.O)({}),C=(e=>{var t,r;let{project:l,onSelectModeToggle:s,enableBulkSelection:o,projectCanBeMovedToFolder:i,canAddProjectsToFolders:a,canRemoveProjectsFromFolders:c,isRemixing:d}=e,{openSettings:p}=(0,f.t)(),m=(0,u.D)(),{toggleStar:h}=(0,J.u)(),b=null!=(t=l.is_starred)&&t,x=null!=(r=l.is_published)&&r,j=l.url;return[{key:"select",label:"Select",icon:(0,n.jsx)(L.R,{size:"small"}),onClick:()=>null==s?void 0:s(l.id),show:o},{key:"published-url",label:"View published site",icon:(0,n.jsx)(S.Q,{size:"small"}),onClick:()=>{j&&window.open(j,"_blank","noopener,noreferrer")},disabled:!x||!j,tooltip:{show:!x,content:"Publish your project to view it live"}},{key:"analytics",label:"Analytics",icon:(0,n.jsx)(M.r,{size:"small"}),onClick:()=>{window.location.href="/projects/".concat(l.id,"?view=analytics")},disabled:!x,tooltip:{show:!x,content:"Publish your project to view analytics"}},{key:"star",label:b?"Unstar":"Star",icon:b?(0,n.jsx)(W.W,{size:"small",className:"text-amber-400"}):(0,n.jsx)(Q.G,{size:"small"}),onClick:()=>h(l.id,b,l)},{key:"move-to-folder",label:"Move to folder",icon:(0,n.jsx)(z.s,{size:"small"}),onClick:()=>{},show:i&&(a||c)},{key:"remix",label:d?"Remixing...":"Remix",icon:(0,n.jsx)(F.$,{icon:d?B.o:Z.x,size:"small",className:d?"animate-spin":""}),onClick:()=>m(l),disabled:d},{key:"rename",label:"Rename",icon:(0,n.jsx)(A.f,{size:"small"}),onClick:()=>{}},{key:"settings",label:"Settings",icon:(0,n.jsx)(D.D,{size:"small"}),onClick:()=>p({tab:"project",projectId:l.id})},{key:"delete",label:"Delete",icon:(0,n.jsx)(U.u,{size:"small"}),onClick:()=>{},isDestructive:!0}]})({project:t,onSelectModeToggle:r,enableBulkSelection:l,projectCanBeMovedToFolder:j,canAddProjectsToFolders:g,canRemoveProjectsFromFolders:k,isRemixing:w});return(0,n.jsxs)(eb.Provider,{value:{project:t,baseActions:C,isRemixing:w,isRenameDialogOpen:i,setIsRenameDialogOpen:a,isDeleteDialogOpen:c,setIsDeleteDialogOpen:p,isMoveToFolderOpen:m,setIsMoveToFolderOpen:x,projectCanBeMovedToFolder:j,canAddProjectsToFolders:g,canRemoveProjectsFromFolders:k},children:[s,(0,n.jsx)(_.U,{project:t,isOpen:i,onClose:()=>a(!1)}),(0,n.jsx)(v.B,{project:t,isOpen:c,onClose:()=>p(!1),redirectAfterDelete:!1}),j&&(g||k)&&(0,n.jsx)(y.N,{project:t,open:m,onOpenChange:x})]})},DropdownTrigger:e=>{let{align:t="end"}=e,{project:r,baseActions:s,isRemixing:o,setIsRenameDialogOpen:i,setIsDeleteDialogOpen:a,setIsMoveToFolderOpen:c}=ex(),u=(0,$._)(),{openMenuId:p,openMenuType:m,setOpenMenu:h}=(0,G.n)(),b=p===r.id&&"dropdown"===m,x=d.useCallback(e=>{e?h(r.id,"dropdown"):p===r.id&&"dropdown"===m&&h(null,null)},[p,m,r.id,h]),{isProjectRemixAllowed:f,hasCheckedProjectRemixAllowed:j,projectRemixNotAllowedReason:g}=(0,em.O)({projectId:r.id,enabled:b}),v=ef({baseActions:s,setIsOpen:x,setIsMoveToFolderOpen:c,setIsRenameDialogOpen:i,setIsDeleteDialogOpen:a,isProjectRemixAllowed:f,hasCheckedProjectRemixAllowed:j,isRemixing:o,getRemixTooltipContent:()=>j?g||"This project can't be remixed":"Checking if project can be remixed..."}),y=(0,n.jsx)(C.$,{variant:"ghost",size:"sm",iconOnly:!0,className:"transition-opacity hover:bg-muted hover:text-foreground ".concat(b?"opacity-100":"opacity-100 can-hover:opacity-0 can-hover:group-hover:opacity-100"),disabled:o,onClick:e=>{e.stopPropagation(),e.preventDefault()},children:(0,n.jsx)(I.r,{size:"small"})}),_=(0,n.jsx)(ej,{actions:v.filter(e=>"delete"!==e.key),MenuItem:E._2,isMobile:u}),k=(0,n.jsx)(ej,{actions:v.filter(e=>"delete"===e.key),MenuItem:E._2,isMobile:u});return u?(0,n.jsxs)(l.cj.Root,{license:"commercial",presented:b,onPresentedChange:x,children:[(0,n.jsx)(l.cj.Trigger,{asChild:!0,children:y}),(0,n.jsx)(l.cj.Portal,{children:(0,n.jsxs)(l.cj.View,{className:"z-[10000]",children:[(0,n.jsx)(l.cj.Backdrop,{themeColorDimming:"auto"}),(0,n.jsxs)(l.cj.Content,{className:"flex h-auto flex-col rounded-t-2xl p-4",style:{paddingBottom:"calc(1rem + env(safe-area-inset-bottom))"},children:[(0,n.jsx)(l.s6.Root,{children:(0,n.jsx)(l.cj.Handle,{children:"Close menu"})}),(0,n.jsx)(l.cj.BleedingBackground,{className:"rounded-t-2xl border-t bg-background"}),(0,n.jsxs)("div",{className:"flex flex-col",children:[_,(0,n.jsx)(ep,{project:r,isMobile:!0,onClose:()=>x(!1)}),(0,n.jsx)("div",{className:"-mx-4 my-1 h-px bg-border"}),k]})]})]})})]}):(0,n.jsxs)(E.rI,{open:b,onOpenChange:x,children:[(0,n.jsx)(E.ty,{asChild:!0,children:y}),(0,n.jsxs)(E.SQ,{align:t,children:[_,(0,n.jsx)(ep,{project:r}),(0,n.jsx)(E.mB,{}),k]})]})},ContextTrigger:e=>{let{children:t}=e,{project:r,baseActions:l,isRemixing:s,setIsRenameDialogOpen:o,setIsDeleteDialogOpen:i,setIsMoveToFolderOpen:a}=ex(),c=(0,$._)(),{openMenuId:u,openMenuType:p,setOpenMenu:m}=(0,G.n)(),h=u===r.id&&"context"===p,b=d.useCallback(e=>{e?m(r.id,"context"):u===r.id&&"context"===p&&m(null,null)},[u,p,r.id,m]),{isProjectRemixAllowed:x,hasCheckedProjectRemixAllowed:f}=(0,em.O)({projectId:r.id,enabled:h&&!c});if((0,d.useEffect)(()=>()=>{let{openMenuId:e,openMenuType:t,setOpenMenu:n}=G.n.getState();e===r.id&&"context"===t&&n(null,null)},[r.id]),c)return(0,n.jsx)(n.Fragment,{children:t});let j=ef({baseActions:l,setIsOpen:b,setIsMoveToFolderOpen:a,setIsRenameDialogOpen:o,setIsDeleteDialogOpen:i,isProjectRemixAllowed:x,hasCheckedProjectRemixAllowed:f,isRemixing:s}),g=(0,n.jsx)(ej,{actions:j.filter(e=>"delete"!==e.key),MenuItem:T.kt,withTooltips:!1}),v=(0,n.jsx)(ej,{actions:j.filter(e=>"delete"===e.key),MenuItem:T.kt,withTooltips:!1});return(0,n.jsxs)(T.tz,{modal:!1,onOpenChange:b,children:[(0,n.jsx)(T.Rc,{asChild:!0,children:t}),(0,n.jsxs)(T.Ip,{children:[g,(0,n.jsx)(ep,{project:r,menuType:"context"}),(0,n.jsx)(T.K5,{}),v]})]})}},ev=e=>{let{project:t}=e,{copy:r,isCopied:l}=(0,H.i)(),s=(0,$._)();return(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[!s&&(0,n.jsxs)(V.m_,{children:[(0,n.jsx)(V.k$,{asChild:!0,children:(0,n.jsx)(C.$,{variant:"ghost",size:"sm",iconOnly:!0,"aria-label":"Copy link",className:(0,ee.cn)("transition-opacity hover:bg-muted hover:text-foreground","opacity-100 can-hover:opacity-0 can-hover:group-hover:opacity-100"),onClick:e=>{e.stopPropagation(),e.preventDefault(),r("".concat(window.location.origin,"/projects/").concat(t.id))},children:(0,n.jsx)(R.q,{size:"small"})})}),(0,n.jsx)(V.ZI,{children:l?"Copied!":"Copy link"})]}),(0,n.jsx)(eg.DropdownTrigger,{})]})},ey=(0,d.memo)(e=>{var t,r,l,s;let{project:u,showAvatar:b=!0,selectedCategory:f,subtitleType:v,showStars:y=!1,onToggleStar:_,showActionsDropdown:k=!0,linkHref:C,onClick:P,imagePreviewButtonText:T,selectionMode:E=!1,isSelected:S=!1,onSelectionChange:M,onSelectModeToggle:D,enableBulkSelection:I=!1}=e,z=(0,i.useRouter)(),R=(0,a.c3)("ProjectCard"),A=(0,c.Ym)(),{isDragging:B}=(0,x.B)(),Z=(0,h.j4)(e=>{var t;return null==(t=e.currentWorkspace)?void 0:t.plan}),{isBizOrEnterprisePlan:L}=(0,Y.cb)(Z),W=(0,X.iZ)(),Q=d.useRef(null),U=d.useRef(!1);d.useEffect(()=>()=>{Q.current&&clearTimeout(Q.current)},[]),d.useEffect(()=>{B&&Q.current&&(clearTimeout(Q.current),Q.current=null)},[B]);let F=null!=C?C:P?void 0:"/projects/".concat(u.id),V=u.remix_count?u.remix_count:0,H=1===V?R("remixCount",{count:1}):R("remixesCount",{count:V}),G="all"===f||f!==u.category,$=(()=>{if(!v)return null;switch(v){case"remixes":return H;case"edit-time":{let e="last_edited_at"in u&&u.last_edited_at||u.updated_at;return e?"".concat(R("edited")," ").concat((0,et.Zn)(e,{locale:A})):null}case"create-time":return u.created_at?"".concat(R("created")," ").concat((0,et.Zn)(u.created_at,{locale:A})):null;case"view-time":return u.last_viewed_at?"".concat(R("viewed")," ").concat((0,et.Zn)(u.last_viewed_at,{locale:A})):null;case"trending-rank":return null!=u.feature_rank?"".concat(R("ranked")," ").concat(u.feature_rank):"".concat(R("ranked")," -");case"created-by":return u.created_by?(0,n.jsx)(q.f,{username:u.created_by,prefix:"Created by ",className:""}):null;default:return v}})(),J=(e=>{var t,r;let n="creation_options"in e&&(null==(r=e.creation_options)||null==(t=r.metadata)?void 0:t.chat_mode_enabled)===!0,l=!e.edit_count,s="remixed_from_project_id"in e&&!!e.remixed_from_project_id;return n&&l&&!s})(u),er=(0,K.y9)(u),en=(0,n.jsxs)("div",{className:(0,ee.cn)("group relative flex select-none flex-col",E&&"-m-2 cursor-pointer rounded-lg p-2 transition-colors hover:bg-muted/50"),style:{WebkitTouchCallout:"none"},"data-testid":"project-card-".concat(u.name),onClick:e=>{if(U.current){e.preventDefault(),U.current=!1;return}E&&(null==M||M(u.id))},onTouchStart:e=>{if(!I||E)return;e.preventDefault();let t=e.target;(null==t?void 0:t.closest("[role='menu']"))||document.querySelector("[role='dialog'][data-state='open']")||(Q.current&&clearTimeout(Q.current),U.current=!1,Q.current=setTimeout(()=>{U.current=!0,null==D||D(u.id)},500))},onTouchEnd:()=>{Q.current&&(clearTimeout(Q.current),Q.current=null)},onTouchMove:()=>{Q.current&&(clearTimeout(Q.current),Q.current=null)},onTouchCancel:()=>{Q.current&&(clearTimeout(Q.current),Q.current=null)},children:[(0,n.jsxs)("div",{className:"relative mb-3 flex flex-col",children:[E&&(0,n.jsx)("div",{className:"pointer-events-none absolute left-2 top-2 z-20 flex items-center justify-center rounded-md bg-background/80 p-1 backdrop-blur-sm",children:(0,n.jsx)(N.S,{checked:S,className:"pointer-events-none h-5 w-5"})}),(0,n.jsx)(p.J,{project:u,href:E?void 0:F,onClick:E?void 0:P,imagePreviewButtonText:T,showStars:y&&!E,onToggleStar:E?void 0:_}),W&&!k&&!E&&(0,n.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),z.push("/projects/".concat(u.id))},className:(0,ee.cn)("absolute right-2 top-2 z-10","flex size-9 items-center justify-center rounded-md bg-background/80 backdrop-blur-sm","transition-opacity duration-200 hover:bg-background","md:opacity-0 md:group-hover:opacity-100","opacity-70"),"aria-label":"Edit project",type:"button",children:(0,n.jsx)(O.r,{size:"small"})}),J&&!T&&(0,n.jsx)("div",{className:"pointer-events-none absolute bottom-0 left-0 p-2",children:(0,n.jsx)(w.E,{variant:"secondary",className:"text-xs opacity-50",children:"Chat"})}),u.is_published&&!T&&(0,n.jsx)("div",{className:"pointer-events-none absolute bottom-0 left-0 p-2",children:(0,n.jsx)(o(),{href:null!=(t=u.url)?t:"",target:"_blank",rel:"noopener noreferrer",className:"pointer-events-auto opacity-50 transition-opacity hover:opacity-100",onClick:e=>e.stopPropagation(),children:(0,n.jsx)(w.E,{variant:"secondary",className:"text-xs hover:bg-secondary",children:"Published"})})})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[b&&(E?(0,n.jsx)("div",{className:"transition-opacity",children:(0,n.jsx)(j.H,{user:{id:u.user_id,username:u.user_display_name||"",photo_url:null!=(r="user_photo_url"in u?u.user_photo_url:void 0)?r:void 0},className:"h-9 w-9"})}):(0,n.jsx)(o(),{href:"/@".concat(u.created_by),className:"transition-opacity hover:opacity-80",children:(0,n.jsx)(j.H,{user:{id:u.user_id,username:u.user_display_name||"",photo_url:null!=(l="user_photo_url"in u?u.user_photo_url:void 0)?l:void 0},className:"h-9 w-9"})})),(0,n.jsxs)("div",{className:"flex w-full min-w-0 items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex min-w-0 flex-col",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 truncate",children:[(0,n.jsx)(m.D,{project:u}),L&&er&&(0,n.jsx)(g.r,{}),G&&(0,n.jsx)(es,{category:null!=(s=u.category)?s:void 0})]}),(0,n.jsx)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:$&&(0,n.jsx)("p",{children:$})})]}),k&&!E&&(0,n.jsx)(ev,{project:u})]})]})]});return k&&!E?(0,n.jsx)(eg.Root,{project:u,onSelectModeToggle:D,enableBulkSelection:I,children:(0,n.jsx)(eg.ContextTrigger,{children:en})}):en});ey.displayName="ProjectCard"},223189:(e,t,r)=>{"use strict";r.d(t,{D:()=>s});var n=r(20097);function l(){return(0,n.jsx)("span",{className:"loading-dots bg-foreground before:bg-foreground after:bg-foreground inline-block"})}r(503980);let s=e=>{let{project:t}=e;return(0,n.jsx)("p",{className:"overflow-hidden truncate whitespace-nowrap",translate:"no",children:"in_progress"!==t.status||t.name?t.display_name||t.name||t.id:(0,n.jsxs)(n.Fragment,{children:["Dreaming up name",(0,n.jsx)(l,{})]})})}},334250:(e,t,r)=>{"use strict";r.d(t,{T:()=>m,t:()=>h});var n=r(420714),l=r(325413),s=r(262639),o=r(284985),i=r(317525),a=r(612466),c=r(640715);let d=[{value:"updated_at",label:"Last edited",disabled:!1},{value:"created_at",label:"Created",disabled:!1},{value:"name",label:"Name",disabled:!1}],u=e=>{if(!e)return 0;try{if((0,o.s)(e))return e.toDate().getTime();if("number"==typeof e)return isNaN(e)?0:e;if("string"==typeof e){let t=Date.parse(e);return isNaN(t)?0:t}return 0}catch(e){return 0}},p=e=>u(e.last_edited_at||e.updated_at),m=(e,t,r)=>e.sort((e,n)=>{let l=0;switch(t){case"name":l=(e.name||"").localeCompare(n.name||"");break;case"created_at":l=u(e.created_at)-u(n.created_at);break;default:l=p(e)-p(n)}return"desc"===r?-l:l}),h=e=>{var t,r;let{workspaceId:o,pageSize:u=12,isDraft:p=!1,enableVisibilityFilter:h=!1,enablePublishStatusFilter:b=!1,enableTwoPhaseLoading:x=!0,enabled:f=!0,folderId:j}=e,[g,v]=(0,l.useState)(""),[y,_]=(0,l.useState)(1),[k,w]=(0,l.useState)("all"),[C,N]=(0,l.useState)("updated_at"),[P,T]=(0,l.useState)("desc"),[E,S]=(0,l.useState)("all"),[M,D]=(0,l.useState)("all"),[I,z]=(0,l.useState)(!1),R=(0,l.useRef)(o);(0,l.useEffect)(()=>{R.current!==o&&(w("all"),N("updated_at"),T("desc"),v(""),S("all"),D("all"),_(1),z(!1),R.current=o)},[o]),(0,l.useEffect)(()=>{_(1),z(!1)},[k,C,P,g,E,M,j]);let{data:O,isLoading:A,refetch:B}=(0,s.I4)({...i.yX.projects({workspaceId:o,userId:k,isDraft:p,visibility:h?E:void 0,limit:x?20:void 0}),permission:[c.eZ.ViewWorkspaceProjects,c.eZ.ViewWorkspaceSharedWithMeProjects],enabled:f&&!!o,staleTime:12e4}),{data:Z,isLoading:L,refetch:W}=(0,s.I4)({...i.yX.projects({workspaceId:o,userId:k,isDraft:p,visibility:h?E:void 0}),permission:[c.eZ.ViewWorkspaceProjects,c.eZ.ViewWorkspaceSharedWithMeProjects],enabled:f&&!!o&&x&&!!O&&!I,staleTime:3e5});(0,l.useEffect)(()=>{(null==Z?void 0:Z.projects)&&z(!0)},[Z]);let Q=(0,l.useMemo)(()=>x&&(null==Z?void 0:Z.projects)?Z:O,[x,Z,O]),U=(0,l.useMemo)(()=>x&&L&&!!O,[x,L,O]),F=(0,l.useMemo)(()=>({keys:[{name:"name",weight:.5},{name:"description",weight:.5},{name:"tech_stack",weight:.3}],threshold:.5,includeScore:!0}),[]),V=(0,l.useMemo)(()=>{let e=null==Q?void 0:Q.projects;return e?new n.A(e,F):null},[null==Q?void 0:Q.projects,F]),q=(0,l.useMemo)(()=>{let e=null==Q?void 0:Q.projects;if(!e)return;let t=[...e];if(j&&(t=t.filter(e=>e.folder_id===j)),b&&"all"!==M&&(t=t.filter(e=>{let t=!0===e.is_published&&e.publish_visibility===a.Bc.Private,r=!0===e.is_published&&(null==e.publish_visibility||e.publish_visibility===a.Bc.Public);return"published"===M?t||r:"internally_published"===M?t:"externally_published"===M?r:"unpublished"!==M||!t&&!r})),g.length>0&&V){let e=new Set(V.search(g).map(e=>e.item.id));t=t.filter(t=>e.has(t.id))}return m(t,C,P)},[null==Q?void 0:Q.projects,g,V,C,P,M,b,j]),H=(0,l.useMemo)(()=>{if(q)return q.slice(0,y*u)},[q,y,u]),G=((null==q?void 0:q.length)||0)>y*u;return{projects:H,allProjects:null==Q?void 0:Q.projects,isLoading:A,hasMore:G,searchQuery:g,setSearchQuery:v,selectedUserId:k,setSelectedUserId:w,sortBy:C,setSortBy:N,sortOptions:d,order:P,setOrder:T,visibility:E,setVisibility:S,publishStatus:M,setPublishStatus:D,refetch:()=>{x&&z(!1),B(),x&&W()},showMore:()=>{G&&_(e=>e+1)},isLoadingInBackground:U,allProjectsLoaded:I,totalProjectsCount:(null==Z||null==(t=Z.projects)?void 0:t.length)||(null==O||null==(r=O.projects)?void 0:r.length)||0}}},341243:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(20097),l=r(375896);let s=e=>{let{onClick:t,disabled:r,isDestructive:s,className:o,children:i}=e;return(0,n.jsx)("button",{onClick:t,disabled:r,className:(0,l.cn)("flex w-full items-center gap-3 rounded-lg px-4 py-3 text-left text-base transition-colors","hover:bg-muted-active focus:bg-muted-active focus:outline-none","disabled:pointer-events-none disabled:opacity-50",s&&"text-destructive-primary hover:bg-destructive-primary/10 focus:bg-destructive-primary/10",o),children:i})}},428194:(e,t,r)=>{"use strict";r.d(t,{v:()=>a});var n=r(682780),l=r(325413),s=r(506286),o=r(926206),i=r(640715);function a(e){let{workspaceId:t,searchQuery:r=""}=e,{permitted:a}=(0,s.J)(i.eZ.ViewWorkspaceMembers),{data:c,isLoading:d,error:u,fetchNextPage:p,hasNextPage:m,isFetchingNextPage:h}=(0,n.q)({queryKey:["workspace-members-for-filter",t,r],queryFn:async e=>{let{pageParam:n=0}=e,l=(0,o.Pg)(),s=new URLSearchParams({limit:"20",offset:n.toString(),status:"active"});r.trim()&&s.append("q",r.trim());let i="/workspaces/".concat(t,"/memberships/search?").concat(s.toString());try{return await l.get(i)}catch(e){throw console.error("\uD83D\uDD0D DEBUG - API error:",e),e}},initialPageParam:0,getNextPageParam:(e,t)=>{let r=20*t.length;if(e.has_more)return r},enabled:!!t&&a,staleTime:0});return{members:(0,l.useMemo)(()=>(null==c?void 0:c.pages.flatMap(e=>e.members))||[],[null==c?void 0:c.pages]),isLoading:d,error:u,fetchNextPage:p,hasNextPage:m,isFetchingNextPage:h}}},503980:()=>{},656930:(e,t,r)=>{"use strict";r.d(t,{p:()=>o});var n=r(20097),l=r(168954),s=r(375896);let o=e=>{let{mainSkeletonClassName:t,backgroundColor:r}=e;return r||(r="bg-muted"),(0,n.jsxs)("div",{className:"group flex flex-col",children:[(0,n.jsx)(l.E,{className:(0,s.cn)("mb-3 aspect-video h-full w-full rounded-lg",r,t)}),(0,n.jsxs)("div",{className:"flex flex-col gap-2 py-1",children:[(0,n.jsx)(l.E,{className:(0,s.cn)("h-3.5 w-[150px]",r)}),(0,n.jsx)(l.E,{className:(0,s.cn)("h-3.5 w-[120px]",r)})]})]})}},808634:(e,t,r)=>{"use strict";r.d(t,{U:()=>n,e:()=>l});var n=function(e){return e.INTERNAL_TOOLS="internal_tools",e.WEBSITE="website",e.PERSONAL="personal",e.CONSUMER_APP="consumer_app",e.B2B_APP="b2b_app",e.PROTOTYPE="prototype",e}({});let l={internal_tools:"Internal Tools",website:"Website",personal:"Personal",consumer_app:"Consumer App",b2b_app:"B2B App",prototype:"Prototype"}}}]);