try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="b8a4d207-261e-4e8f-b6a0-d8bf42695005",e._sentryDebugIdIdentifier="sentry-dbid-b8a4d207-261e-4e8f-b6a0-d8bf42695005")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[14707],{14758:(e,s,a)=>{a.d(s,{CreateWorkspaceDialog:()=>b});var t=a(20097),r=a(325413),l=a(83245),n=a(757423),c=a(501269),i=a(313259),o=a(631325),d=a(468852),u=a(100220),m=a(518925),p=a(375896),x=a(742641),h=a(134472),g=a(715429),f=a(21696),j=a(488381),w=a(488430),k=a(951121),v=a(926206),y=a(317525);let N={name:{title:"Create a Workspace",description:"Create a new place to make projects or collaborate with others."},plan:{title:"Select a Plan",description:"Select a plan for your new workspace."}},b=()=>{let e=(0,c.Mu)(e=>e.showCreateWorkspaceDialog),s=(0,c.Mu)(e=>e.setShowCreateWorkspaceDialog),[a,l]=(0,r.useState)("name"),{title:i,description:o}=N[a];return(0,t.jsx)(u.E,{title:i,description:o,open:e,onOpenChange:e=>{e||l("name"),s(e)},className:"plan"===a?"max-w-[600px] md:px-6":"",children:(0,t.jsx)(n.ET,{pricingScenario:"newWorkspace",children:(0,t.jsx)(C,{closeDialog:()=>{l("name"),s(!1)},step:a,setStep:l})})})},C=e=>{let{closeDialog:s,step:a,setStep:i}=e,[o,d]=(0,r.useState)(""),u=0===(0,c.Mu)(e=>e.workspaces).length,{createWorkspace:m,isCreatingWorkspace:p}=function(e){let{closeDialog:s,skipCheckout:a}=e,t=(0,h.jE)(),{setCurrentWorkspaceId:r}=(0,j.Dx)(),{store:n}=(0,c.k9)(),{authUser:i}=(0,f.Z2)(),{toCheckout:o}=(0,w.R)(),{mutate:d,isPending:u}=(0,g.n)({mutationFn:async e=>{let{name:s}=e,a=(0,v.d0)();return await a.POST("/user/workspaces",{body:{name:s}})},onSuccess:async(e,c)=>{var d;let u=y.yX.workspaces({userId:null==i?void 0:i.uid}).queryKey;t.setQueryData(u,s=>({workspaces:[...(null==s?void 0:s.workspaces)||[],e]}));let m=y.yX.detail({workspaceId:e.id,projectId:void 0}).queryKey;if(t.setQueryData(m,{workspace:e,is_member:!0,current_member:null}),null==n||n.setState({workspaces:[...null!=(d=null==n?void 0:n.getState().workspaces)?d:[],e]}),r(e.id),a){l.toast.success("Workspace created successfully",{description:e.name}),s();return}try{if(!("plan"in c)||!e.id)throw Error("Workspace ID, plan, and plan type are required for checkout");await o({plan:c.plan,workspaceId:e.id,changeType:"upgrade",planType:c.planType}),l.toast.success("Workspace created successfully",{description:e.name})}finally{s()}},onSettled:e=>{e&&(t.invalidateQueries({queryKey:y.yX.workspaces({userId:null==i?void 0:i.uid}).queryKey}),t.invalidateQueries({queryKey:y.yX.detail({workspaceId:e.id,projectId:void 0}).queryKey}))},onError:e=>{(0,k.Ni)(e)}});return{createWorkspace:d,isCreatingWorkspace:u}}({closeDialog:s,skipCheckout:u}),x=(0,n.et)(),N=()=>{if("name"===a)return""===o?void l.toast.error("Workspace name is required"):u?void m({name:o}):void i("plan");null!==x.newWorkspaceSelectedPlan&&m({name:o,plan:x.newWorkspaceSelectedPlan,planType:x.planType})};return(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsx)(S,{step:a,workspaceName:o,setWorkspaceName:d,closeDialog:s,onSubmit:N,submitLabel:u?"Create workspace":void 0,isSubmitting:!!u&&p,skipCheckout:u}),!u&&(0,t.jsx)(E,{step:a,handleSubmit:N,setStep:i,workspaceName:o,isCreatingWorkspace:p})]})},S=e=>{let{step:s,workspaceName:a,setWorkspaceName:r,closeDialog:l,onSubmit:n,submitLabel:c,isSubmitting:u,skipCheckout:x}=e,{mustHidePayments:h}=(0,m._)();return h&&!x?(0,t.jsxs)("div",{className:(0,p.cn)("hidden flex-col gap-4","name"===s&&"flex"),children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:"Visit lovable.dev to create a workspace with a paid plan."}),(0,t.jsx)("div",{className:"mt-2 flex w-full gap-6 px-1 pb-1",children:(0,t.jsx)(i.$,{className:"flex-1",intent:"secondary",onClick:l,children:"Go back"})})]}):(0,t.jsxs)("div",{className:(0,p.cn)("hidden flex-col gap-4","name"===s&&"flex"),children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2 px-1",children:[(0,t.jsx)(d.Label,{children:"Workspace name"}),(0,t.jsx)(o.p,{id:"workspaceName",value:a,onChange:e=>r(e.target.value),placeholder:"Enter workspace name",required:!0})]}),(0,t.jsxs)("div",{className:"mt-2 flex w-full gap-6 px-1 pb-1",children:[(0,t.jsx)(i.$,{className:"flex-1",intent:"secondary",onClick:l,children:"Go back"}),(0,t.jsx)(i.$,{className:"flex-1",disabled:!a||u,loading:u,onClick:n,children:null!=c?c:"Continue to plan"})]})]})},E=e=>{let{step:s,setStep:a,workspaceName:r,isCreatingWorkspace:l,handleSubmit:n}=e;return(0,t.jsxs)("div",{className:(0,p.cn)("hidden flex-col gap-4","plan"===s&&"flex"),children:[(0,t.jsxs)("div",{className:(0,p.cn)("grid grid-cols-1 gap-4 md:grid-cols-2"),children:[(0,t.jsx)(x.ZL.Pro,{}),(0,t.jsx)(x.ZL.Biz,{})]}),(0,t.jsxs)("div",{className:"sticky bottom-0 mt-2 flex w-full gap-6 border-t bg-background px-1 py-3",children:[(0,t.jsx)(i.$,{className:"flex-1",intent:"secondary",onClick:()=>a("name"),children:"Go back"}),(0,t.jsx)(i.$,{className:"flex-1",onClick:n,disabled:!r||l,loading:l,children:l?"Creating...":"Create Workspace"})]})]})}},26997:(e,s,a)=>{a.d(s,{_:()=>i});var t=a(134472),r=a(715429),l=a(83245),n=a(926206),c=a(630298);let i=()=>{let e=(0,t.jE)(),s=(0,r.n)({mutationFn:async e=>{let{workspaceId:s,requestedRole:a}=e;return(0,n.Pg)().post("/workspaces/".concat(s,"/access-requests"),{requested_role:a})},onSuccess:(s,a)=>{let{workspaceId:t}=a;l.toast.success("Access request sent",{description:"The workspace admins will review your request."}),e.invalidateQueries({queryKey:["workspaces",t,"access-requests","me"]})},onError:e=>{var s,a;let t=(null==e||null==(a=e.response)||null==(s=a.data)?void 0:s.message)||"Failed to send access request";l.toast.error("Error",{description:t})}}),a=(0,r.n)({mutationFn:async e=>{let{workspaceId:s,requestId:a,role:t}=e;return(0,n.Pg)().patch("/workspaces/".concat(s,"/access-requests/").concat(a),{status:"accepted",...t&&{role:t}})},onSuccess:(s,a)=>{let{workspaceId:t}=a;l.toast.success("Access request accepted"),e.invalidateQueries({queryKey:c.workspaceKeys.workspaceAccessRequests(t)}),e.invalidateQueries({queryKey:c.workspaceKeys.memberships(t)})},onError:e=>{var s,a;let t=(null==e||null==(a=e.response)||null==(s=a.data)?void 0:s.message)||"Failed to accept access request";l.toast.error("Error",{description:t})}}),i=(0,r.n)({mutationFn:async e=>{let{workspaceId:s,requestId:a}=e;return(0,n.Pg)().patch("/workspaces/".concat(s,"/access-requests/").concat(a),{status:"rejected"})},onSuccess:(s,a)=>{let{workspaceId:t}=a;l.toast.success("Access request declined"),e.invalidateQueries({queryKey:c.workspaceKeys.workspaceAccessRequests(t)})},onError:e=>{var s,a;let t=(null==e||null==(a=e.response)||null==(s=a.data)?void 0:s.message)||"Failed to decline access request";l.toast.error("Error",{description:t})}});return{createAccessRequest:s.mutate,createWorkspaceRequestAsync:s.mutateAsync,isCreating:s.isPending,acceptWorkspaceRequest:a.mutate,isAccepting:a.isPending,declineWorkspaceRequest:i.mutate,isDeclining:i.isPending}}},324573:(e,s,a)=>{a.d(s,{NoWorkspaceDialog:()=>f});var t=a(20097),r=a(400282),l=a(752712),n=a(325413),c=a(602571),i=a(21696),o=a(501269),d=a(365533),u=a(313259),m=a(100220),p=a(628801),x=a(816232),h=a(973368);let g=(0,c.vt)(e=>({dismissed:!1,setDismissed:s=>e({dismissed:s})})),f=()=>{let e=(0,o.Mu)(e=>e.workspaces),s=(0,o.Mu)(e=>e.isInitialized),a=(0,o.Mu)(e=>e.isLoading),c=(0,o.Mu)(e=>e.error),f=g(e=>e.dismissed),j=g(e=>e.setDismissed),w=(0,o.Mu)(e=>e.setShowCreateWorkspaceDialog),k=(0,d.v)(),{authUser:v}=(0,i.Z2)(),y=(0,r.usePathname)(),N=(0,l.sf)(),b=(0,n.useRef)(!1),C=(0,n.useMemo)(()=>{if(!v)return!1;let e=new Set;v.email&&e.add(v.email.toLowerCase());let s=p.auth.currentUser;return(null==s?void 0:s.providerData)&&s.providerData.forEach(s=>{s.email&&e.add(s.email.toLowerCase())}),Array.from(e).some(e=>!(0,h.a)(e))},[v]),S=null==y?void 0:y.startsWith("/auth"),E=s&&!a&&!c&&0===e.length&&!f&&!S;return(0,n.useEffect)(()=>{E&&!b.current&&(N.capture(x.nA.NO_WORKSPACE.DIALOG_SHOWN),b.current=!0)},[E,N]),(0,t.jsx)(m.E,{title:"You are not a member of any workspaces",description:"Join an existing workspace or create a new one to get started.",open:E,onOpenChange:e=>{e||j(!0)},centered:!0,children:(0,t.jsxs)("div",{className:"flex w-full flex-col gap-3",children:[C&&(0,t.jsx)(u.$,{className:"w-full",size:"lg",rounded:!0,onClick:()=>{N.capture(x.nA.NO_WORKSPACE.FIND_WORKSPACES_CLICKED),j(!0),k()},children:"Find workspaces to join"}),(0,t.jsx)(u.$,{className:"w-full",size:"lg",rounded:!0,intent:C?"secondary":void 0,onClick:()=>{N.capture(x.nA.NO_WORKSPACE.CREATE_WORKSPACE_CLICKED),j(!0),w(!0)},children:"Create new workspace"})]})})}},365533:(e,s,a)=>{a.d(s,{FindWorkspacesDialogRoot:()=>N,v:()=>y});var t=a(20097),r=a(183031),l=a(752712),n=a(325413),c=a(7579),i=a(602571),o=a(21696),d=a(501269),u=a(412753),m=a(313259),p=a(893661),x=a(927987),h=a(168954),g=a(100220),f=a(26997),j=a(816232),w=a(317525),k=a(640715);let v=(0,i.vt)(e=>({isOpen:!1,open:()=>e({isOpen:!0}),close:()=>e({isOpen:!1}),setOpen:s=>e({isOpen:s})})),y=()=>v(e=>e.open);function N(){let{isOpen:e,setOpen:s,close:a}=v(),{authUser:i}=(0,o.Z2)(),y=(0,d.Mu)(e=>e.setShowCreateWorkspaceDialog),N=(0,l.sf)(),{data:b,isLoading:C}=(0,r.I)({...w.yX.discoverByDomain(),enabled:e}),S=null!=b?b:[],{createWorkspaceRequestAsync:E,isCreating:_}=(0,f._)(),[D,q]=(0,n.useState)({}),I=(0,c.mN)({defaultValues:{}}),W=(null==i?void 0:i.email)||"your email",A=S.length;return(0,t.jsx)(g.E,{title:"Discover your team's workspaces",description:"Connect with colleagues and collaborate on shared projects within your organization",open:e,onOpenChange:e=>{e&&N.capture(j.nA.FIND_WORKSPACES.DIALOG_OPENED),s(e)},className:"max-w-lg",centered:!0,preventAutoFocus:!0,children:(0,t.jsxs)("div",{className:"flex min-h-0 w-full flex-1 flex-col",children:[(0,t.jsxs)("p",{className:"shrink-0 text-center text-sm text-muted-foreground",children:[W," can join ",A," ",1===A?"workspace":"workspaces","."]}),(0,t.jsx)("div",{className:"mt-3 rounded-xl border bg-card sm:mt-4",children:(0,t.jsx)("div",{className:"max-h-[280px] overflow-y-auto sm:max-h-[320px]",children:(0,t.jsx)("div",{className:"w-full",children:C?(0,t.jsx)("div",{children:Array.from({length:4}).map((e,s)=>(0,t.jsxs)("div",{className:"relative flex h-[60px] items-center gap-2 px-3 py-2 after:absolute after:inset-x-3 after:bottom-0 after:h-px after:bg-border after:content-[''] last:after:hidden sm:h-[72px] sm:gap-3 sm:px-4 sm:py-3",children:[(0,t.jsx)(h.E,{className:"size-8 shrink-0 rounded-full sm:size-10"}),(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col justify-center gap-1",children:[(0,t.jsx)(h.E,{className:"h-4 w-24 sm:h-5 sm:w-32"}),(0,t.jsx)(h.E,{className:"h-3 w-16 sm:h-4 sm:w-20"})]}),(0,t.jsxs)("div",{className:"flex shrink-0 items-center gap-1.5 sm:gap-2",children:[(0,t.jsx)(h.E,{className:"h-8 w-20 sm:h-9 sm:w-24"}),(0,t.jsx)(h.E,{className:"h-8 w-[72px] rounded-full sm:h-9 sm:w-[88px]"})]})]},s))}):0===S.length?(0,t.jsx)("div",{className:"px-3 py-4 text-sm text-muted-foreground sm:px-4",children:"No matching workspaces found for your linked email domains."}):(0,t.jsx)(p.lV,{...I,children:(0,t.jsx)("div",{children:S.map(e=>{let s=!!D[e.id]||!!e.requested;return(0,t.jsxs)("div",{className:"relative flex h-[60px] items-center gap-2 px-3 py-2 after:absolute after:inset-x-3 after:bottom-0 after:h-px after:bg-border after:content-[''] last:after:hidden sm:h-[72px] sm:gap-3 sm:px-4 sm:py-3",children:[(0,t.jsx)(u.z,{className:"size-8 shrink-0 text-sm sm:size-10 sm:text-base",workspace:{id:e.id,name:e.name,image_url:e.image_url}}),(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)("div",{className:"truncate text-sm font-medium sm:text-base",children:e.name}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground sm:text-sm",children:[e.member_count," ",1===e.member_count?"member":"members"]})]}),(0,t.jsxs)("div",{className:"flex shrink-0 items-center gap-1.5 sm:gap-2",children:[(0,t.jsx)(p.zB,{control:I.control,name:e.id,defaultValue:"viewer",render:e=>{let{field:a}=e;return(0,t.jsx)(p.eI,{children:(0,t.jsx)(p.MJ,{children:(0,t.jsxs)(x.Select,{value:a.value,onValueChange:a.onChange,disabled:s,children:[(0,t.jsx)(x.SelectTrigger,{className:"h-8 w-20 text-xs sm:h-9 sm:w-24 sm:text-sm",children:(0,t.jsx)(x.SelectValue,{})}),(0,t.jsx)(x.SelectContent,{children:k.rt.map(e=>(0,t.jsx)(x.SelectItem,{value:e,children:k.$o[e]},e))})]})})})}}),(0,t.jsx)(m.$,{variant:"outline",size:"md",className:"h-8 min-w-[72px] rounded-full text-xs sm:h-9 sm:min-w-[88px] sm:text-sm",disabled:s||_,onClick:async()=>{let s=I.getValues(e.id)||"viewer";await E({workspaceId:e.id,requestedRole:s}),N.capture(j.nA.FIND_WORKSPACES.ACCESS_REQUESTED,{workspace_id:e.id,requested_role:s}),q(s=>({...s,[e.id]:!0}))},children:s?"Requested":"Request"})]})]},e.id)})})})})})}),(0,t.jsxs)("div",{className:"mt-3 flex w-full shrink-0 flex-col gap-3 text-center sm:mt-4 sm:gap-4",children:[(0,t.jsx)(m.$,{className:"w-full",rounded:!0,size:"lg",onClick:()=>{N.capture(j.nA.FIND_WORKSPACES.DONE_CLICKED,{requests_made:Object.keys(D).length}),s(!1)},children:"Done"}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Want something new?"," ",(0,t.jsx)("button",{onClick:()=>{N.capture(j.nA.FIND_WORKSPACES.CREATE_WORKSPACE_CLICKED),a(),y(!0)},className:"text-foreground underline underline-offset-4 hover:opacity-80",children:"Create a new workspace"})]})]})]})})}},776769:(e,s,a)=>{a.d(s,{ReferralNoticeDialog:()=>o});var t=a(20097),r=a(325413),l=a(879100),n=a(313259),c=a(480695),i=a(873298);let o=()=>{let{shouldShowReferralNotice:e}=(0,i.P)(),[s,a]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{e&&a(!0)},[e]),(0,t.jsx)(c.lG,{open:s,onOpenChange:a,children:(0,t.jsxs)(c.Cf,{className:"sm:max-w-md",children:[(0,t.jsx)(c.c7,{children:(0,t.jsx)(c.L3,{className:"text-2xl font-medium",children:"Congratulations!"})}),(0,t.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,t.jsx)("div",{children:"You have earned"}),(0,t.jsx)("div",{className:"rounded-xl bg-muted py-8 text-center text-4xl font-medium",children:"+".concat(l.aM," credits")}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Thanks to the user that referred you. You can use these credits to create projects, generate content, and more."}),(0,t.jsx)(n.$,{onClick:()=>{a(!1)},children:"Continue"})]})]})})}},808194:(e,s,a)=>{a.d(s,{PostCheckoutDialog:()=>h});var t=a(20097),r=a(427321),l=a(400282),n=a(325413),c=a(488381),i=a(313259),o=a(480695),d=a(255483),u=a(168954),m=a(433080),p=a(375896);let x={ktlo:{name:"Lite",title:"Boom, you rock!",buttonText:"Let's keep building",description:void 0,lightImage:"/img/postupgrade/lite-light.jpg",darkImage:"/img/postupgrade/lite-dark.jpg"},pro:{name:"Pro",title:"You are all set",buttonText:"Let's build",description:"Start using custom domains, powerful features and plenty of credits.",lightImage:"/img/postupgrade/pro-light.jpg",darkImage:"/img/postupgrade/pro-dark.jpg"},biz:{name:"Business",title:"You are all set",buttonText:"Let's build",description:"Start using SSO, design templates and plenty of credits.",lightImage:"/img/postupgrade/biz-light.jpg",darkImage:"/img/postupgrade/biz-dark.jpg"}},h=()=>{let e=(0,l.useSearchParams)(),s=(0,l.useRouter)(),a=(0,l.usePathname)(),[h,g]=(0,n.useState)(!1),f=(0,c.j4)(e=>e.currentWorkspace),j=(0,m.m6)(null==f?void 0:f.plan),w=Object.keys(x).includes(j)?x[j]:null,k=(0,n.useCallback)(()=>{let t=new URLSearchParams(e);t.delete("change_type"),t.delete("plan_type"),t.delete("payment_status"),s.push("".concat(a,"?").concat(t.toString()))},[a,s,e]);(0,n.useEffect)(()=>{if("failed"===e.get("payment_status"))return;let s=e.get("change_type");s&&"upgrade"===s&&g(!0),f&&!j&&k()},[e,f,k,j]),(0,n.useEffect)(()=>{e.get("change_type")||g(!1)},[e]);let v=!f||!w;return(0,t.jsx)(o.lG,{open:h,onOpenChange:e=>{e||k()},children:(0,t.jsx)(o.Cf,{className:"pointer-events-auto flex max-h-[95vh] flex-col gap-4 overflow-y-auto outline-none",children:v?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-col items-start gap-4",children:[(0,t.jsx)(u.E,{className:"h-9 w-32"}),(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsx)(u.E,{className:"h-8 w-48"}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(u.E,{className:"h-4 w-full"}),(0,t.jsx)(u.E,{className:"h-4 w-3/4"})]})]})]}),(0,t.jsx)(u.E,{className:"h-48 w-full rounded-xl"}),(0,t.jsx)("div",{className:"flex items-center justify-center",children:(0,t.jsx)(u.E,{className:"h-11 w-full rounded-xl"})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-col items-start gap-4",children:[(0,t.jsx)(d.LovableLogoColor,{className:"h-9"}),(0,t.jsxs)(o.c7,{children:[(0,t.jsx)(o.L3,{className:"text-2xl md:text-3xl",children:w.title}),(0,t.jsxs)(o.rr,{className:"text-muted-foreground",children:['"',f.name,'" is now subscribed to'," ",(0,t.jsxs)("b",{className:"font-medium",children:["Lovable ",w.name]}),".","ktlo"!==j&&" Start using custom domains, powerful features and plenty of credits."]})]})]}),(0,t.jsx)(r.default,{src:w.lightImage,alt:"upgrade",className:"block h-48 w-full rounded-xl border object-cover dark:hidden",width:800,height:200,priority:!0}),(0,t.jsx)(r.default,{src:w.darkImage,alt:"upgrade",className:"hidden h-48 w-full rounded-xl object-cover dark:block",width:800,height:200,priority:!0}),(0,t.jsx)("div",{className:"flex items-center justify-center",children:(0,t.jsx)(i.$,{size:"lg",onClick:k,className:(0,p.cn)("group relative mt-1 flex w-full items-center rounded-xl"),children:(0,t.jsx)("span",{className:"z-40",children:w.buttonText})})})]})})})}},973368:(e,s,a)=>{a.d(s,{a:()=>r});let t=new Set(["gmail.com","googlemail.com","outlook.com","hotmail.com","live.com","msn.com","yahoo.com","yahoo.co.uk","icloud.com","me.com","mac.com","proton.me","protonmail.com","gmx.com","yandex.com","mail.com","zoho.com","aol.com","privaterelay.appleid.com"]);function r(e){let s=e.split("@");if(2!==s.length)return!1;let a=s[1].toLowerCase();return t.has(a)}}}]);