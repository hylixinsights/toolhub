try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},r=(new e.Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="083c8936-2266-4a6b-84ad-6cc164e4f602",e._sentryDebugIdIdentifier="sentry-dbid-083c8936-2266-4a6b-84ad-6cc164e4f602")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73383],{19733:(e,r,t)=>{t.d(r,{J:()=>o});var a=t(20097),l=t(17308),s=t(135345),n=t(612466);function o(e){let{folderVisibility:r,projectVisibilities:t,className:o}=e,i=r===s.N.Personal?n.Lu.Draft:n.Lu.Private,c=t.filter(e=>e&&e!==i).length;if(0===c)return null;let d=r===s.N.Personal,u=1===c;return(0,a.jsx)("div",{className:o,children:(0,a.jsxs)("div",{className:"flex items-center gap-2 rounded-lg border border-warning bg-warning p-3 text-sm font-medium text-warning-foreground",children:[(0,a.jsx)(l.Y,{size:"small",className:"flex-shrink-0"}),(0,a.jsx)("span",{children:d?u?"This project will become restricted to the owner":"These ".concat(c," projects will become restricted to the owner"):u?"This project will become visible to all workspace members":"These ".concat(c," projects will become visible to all workspace members")})]})})}},27503:(e,r,t)=>{t.d(r,{CS:()=>a,oX:()=>n,rI:()=>s,rZ:()=>l});let a="GPT-Engineer-App",l=(e,r)=>"https://github.com/".concat(r||a,"/").concat(e),s=(e,r,t)=>"".concat(l(e,t),"/commit/").concat(r),n=e=>{var r;let t=null==e||null==(r=e.github_owner)?void 0:r.name;return!!(t&&t!==a)}},39809:(e,r,t)=>{t.r(r),t.d(r,{default:()=>n});var a,l=t(325413);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(null,arguments)}let n=function(e){return l.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),a||(a=l.createElement("path",{fill:"currentColor",d:"M13.47 6.47a.75.75 0 0 1 1.06 0l5 5a.75.75 0 0 1 0 1.06l-5 5a.75.75 0 1 1-1.06-1.06l3.72-3.72H5a.75.75 0 0 1 0-1.5h12.19l-3.72-3.72a.75.75 0 0 1 0-1.06"})))}},42532:(e,r,t)=>{t.d(r,{A:()=>n});var a,l=t(325413);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(null,arguments)}let n=function(e){return l.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),a||(a=l.createElement("path",{fill:"currentColor",d:"M20.25 12a.93.93 0 0 0-.415-.775l-.8-.535a2.75 2.75 0 0 1-1.155-2.906l.15-.647a.972.972 0 0 0-1.167-1.166l-.647.15a2.75 2.75 0 0 1-2.906-1.155l-.535-.801a.932.932 0 0 0-1.55 0l-.535.8A2.75 2.75 0 0 1 7.784 6.12l-.647-.15A.972.972 0 0 0 5.97 7.138l.15.647a2.75 2.75 0 0 1-1.155 2.906l-.801.535a.932.932 0 0 0 0 1.55l.8.535a2.75 2.75 0 0 1 1.155 2.906l-.15.647a.972.972 0 0 0 1.167 1.166l.647-.15a2.75 2.75 0 0 1 2.906 1.155l.535.801a.932.932 0 0 0 1.55 0l.535-.8a2.75 2.75 0 0 1 2.906-1.155l.647.15a.972.972 0 0 0 1.166-1.167l-.15-.647a2.75 2.75 0 0 1 1.155-2.906l.801-.535A.93.93 0 0 0 20.25 12m-6 0a2.25 2.25 0 1 0-4.5 0 2.25 2.25 0 0 0 4.5 0m1.5 0a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0m6 0c0 .813-.407 1.572-1.083 2.023l-.8.535a1.25 1.25 0 0 0-.525 1.32l.15.648a2.472 2.472 0 0 1-2.966 2.965l-.648-.15a1.25 1.25 0 0 0-1.32.525l-.535.801a2.432 2.432 0 0 1-4.046 0l-.535-.8a1.25 1.25 0 0 0-1.32-.525l-.648.15a2.472 2.472 0 0 1-2.965-2.966l.15-.648a1.25 1.25 0 0 0-.525-1.32l-.801-.535a2.432 2.432 0 0 1 0-4.046l.8-.535a1.25 1.25 0 0 0 .525-1.32l-.15-.648a2.472 2.472 0 0 1 2.966-2.965l.648.15a1.25 1.25 0 0 0 1.32-.525l.535-.801a2.432 2.432 0 0 1 4.046 0l.535.8a1.25 1.25 0 0 0 1.32.525l.648-.15a2.472 2.472 0 0 1 2.965 2.966l-.15.648a1.25 1.25 0 0 0 .525 1.32l.801.535A2.43 2.43 0 0 1 21.75 12"})))}},43049:(e,r,t)=>{t.d(r,{U:()=>y});var a=t(20097),l=t(806702),s=t(134472),n=t(715429),o=t(325413),i=t(7579),c=t(83245),d=t(6442),u=t(488381),m=t(313259),p=t(480695),h=t(893661),f=t(631325),v=t(951121),x=t(926206),g=t(630298),b=t(49233);let j=d.Ikc({displayName:d.YjP().min(1,"Display name is required").max(100,"Display name must be less than 100 characters")}),y=e=>{let{project:r,isOpen:t,onClose:d}=e,y=(0,s.jE)(),w=(0,o.useRef)(null),N=(0,u.j4)(e=>{var r;return null==(r=e.currentWorkspace)?void 0:r.id}),_=(0,b.Kr)(),C=(0,i.mN)({resolver:(0,l.u)(j),defaultValues:{displayName:r.display_name||r.name||""}}),k=(0,n.n)({mutationFn:async e=>{let{displayName:t}=e;return(0,x.Pg)().put("/projects/".concat(r.id),{display_name:t})},onSuccess:(e,r)=>{y.invalidateQueries({queryKey:g.gO.all}),y.invalidateQueries({queryKey:g.workspaceKeys.detail(N||"")}),c.toast.success("Project renamed successfully"),d(),C.reset({displayName:r.displayName})},onError:e=>{(0,v.Ni)(e)}}),P=async e=>{await k.mutateAsync({displayName:e.displayName})},A=!!C.formState.dirtyFields.displayName;return(0,a.jsx)(p.lG,{open:t,onOpenChange:d,children:(0,a.jsxs)(p.Cf,{size:"sm",onOpenAutoFocus:e=>{e.preventDefault(),requestAnimationFrame(()=>{w.current&&(w.current.focus(),w.current.select())})},children:[(0,a.jsxs)(p.c7,{children:[(0,a.jsx)(p.L3,{children:"Rename project"}),(0,a.jsx)(p.rr,{children:"Update how this project appears in your workspace."})]}),(0,a.jsx)(h.lV,{...C,children:(0,a.jsxs)("form",{onSubmit:C.handleSubmit(P),className:"flex w-full flex-col gap-5",children:[(0,a.jsxs)("div",{className:"w-full space-y-4",children:[(0,a.jsx)(h.zB,{control:C.control,name:"displayName",render:e=>{let{field:r}=e;return(0,a.jsxs)(h.eI,{className:"space-y-2",children:[(0,a.jsx)(h.lR,{children:"Display name"}),(0,a.jsx)(h.MJ,{children:(0,a.jsx)(f.p,{placeholder:"My Project",...r,ref:e=>{r.ref(e),w.current=e}})}),!C.formState.errors.displayName&&(0,a.jsx)(h.Rr,{className:"text-xs leading-relaxed",children:"Supports spaces and special characters, up to 100 characters. Note: this name is only visible to you and members of your workspace, not to visitors of your published app."}),(0,a.jsx)(h.C5,{})]})}}),r.name&&(0,a.jsxs)("div",{className:"rounded-lg border border-border/50 bg-muted/30 px-3.5 py-3",children:[(0,a.jsxs)("p",{className:"mt-1.5 text-xs text-muted-foreground",children:["Changing the display name does not change your project URL:"," ",(0,a.jsxs)("b",{children:[r.name,_]}),"."]}),(0,a.jsx)("p",{className:"mt-1.5 text-xs text-muted-foreground",children:"You can change this URL in the publish dialog"})]})]}),(0,a.jsxs)(p.Es,{children:[(0,a.jsx)(m.$,{variant:"outline",onClick:d,children:"Cancel"}),(0,a.jsx)(m.$,{type:"submit",disabled:!A||k.isPending,loading:k.isPending,children:k.isPending?"Saving...":"Save"})]})]})})]})})}},49233:(e,r,t)=>{t.d(r,{Kr:()=>a,Of:()=>l,QI:()=>n,Qm:()=>s});let a=()=>"lovable.app".includes("lovable")?".lovable.app":".gpt-eng.com",l=e=>{try{let r=new URL(e),t=r.hostname,a=t.indexOf("."),l=r.pathname,s="";if(l.endsWith("/")&&(s="/",l="/"===l?"":l.slice(0,-1)),-1===a)return{protocol:r.protocol+"//",editablePart:t,fixedSuffix:l+r.search+r.hash,trailingSlash:s};return{protocol:r.protocol+"//",editablePart:t.substring(0,a),fixedSuffix:t.substring(a)+l+r.search+r.hash,trailingSlash:s}}catch(r){return{protocol:"",editablePart:e,fixedSuffix:"",trailingSlash:""}}},s=e=>e.toLowerCase().replace(/[^a-z0-9-]/g,"-").replace(/-{2,}/g,"-").replace(/^[^a-z]+/,""),n=e=>s(e).replace(/-+$/,"")},76886:(e,r,t)=>{t.d(r,{W:()=>l});var a=t(92810);let l=(0,t(780493).w)(a.A,"StarFilledIcon")},82904:(e,r,t)=>{t.d(r,{rI:()=>m,hO:()=>w,SQ:()=>j,I:()=>f,_2:()=>y,lp:()=>_,dc:()=>h,Hr:()=>x,Ht:()=>N,mB:()=>C,V0:()=>k,lv:()=>v,M5:()=>b,nV:()=>g,ty:()=>p});var a=t(20097),l=t(152899),s=t(325413),n=t(388952),o=t(50319),i=t(335704),c=t(375896),d=t(480695);class u extends s.Component{static getDerivedStateFromError(e){return{hasError:!0,componentStack:e.stack||"",error:e}}componentDidCatch(e,r){this.setState({componentStack:r.componentStack||"",error:e}),console.log({error:e,errorInfo:r})}render(){if(this.state.hasError){var e;return(0,a.jsxs)("div",{style:{position:"absolute",top:0,left:0,zIndex:1e4,backgroundColor:"red"},children:[(0,a.jsx)("h2",{children:null==(e=this.state.error)?void 0:e.message}),(0,a.jsx)("p",{style:{whiteSpace:"pre-wrap"},children:this.state.componentStack})]})}return this.props.children}constructor(e){super(e),this.state={hasError:!1,componentStack:"",error:null}}}let m=e=>{let{...r}=e;return(0,a.jsx)(u,{children:(0,a.jsx)(d.MV.Provider,{value:{allowNestedDialog:!1},children:(0,a.jsx)(l.bL,{...r})})})},p=l.l9,h=l.ZL,f=l.YJ,v=l.Pb,x=l.z6,g=s.forwardRef((e,r)=>{let{className:t,inset:s,children:n,hideChevron:i,...d}=e;return(0,a.jsxs)(l.ZP,{ref:r,className:(0,c.cn)("flex cursor-default select-none items-center gap-2 rounded-lg px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",t),...d,children:[n,!i&&(0,a.jsx)(o.v,{className:"ml-auto"})]})});g.displayName=l.ZP.displayName;let b=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(l.G5,{ref:r,className:(0,c.cn)("z-[10000] min-w-32 overflow-y-auto overflow-x-hidden rounded-xl border bg-popover p-1 text-popover-foreground shadow-lg","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","max-h-[calc(var(--radix-dropdown-menu-content-available-height)_-_16px)]",t),...s})});b.displayName=l.G5.displayName;let j=s.forwardRef((e,r)=>{let{className:t,sideOffset:s=4,...n}=e;return(0,a.jsx)(l.ZL,{children:(0,a.jsx)(l.UC,{ref:r,sideOffset:s,className:(0,c.cn)("z-[10000] min-w-32 overflow-y-auto overflow-x-hidden rounded-xl border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","max-h-[calc(var(--radix-dropdown-menu-content-available-height)_-_16px)]","origin-[var(--radix-dropdown-menu-content-transform-origin)]",t),...n})})});j.displayName=l.UC.displayName;let y=s.forwardRef((e,r)=>{let{className:t,inset:s,...n}=e;return(0,a.jsx)(l.q7,{ref:r,className:(0,c.cn)("relative flex cursor-default select-none items-center gap-2 rounded-lg px-2 py-1.5 text-sm text-foreground outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent [&>svg]:size-4 [&>svg]:shrink-0",s&&"pl-8",t),...n})});y.displayName=l.q7.displayName;let w=s.forwardRef((e,r)=>{let{className:t,children:s,checked:o,...i}=e;return(0,a.jsxs)(l.H_,{ref:r,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-lg py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent",t),checked:o,...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(l.VF,{children:(0,a.jsx)(n.S,{size:"small"})})}),s]})});w.displayName=l.H_.displayName;let N=s.forwardRef((e,r)=>{let{className:t,children:s,selectedIndicatorClassName:o,arrowLocation:i="start",...d}=e;return(0,a.jsxs)(l.hN,{ref:r,className:(0,c.cn)("relative flex cursor-default select-none items-center justify-start gap-x-1 rounded-lg px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent","start"===i&&"pl-7",t),...d,children:["start"===i&&(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(l.VF,{children:(0,a.jsx)(n.S,{size:"small",className:(0,c.cn)("ml-auto",o)})})}),s,"end"===i&&(0,a.jsx)(l.VF,{children:(0,a.jsx)(n.S,{size:"small",className:(0,c.cn)("ml-auto",o)})}),"far-end"===i&&(0,a.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-end",children:(0,a.jsx)(l.VF,{children:(0,a.jsx)(n.S,{size:"small",className:(0,c.cn)("ml-auto",o)})})})]})});N.displayName=l.hN.displayName;let _=s.forwardRef((e,r)=>{let{className:t,inset:s,...n}=e;return(0,a.jsx)(l.JU,{ref:r,className:(0,c.cn)("px-2 py-1.5 text-sm font-medium",s&&"pl-8",t),...n})});_.displayName=l.JU.displayName;let C=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(l.wv,{ref:r,className:(0,c.cn)("-mx-1 my-1 h-px bg-border",t),...s})});C.displayName=l.wv.displayName;let k=e=>{let{className:r,children:t,...l}=e;return(0,a.jsx)("span",{className:(0,c.cn)("ml-auto",r),...l,children:(0,a.jsx)(i.u,{variant:"ghost",children:t})})};k.displayName="DropdownMenuShortcut"},83118:(e,r,t)=>{t.d(r,{O:()=>c,j:()=>d});var a=t(325413),l=t(201006),s=t(488381),n=t(636010),o=t(358855),i=t(391326);let c=e=>{let{projectId:r,projectName:t,useCacheBuster:a,sha:l,accessToken:s,useCustomScript:n,hideBadge:o}=e;if(!r&&!t)throw Error("projectId or projectName must be provided");if(r&&t)throw Error("projectId and projectName cannot both be provided");let c=i.env.NEXT_PUBLIC_PROXY_WORKER_PROTOCOL||"https",d=i.env.NEXT_PUBLIC_PROXY_WORKER_PORT?":".concat(i.env.NEXT_PUBLIC_PROXY_WORKER_PORT):"",u=l?"-".concat(l.slice(0,8)):"";try{let e=new URL("".concat(c,"://").concat(void 0!==t?"preview":"id-preview").concat(u,"--").concat(t||r,".").concat("lovable.app").concat(d));return a&&e.searchParams.set("cache",Date.now().toString()),s&&e.searchParams.set("__lovable_token",s),n&&e.searchParams.set("lov-override-script","true"),o&&e.searchParams.set("forceHideBadge","true"),e.toString()}catch(e){return window.location.href="/","/"}},d=function(){let{useCacheBuster:e,sha:r,useCustomScript:t,hideBadge:i,includeAccessToken:d=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=(0,o.B)(),m=(0,n.Iw)(e=>e.project),p=(0,s.j4)(e=>e.currentWorkspace),h=(0,l.n)(d?u:void 0),f=null==m?void 0:m.name,v=(0,a.useMemo)(()=>{if(d&&!h.data)return null;let a=(null==p?void 0:p.disable_named_previews)||!f;if(!a&&!f)return null;try{return c({projectId:a?u:void 0,projectName:a?void 0:f,useCacheBuster:e,sha:r,accessToken:d?h.data:void 0,useCustomScript:t,hideBadge:i})}catch(e){return console.error("Error generating preview URL",e),null}},[u,f,null==p?void 0:p.disable_named_previews,e,r,i,d,h.data,t]);return{previewUrl:v,isLoading:!!d&&(h.isLoading||!v),error:d?h.error:null,project:m,projectId:u}}},92810:(e,r,t)=>{t.d(r,{A:()=>n});var a,l=t(325413);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(null,arguments)}let n=function(e){return l.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),a||(a=l.createElement("path",{fill:"currentColor",d:"M12 2.25a.75.75 0 0 1 .693.462l2.204 5.3 5.722.46a.75.75 0 0 1 .429 1.316l-4.36 3.735 1.332 5.584a.75.75 0 0 1-1.12.814L12 16.929 7.1 19.92a.75.75 0 0 1-1.12-.814l1.332-5.584-4.36-3.735a.75.75 0 0 1 .429-1.316l5.722-.46 2.205-5.3.05-.1A.75.75 0 0 1 12 2.25"})))}},102110:(e,r,t)=>{t.d(r,{f:()=>h});var a=t(20097),l=t(183031),s=t(234281),n=t.n(s),o=t(325413),i=t(488381),c=t(506286),d=t(328699),u=t(317525),m=t(640715),p=t(168954);let h=(0,o.memo)(function(e){var r,t,s;let{username:o,showAsLink:h=!0,className:f="font-medium",fallback:v,showLoading:x=!1,prefix:g=""}=e,{permitted:b}=(0,c.J)(m.eZ.ViewWorkspaceMembers),j=(0,i.j4)(e=>e.currentWorkspace),{data:y,isLoading:w}=(0,l.I)(d.Y.publicProfile({username:o||""})),{data:N,isLoading:_}=(0,l.I)({...u.yX.searchWorkspaceMemberships({workspaceId:(null==j?void 0:j.id)||"",params:{query:o||"",status:"active",limit:1}}),enabled:!!b&&!!(null==j?void 0:j.id)&&!!o,select:e=>e.members.find(e=>e.user_id===o||e.username===o)}),C=null==N?void 0:N.email;if(!o&&!v)return(0,a.jsxs)("span",{className:f,children:[g,"Unknown User"]});let k=null!=(s=null!=v?v:b&&C?C:void 0)?s:o;if(w||_)return x?(0,a.jsx)(p.E,{className:"h-4 w-20"}):h?(0,a.jsxs)(a.Fragment,{children:[g,(0,a.jsx)(n(),{href:"/@".concat(o),className:f,target:"_blank",translate:"no",children:k})]}):(0,a.jsxs)("span",{className:f,translate:"no",children:[g,k]});let P=(null==y||null==(r=y.attributes)?void 0:r.display_name)&&y.attributes.display_name!==y.id?null==y||null==(t=y.attributes)?void 0:t.display_name:k;return h?(0,a.jsxs)(a.Fragment,{children:[g,(0,a.jsx)(n(),{href:"/@".concat(o),className:f,target:"_blank",translate:"no",children:P})]}):(0,a.jsxs)("span",{className:f,translate:"no",children:[g,P]})})},176057:(e,r,t)=>{t.r(r),t.d(r,{default:()=>n});var a,l=t(325413);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(null,arguments)}let n=function(e){return l.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),a||(a=l.createElement("path",{fill:"currentColor",d:"M12 2.25a.75.75 0 0 1 .693.462l2.204 5.3 5.722.46a.75.75 0 0 1 .429 1.316l-4.36 3.735 1.332 5.584a.75.75 0 0 1-1.12.814L12 16.929 7.1 19.92a.75.75 0 0 1-1.12-.814l1.332-5.584-4.36-3.735a.75.75 0 0 1 .429-1.316l5.722-.46 2.205-5.3.05-.1A.75.75 0 0 1 12 2.25m-1.688 6.762a.75.75 0 0 1-.632.459l-4.382.351 3.338 2.86c.213.183.307.47.242.744L7.858 17.7l3.752-2.29.092-.048a.75.75 0 0 1 .689.048l3.75 2.29-1.019-4.274a.75.75 0 0 1 .242-.744l3.337-2.86-4.38-.351a.75.75 0 0 1-.632-.46L12 4.953z"})))}},201006:(e,r,t)=>{t.d(r,{n:()=>s});var a=t(183031),l=t(926206);let s=e=>(0,a.I)({queryKey:["projects",e,"accessToken"],queryFn:async()=>{let r=(0,l.Pg)(),{token:t}=await r.get("/projects/".concat(e,"/auth-token"));return t},enabled:!!e})},207808:(e,r,t)=>{t.d(r,{M:()=>c});var a=t(20097),l=t(117113),s=t(213978),n=t(373924),o=t(135345),i=t(375896);function c(e){let{redundantCollaborators:r,externalCollaborators:t,selectedIdsToKeep:l,onSelectionChange:s,folderVisibility:n}=e;if(0===r.length&&0===t.length)return null;let i=e=>{let r=new Set(l);r.has(e)?r.delete(e):r.add(e),s(r)};return(0,a.jsxs)("div",{className:"space-y-3",children:[r.length>0&&(0,a.jsx)(d,{title:"Already have workspace access",tooltip:"These collaborators already have access through their workspace membership.",collaborators:r,selectedIdsToKeep:l,onToggle:i}),t.length>0&&(0,a.jsx)(d,{title:n===o.N.Personal?"Project collaborators":"External collaborators",tooltip:n===o.N.Personal?"These collaborators will lose access when the project becomes restricted.":"These collaborators have explicit access to this project.",collaborators:t,selectedIdsToKeep:l,onToggle:i})]})}function d(e){let{title:r,tooltip:t,collaborators:o,selectedIdsToKeep:c,onToggle:d}=e;return(0,a.jsxs)("div",{className:"rounded-lg border border-border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5 border-border px-3.5 py-2.5 text-sm font-medium",children:[(0,a.jsx)("span",{children:r}),(0,a.jsxs)(n.m_,{children:[(0,a.jsx)(n.k$,{asChild:!0,children:(0,a.jsx)(s.e,{size:"small",className:"flex-shrink-0 text-muted-foreground"})}),(0,a.jsx)(n.ZI,{side:"top",className:"max-w-[240px]",children:t})]})]}),(0,a.jsx)("ul",{className:"space-y-1 px-2.5 py-2",children:o.map(e=>{let r=c.has(e.id);return(0,a.jsx)("li",{children:(0,a.jsxs)("button",{type:"button",onClick:()=>d(e.id),"aria-label":r?"Remove ".concat(e.displayName):"Keep ".concat(e.displayName),className:(0,i.cn)("flex w-full items-center gap-3 rounded-lg px-2.5 py-2 text-left transition-colors hover:bg-muted",!r&&"opacity-50"),children:[(0,a.jsx)(l.H,{user:{id:e.id,username:e.username},className:"h-8 w-8"}),(0,a.jsxs)("div",{className:"flex min-w-0 flex-col",children:[(0,a.jsx)("span",{className:(0,i.cn)("truncate text-sm font-medium",!r&&"line-through"),children:e.displayName}),e.email&&e.email!==e.displayName&&(0,a.jsx)("span",{className:(0,i.cn)("truncate text-xs text-muted-foreground",!r&&"line-through"),children:e.email})]}),(0,a.jsx)("span",{className:(0,i.cn)("ml-auto shrink-0 rounded-full px-2 py-0.5 text-xs font-medium",r?"bg-success text-success-foreground":"bg-destructive text-destructive-foreground"),children:r?"Keeping":"Removing"})]})},e.id)})})]})}},238873:(e,r,t)=>{t.d(r,{A:()=>n});var a,l=t(325413);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(null,arguments)}let n=function(e){return l.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),a||(a=l.createElement("path",{fill:"currentColor",d:"M20.25 12a8.25 8.25 0 1 0-16.5 0 8.25 8.25 0 0 0 16.5 0m-5.398-3.735a.75.75 0 0 1 .883.882l-1 5a.75.75 0 0 1-.587.588l-5 1a.75.75 0 0 1-.883-.883l1-5 .03-.107a.75.75 0 0 1 .558-.48zm-4.215 2.372-.681 3.407 3.406-.682.682-3.406zM21.75 12c0 5.385-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12 6.615 2.25 12 2.25s9.75 4.365 9.75 9.75"})))}},243244:(e,r,t)=>{t.d(r,{F:()=>u,Q:()=>d});var a=t(183031),l=t(325413),s=t(488381),n=t(317525),o=t(135345),i=t(612466);function c(e){var r;let t=e.username&&e.username!==e.user_id?e.username:void 0;return{userId:e.user_id,displayName:e.display_name||t||e.email||"Unknown",email:null!=(r=e.email)?r:void 0,role:e.role}}function d(e){return[...new Set(e.filter(e=>e.visibility===i.Lu.Draft).map(e=>e.user_id).filter(e=>!!e))]}function u(e){var r;let{folder:t,projectVisibilities:d,projectOwnerIds:u,enabled:m=!0}=e,p=(0,s.j4)(e=>e.currentWorkspace),{data:h}=(0,a.I)({...n.yX.searchWorkspaceMemberships({workspaceId:null!=(r=null==p?void 0:p.id)?r:"",params:{status:"active",limit:100}}),enabled:m&&!!(null==p?void 0:p.id)&&!!t});return(0,l.useMemo)(()=>{var e;if(!t||!(null==h?void 0:h.members)||!(null==d?void 0:d.length))return null;let r=t.visibility===o.N.Personal?i.Lu.Draft:i.Lu.Private;if(!d.some(e=>e&&e!==r))return null;let a=d.some(e=>e===i.Lu.Public),l=h.members.filter(e=>{var r;return"owner"===(r=e.role)||"admin"===r||"member"===r||"viewer"===r}),s=[],n=[];if(t.visibility===o.N.Personal){let e=l.find(e=>e.user_id===t.created_by);e&&(n=[c(e)])}else if(t.visibility===o.N.Workspace&&d.some(e=>e===i.Lu.Draft)){let e=new Set(null!=u?u:[]);s=l.filter(r=>!e.has(r.user_id)).map(c)}return{membersGainingAccess:s,membersWithAccess:n,isPublicToRestricted:a,publicProjectCount:d.filter(e=>e===i.Lu.Public).length,hasMoreMembers:null!=(e=h.has_more)&&e}},[t,h,d,u])}},249687:(e,r,t)=>{t.d(r,{B:()=>l});var a=t(559011);let l=(0,t(780493).w)(a.A,"FolderLockIcon")},289965:(e,r,t)=>{t.d(r,{$:()=>o});var a=t(20097),l=t(117113),s=t(536079),n=t(135345);function o(e){let{diff:r,folderVisibility:t,className:o,maxVisible:i=5}=e,c=t===n.N.Personal,{membersGainingAccess:d,membersWithAccess:u,isPublicToRestricted:m}=r;return d.length>0||u.length>0||m?(0,a.jsx)("div",{className:o,children:(0,a.jsxs)("div",{className:"space-y-3",children:[m&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:c?1===r.publicProjectCount?"This project is currently public. Only the folder creator will have access.":"".concat(r.publicProjectCount," projects are currently public. Only the folder creator will have access."):1===r.publicProjectCount?"This project is currently public. It will no longer be accessible to anyone outside the workspace.":"".concat(r.publicProjectCount," projects are currently public. They will no longer be accessible to anyone outside the workspace.")}),u.length>0&&(0,a.jsxs)("div",{className:"rounded-lg border border-border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5 border-border px-3.5 py-2.5 text-sm font-medium",children:[(0,a.jsx)(s.X,{size:"small",className:"flex-shrink-0"}),(0,a.jsxs)("span",{children:[1===u.length?"Only this member":"Only ".concat(u.length," members")," will have access"]})]}),(0,a.jsxs)("ul",{className:"px-3.5 py-2",children:[u.slice(0,i).map(e=>(0,a.jsxs)("li",{className:"flex items-center gap-3 py-1.5",children:[(0,a.jsx)(l.H,{user:{id:e.userId,username:e.displayName},className:"h-8 w-8"}),(0,a.jsxs)("div",{className:"flex min-w-0 flex-col",children:[(0,a.jsx)("span",{className:"truncate text-sm font-medium",children:e.displayName}),e.email&&e.email!==e.displayName&&(0,a.jsx)("span",{className:"truncate text-xs text-muted-foreground",children:e.email})]})]},e.userId)),u.length>i&&(0,a.jsxs)("li",{className:"py-1.5 pl-11 text-sm text-muted-foreground",children:["and ",u.length-i," more..."]})]})]}),d.length>0&&(0,a.jsxs)("div",{className:"rounded-lg border border-border",children:[(0,a.jsx)("div",{className:"flex items-center gap-1.5 border-border px-3.5 py-2.5 text-sm font-medium",children:(0,a.jsxs)("span",{children:[r.hasMoreMembers?"".concat(d.length,"+"):d.length," ",1!==d.length||r.hasMoreMembers?"members":"member"," will gain access"]})}),(0,a.jsxs)("ul",{className:"px-3.5 py-2",children:[d.slice(0,i).map(e=>(0,a.jsxs)("li",{className:"flex items-center gap-3 py-1.5",children:[(0,a.jsx)(l.H,{user:{id:e.userId,username:e.displayName},className:"h-8 w-8"}),(0,a.jsxs)("div",{className:"flex min-w-0 flex-col",children:[(0,a.jsx)("span",{className:"truncate text-sm font-medium",children:e.displayName}),e.email&&e.email!==e.displayName&&(0,a.jsx)("span",{className:"truncate text-xs text-muted-foreground",children:e.email})]})]},e.userId)),d.length>i&&(0,a.jsxs)("li",{className:"py-1.5 pl-11 text-sm text-muted-foreground",children:["and ",d.length-i," more..."]})]})]})]})}):null}},311856:(e,r,t)=>{t.d(r,{B:()=>b});var a=t(20097),l=t(134472),s=t(715429),n=t(400282),o=t(325413),i=t(83245),c=t(488381),d=t(313259),u=t(480695),m=t(17308),p=t(631325),h=t(951121),f=t(947764),v=t(630298),x=t(27503),g=t(904879);let b=e=>{let{project:r,isOpen:t,onClose:b,hasActiveLock:j=!1,redirectAfterDelete:y=!0}=e,[w,N]=(0,o.useState)(null),[_,C]=(0,o.useState)(!1),[k,P]=(0,o.useState)(""),A=(0,n.useRouter)(),S=(0,l.jE)(),E=(0,c.j4)(e=>{var r;return null==(r=e.currentWorkspace)?void 0:r.id}),I=(0,s.n)({mutationFn:async()=>(0,f.x)(r.id),onMutate:async()=>{await S.cancelQueries({queryKey:v.gO.all}),await S.cancelQueries({queryKey:v.workspaceKeys.projectsBase(E||"")}),await S.cancelQueries({queryKey:v.a$.starredProjectsBase()});let e=S.getQueriesData({queryKey:v.gO.all}),t=E?S.getQueriesData({queryKey:v.workspaceKeys.projectsBase(E)}):[],a=S.getQueriesData({queryKey:v.a$.starredProjectsBase()}),l=e=>e?Array.isArray(e)?e.filter(e=>e.id!==r.id):"object"==typeof e&&null!==e&&"projects"in e?{...e,projects:e.projects.filter(e=>e.id!==r.id)}:e:e;return S.setQueriesData({queryKey:v.gO.all},l),E&&S.setQueriesData({queryKey:v.workspaceKeys.projectsBase(E)},l),S.setQueriesData({queryKey:v.a$.starredProjectsBase()},l),{previousProjectsQueries:e,previousWorkspaceQueries:t,previousStarredQueries:a}},onError:(e,r,t)=>{var a;if(null==t?void 0:t.previousProjectsQueries)for(let[e,r]of t.previousProjectsQueries)S.setQueryData(e,r);if(null==t?void 0:t.previousWorkspaceQueries)for(let[e,r]of t.previousWorkspaceQueries)S.setQueryData(e,r);if(null==t?void 0:t.previousStarredQueries)for(let[e,r]of t.previousStarredQueries)S.setQueryData(e,r);let l=(null==e||null==(a=e.data)?void 0:a.detail)||"Something went wrong";(0,h.Ni)(e),N(l)},onSuccess:e=>{var t,a;if(y)e.deleting_repo?(i.toast.success("Project deleted",{description:"Your project has been deleted."}),A.push("/")):r.github_repo_name&&(null==(a=r.github_owner)?void 0:a.name)?A.push("/?deleted=true&projectName=".concat(encodeURIComponent(r.github_repo_name),"&githubOwner=").concat(encodeURIComponent(r.github_owner.name))):(i.toast.success("Project deleted",{description:"Your project has been deleted."}),A.push("/"));else if(!e.deleting_repo&&r.github_repo_name&&(null==(t=r.github_owner)?void 0:t.name)){let e=(0,x.rZ)(r.github_repo_name,r.github_owner.name);i.toast.success("Project deleted",{description:"The GitHub repository was not deleted.",action:e?{label:"Repo settings",onClick:()=>window.open("".concat(e,"/settings"),"_blank")}:void 0})}else i.toast.success("Project deleted",{description:"Your project has been deleted."});b(),S.invalidateQueries({queryKey:v.gO.all}),S.invalidateQueries({queryKey:v.workspaceKeys.detail(E||"")}),S.invalidateQueries({queryKey:v.a$.starredProjectsBase()})}}),O=async()=>{N(null),await I.mutateAsync()},R=()=>{b(),N(null),C(!1),P("")},M=r.display_name||r.name,T=k.trim()===(null==M?void 0:M.trim());if(!_){var z,D,K,L,Q;return(0,a.jsx)(u.lG,{open:t,onOpenChange:R,children:(0,a.jsxs)(u.Cf,{size:"sm",children:[(0,a.jsxs)(u.c7,{children:[(0,a.jsxs)(u.L3,{children:["Delete ",M,"?"]}),(0,a.jsxs)(u.rr,{children:["This action cannot be undone."," ",(0,a.jsx)("span",{className:"text-destructive-primary",children:"This will permanently delete your project."})," Including:",(0,a.jsxs)("ul",{className:"my-2 list-disc pl-5 text-left",children:[(0,a.jsx)("li",{children:"Any deployments made with Lovable"}),(0,a.jsx)("li",{children:"All preview links"}),(null==r||null==(z=r.github_owner)?void 0:z.name)&&r.github_owner.name===x.CS&&(0,a.jsx)("li",{children:"All generated code"})]}),(null==r||null==(D=r.github_owner)?void 0:D.name)&&r.github_owner.name!==x.CS&&(0,a.jsxs)("p",{className:"mt-2",children:["Note: The Github repository"," ",(0,a.jsxs)("a",{href:null!=(Q=(0,x.rZ)(r.github_repo_name,null==r||null==(K=r.github_owner)?void 0:K.name))?Q:"#",target:"_blank",rel:"noreferrer",className:"font-medium text-foreground hover:underline",children:[null==r||null==(L=r.github_owner)?void 0:L.name,"/",null==r?void 0:r.github_repo_name]})," ","will not be deleted."]})]})]}),(0,a.jsxs)(u.Es,{children:[(0,a.jsx)(d.$,{variant:"outline",size:"sm",onClick:R,children:"Cancel"}),(0,a.jsx)(g.Q,{showTooltip:j,tooltipContent:"Cannot delete project while there is an active operation in progress (e.g. chat or revert). Please wait for the operation to complete.",children:(0,a.jsx)(d.$,{intent:"destructive",size:"sm",onClick:()=>{C(!0)},disabled:j,children:"Continue"})})]})]})})}return(0,a.jsx)(u.lG,{open:t,onOpenChange:R,children:(0,a.jsxs)(u.Cf,{size:"sm",children:[(0,a.jsxs)(u.c7,{children:[(0,a.jsx)(u.L3,{children:"Final confirmation"}),(0,a.jsx)(u.rr,{children:r.display_name?(0,a.jsxs)("p",{className:"",children:["To confirm deletion, please type the exact project name:"," ",(0,a.jsx)("span",{className:"whitespace-pre-wrap font-medium",children:r.display_name})]}):(0,a.jsxs)("p",{className:"",children:["To confirm deletion, please type the exact project slug:"," ",(0,a.jsx)("span",{className:"whitespace-pre-wrap font-medium",children:r.name})]})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)(p.p,{placeholder:"Enter project ".concat(r.display_name?"display name":"slug"),value:k,onChange:e=>P(e.target.value),autoFocus:!0}),(0,a.jsxs)("div",{className:"flex items-center gap-1 px-1 text-sm text-destructive-primary",children:[(0,a.jsx)(m.Y,{className:"text-destructive-primary",size:"small"}),"This action is irreversible."]})]}),(0,a.jsxs)(u.Es,{children:[(0,a.jsx)(d.$,{variant:"outline",size:"sm",onClick:()=>{C(!1),P(""),N(null)},children:"Back"}),(0,a.jsx)(g.Q,{showTooltip:j,tooltipContent:"Cannot delete project while there is an active operation in progress (e.g. chat or revert). Please wait for the operation to complete.",children:(0,a.jsx)(d.$,{intent:"destructive",size:"sm",onClick:O,loading:I.isPending,disabled:!T||I.isPending||j,children:I.isPending?"Deleting...":"Delete project"})})]}),w&&(0,a.jsx)("p",{className:"mt-2 text-sm text-destructive-primary",children:w})]})})}},319725:(e,r,t)=>{t.r(r),t.d(r,{default:()=>n});var a,l=t(325413);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(null,arguments)}let n=function(e){return l.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),a||(a=l.createElement("path",{fill:"currentColor",d:"M6.75 12a1.75 1.75 0 1 1-3.5 0 1.75 1.75 0 0 1 3.5 0m7 0a1.75 1.75 0 1 1-3.5 0 1.75 1.75 0 0 1 3.5 0m7 0a1.75 1.75 0 1 1-3.5 0 1.75 1.75 0 0 1 3.5 0"})))}},358855:(e,r,t)=>{t.d(r,{B:()=>s,M:()=>l});var a=t(400282);let l=()=>{let e=(0,a.useParams)().project_id;return e&&"string"==typeof e?e:null},s=()=>{let e=l();if(!e)throw Error("Project ID is required and should always be set here");return e}},377568:(e,r,t)=>{t.d(r,{Q:()=>l});var a=t(238873);let l=(0,t(780493).w)(a.A,"CompassIcon")},390613:(e,r,t)=>{t.d(r,{D:()=>l});var a=t(42532);let l=(0,t(780493).w)(a.A,"CogIcon")},397470:(e,r,t)=>{t.d(r,{gy:()=>a});let a=e=>{var r;return null!=(r=e.og_image_url)?r:(e=>null==e?void 0:e.replace("https://pub-bb2e103a32db4e198524a2e9ed8f35b4.r2.dev","https://screenshot2.lovable.dev"))(e.latest_screenshot_url)}},442049:(e,r,t)=>{t.d(r,{r:()=>l});var a=t(717375);let l=(0,t(780493).w)(a.A,"ChartBarIcon")},447739:(e,r,t)=>{t.d(r,{W:()=>l});var a=t(603899);let l=(0,t(162289).c)(a.default,"LovableMonotoneLogo")},466683:(e,r,t)=>{function a(e){return void 0!==e.is_internal?!1===e.is_internal:!1===e.is_workspace_member}function l(e){return e.some(a)}function s(e){return"has_external_collaborators"in e&&!0===e.has_external_collaborators}t.d(r,{RA:()=>l,an:()=>a,y9:()=>s})},559011:(e,r,t)=>{t.d(r,{A:()=>o});var a,l,s=t(325413);function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(null,arguments)}let o=function(e){return s.createElement("svg",n({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),a||(a=s.createElement("path",{fill:"currentColor",d:"M2.25 17V7A3.75 3.75 0 0 1 6 3.25h1.758a3.75 3.75 0 0 1 2.651 1.099l.242.242c.422.422.995.659 1.591.659H18A3.75 3.75 0 0 1 21.75 9a.75.75 0 0 1-1.5 0A2.247 2.247 0 0 0 18 6.75h-5.758a3.75 3.75 0 0 1-2.651-1.099l-.242-.242a2.25 2.25 0 0 0-1.591-.659H6A2.25 2.25 0 0 0 3.75 7v2.999A3.73 3.73 0 0 1 6 9.25h7a.75.75 0 0 1 0 1.5H6A2.25 2.25 0 0 0 3.75 13v4A2.25 2.25 0 0 0 6 19.25h4a.75.75 0 0 1 0 1.5H6A3.75 3.75 0 0 1 2.25 17"})),l||(l=s.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M21 15.25h-.25V14a2.75 2.75 0 1 0-5.5 0v1.25H15A1.75 1.75 0 0 0 13.25 17v4c0 .966.784 1.75 1.75 1.75h6A1.75 1.75 0 0 0 22.75 21v-4A1.75 1.75 0 0 0 21 15.25m.25 1.75a.25.25 0 0 0-.25-.25h-6a.25.25 0 0 0-.25.25v4c0 .138.112.25.25.25h6a.25.25 0 0 0 .25-.25zM18 12.75c.69 0 1.25.56 1.25 1.25v1.25h-2.5V14c0-.69.56-1.25 1.25-1.25",clipRule:"evenodd"})))}},603899:(e,r,t)=>{t.r(r),t.d(r,{default:()=>n});var a,l=t(325413);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(null,arguments)}let n=function(e){return l.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 12 13"},e),a||(a=l.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M3.6.39C5.59.39 7.202 2.006 7.202 4v1.372H8.4c1.989 0 3.601 1.616 3.601 3.61a3.605 3.605 0 0 1-3.6 3.61H0V4A3.605 3.605 0 0 1 3.6.39",clipRule:"evenodd"})))}},610626:(e,r,t)=>{t.d(r,{G:()=>l});var a=t(176057);let l=(0,t(780493).w)(a.default,"StarIcon")},616962:(e,r,t)=>{t.d(r,{J:()=>x});var a=t(20097),l=t(427321),s=t(234281),n=t.n(s),o=t(325413),i=t(313259),c=t(447739),d=t(397470),u=t(375896),m=t(76886),p=t(610626),h=t(275798);let f=(0,o.memo)(e=>{let{isStarred:r,onToggle:t}=e,[l,s]=(0,o.useState)(!1),[n,i]=(0,o.useState)(r);return(0,o.useEffect)(()=>{i(r)},[r]),(0,a.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),i(!n),s(!0),setTimeout(()=>s(!1),300),t()},className:(0,u.cn)("absolute right-2 top-2 z-[5] flex h-8 w-8 items-center justify-center rounded-md bg-muted/80 backdrop-blur-sm transition-all duration-200 md:hover:bg-muted-active",!n&&"can-hover:opacity-0 can-hover:group-hover:opacity-100",l&&"scale-110"),"aria-label":n?"Remove from favorites":"Add to favorites",children:(0,a.jsx)(h.$,{icon:n?m.W:p.G,size:"default",className:(0,u.cn)("transition-all duration-200",n?"text-yellow-500 opacity-100 drop-shadow-sm":"text-foreground/80 can-hover:opacity-0 can-hover:group-hover:text-foreground/80 can-hover:group-hover:opacity-100",l&&"scale-125")})})});f.displayName="StarButton";let v=e=>{let{text:r}=e;return(0,a.jsx)("div",{className:"absolute inset-0 hidden cursor-pointer items-center justify-center bg-black/30 transition-all duration-300 ease-out can-hover:opacity-0 can-hover:group-hover:opacity-100 md:flex",children:(0,a.jsx)(i.$,{intent:"secondary",className:"pointer-events-none",children:r})})},x=(0,o.memo)(e=>{let{project:r,href:t,onClick:s,imagePreviewButtonText:o,showStars:i=!1,onToggleStar:m,className:p,imageClassName:h}=e,x=(0,d.gy)(r),g=t?n():"div";return(0,a.jsx)(g,{href:t,className:(0,u.cn)("group relative aspect-video w-full overflow-hidden rounded-xl bg-muted",p),scroll:!1,onClick:s,children:(0,a.jsxs)("div",{className:"relative h-full w-full",children:[x?(0,a.jsx)(l.default,{src:x,alt:"Preview of ".concat(r.display_name||r.name||"project"),className:(0,u.cn)("rounded-xl border border-muted-border",h),fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",style:{objectFit:"cover",objectPosition:"top"},draggable:"false"}):(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center rounded-xl border border-muted-border bg-background",children:(0,a.jsx)(c.W,{className:"size-8 text-muted-active opacity-50"})}),o&&(0,a.jsx)(v,{text:o}),i&&m&&(0,a.jsx)(f,{isStarred:r.is_starred||!1,onToggle:()=>m(r.id)})]})})});x.displayName="ProjectImage"},645640:(e,r,t)=>{t.d(r,{G:()=>f});var a=t(325413),l=t(134472),s=t(715429),n=t(83245),o=t(926206);async function i(e,r){let t=(0,o.Pg)();if(r.length<=50)return t.post("/projects/".concat(e,"/collaborators/batch-delete"),{collaborator_ids:r});let a=0,l=0,s=[];for(let n=0;n<r.length;n+=50){let o=r.slice(n,n+50),i=await t.post("/projects/".concat(e,"/collaborators/batch-delete"),{collaborator_ids:o});a+=i.deleted,l+=i.failed,i.errors&&s.push(...i.errors)}return{deleted:a,failed:l,...s.length>0?{errors:s}:{}}}var c=t(630298),d=t(183031),u=t(207717),m=t(135345);function p(e){return!!e.id&&"owner"!==e.access_level&&!!e.joined_at}function h(e){return{id:e.id,displayName:e.display_name||e.username||e.email||"Unknown",email:e.email,username:e.username,avatar:e.avatar}}function f(e){let{projectId:r,projectOwnerId:t,folder:o,enabled:f=!0}=e,[v,x]=(0,a.useState)(new Set),g=(0,a.useRef)(!1),{redundantCollaborators:b,externalCollaborators:j,isLoading:y}=function(e){let{projectId:r,projectOwnerId:t,folder:l,enabled:s=!0}=e,{data:n,isLoading:o}=(0,d.I)({...u.c.collaborators({projectId:r,canViewCollaborators:s&&!!l,projectOwnerId:t}),enabled:s&&!!l&&!!r}),{redundantCollaborators:i,externalCollaborators:c}=(0,a.useMemo)(()=>{if(!n||!l)return{redundantCollaborators:[],externalCollaborators:[]};let e=n.filter(p);return l.visibility===m.N.Workspace?{redundantCollaborators:e.filter(e=>e.is_workspace_member).map(h),externalCollaborators:e.filter(e=>!e.is_workspace_member).map(h)}:l.visibility===m.N.Personal?{redundantCollaborators:[],externalCollaborators:e.map(h)}:{redundantCollaborators:[],externalCollaborators:[]}},[n,l]);return{redundantCollaborators:i,externalCollaborators:c,isLoading:o}}({projectId:r,projectOwnerId:t,folder:o,enabled:f}),w=function(){let e=(0,l.jE)();return(0,s.n)({mutationFn:e=>{let{projectId:r,collaboratorIds:t}=e;return i(r,t)},onSuccess:(r,t)=>{let{projectId:a}=t;e.invalidateQueries({queryKey:c.gO.collaborators(a)}),r.deleted>0&&n.toast.success("Removed ".concat(r.deleted," collaborator").concat(1!==r.deleted?"s":""))}})}();(0,a.useEffect)(()=>{!g.current&&(b.length>0||j.length>0)&&(g.current=!0,x(new Set(j.map(e=>e.id))))},[b,j]);let N=async e=>{let r=[...b,...j].map(e=>e.id).filter(e=>!v.has(e));r.length>0&&await w.mutateAsync({projectId:e,collaboratorIds:r})};return{redundantCollaborators:b,externalCollaborators:j,collaboratorIdsToKeep:v,setCollaboratorIdsToKeep:x,isLoading:y,isBatchRemoving:w.isPending,removeUnkeptCollaborators:N,resetSelection:()=>{x(new Set),g.current=!1}}}},678661:(e,r,t)=>{t.d(r,{r:()=>n});var a=t(20097),l=t(904879),s=t(375896);function n(e){let{className:r,tooltipContent:t="External collaborators have access to this project",showTooltip:n=!0}=e;return(0,a.jsx)(l.Q,{showTooltip:n,tooltipContent:t,side:"top",align:"start",children:(0,a.jsx)("span",{className:(0,s.cn)("shrink-0 rounded-full border border-border bg-muted px-1.5 py-0.5 text-[10px] font-medium tracking-wide text-muted-foreground",r),"aria-label":"External collaborators",children:"EXT"})})}},690057:(e,r,t)=>{t.d(r,{f:()=>l});var a=t(39809);let l=(0,t(780493).w)(a.default,"ArrowRightIcon")},697260:(e,r,t)=>{t.d(r,{y:()=>i});var a=t(20097),l=t(325413),s=t(758742),n=t(665898);let o=[{name:"sapphire-foreground",value:"hsl(var(--brand-sapphire-foreground))"},{name:"twilight-foreground",value:"hsl(var(--brand-twilight-foreground))"},{name:"bubblegum-foreground",value:"hsl(var(--brand-bubblegum-foreground))"},{name:"tiger-foreground",value:"hsl(var(--brand-tiger-foreground))"},{name:"saffron-foreground",value:"hsl(var(--brand-saffron-foreground))"},{name:"muted-foreground",value:"hsl(var(--muted-foreground))"}];function i(e){let{color:r,onChange:t,className:i=""}=e,[c,d]=(0,l.useState)(!1),u=e=>{t(e),d(!1)};return(0,a.jsxs)(n.AM,{open:c,onOpenChange:d,children:[(0,a.jsx)(n.Wv,{asChild:!0,children:(0,a.jsx)("button",{type:"button",className:"absolute left-4 top-1/2 z-10 -translate-y-1/2 ".concat(i),tabIndex:-1,children:(0,a.jsx)(s.s,{className:r?"":"text-muted-foreground",style:r?{color:r}:void 0})})}),(0,a.jsx)(n.hl,{className:"w-auto p-3",align:"center",side:"bottom",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[o.slice(0,-1).map(e=>(0,a.jsx)("button",{type:"button",className:"rounded p-1.5 transition-all hover:bg-muted ".concat(r===e.value?"ring-2 ring-primary ring-offset-1":""),onClick:()=>u(e.value),title:e.name,children:(0,a.jsx)(s.s,{style:{color:e.value}})},e.name)),(0,a.jsx)("button",{type:"button",className:"rounded p-1.5 transition-all hover:bg-muted ".concat(null===r||r===o[o.length-1].value?"ring-2 ring-primary ring-offset-1":""),onClick:()=>u(o[o.length-1].value),title:"Default",children:(0,a.jsx)(s.s,{className:"text-muted-foreground"})})]})})]})}},717375:(e,r,t)=>{t.d(r,{A:()=>o});var a,l,s=t(325413);function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(null,arguments)}let o=function(e){return s.createElement("svg",n({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),a||(a=s.createElement("path",{fill:"currentColor",d:"M3.25 18V4a.75.75 0 0 1 1.5 0v14c0 .69.56 1.25 1.25 1.25h14a.75.75 0 0 1 0 1.5H6A2.75 2.75 0 0 1 3.25 18"})),l||(l=s.createElement("path",{fill:"currentColor",d:"M7.25 16v-5a.75.75 0 0 1 1.5 0v5a.75.75 0 0 1-1.5 0m5 0V5a.75.75 0 0 1 1.5 0v11a.75.75 0 0 1-1.5 0m5 0v-3a.75.75 0 0 1 1.5 0v3a.75.75 0 0 1-1.5 0"})))}},792317:(e,r,t)=>{t.d(r,{f:()=>l});var a=t(897601);let l=(0,t(780493).w)(a.A,"PenTopRightSquareIcon")},816402:(e,r,t)=>{t.d(r,{u:()=>d});var a=t(134472),l=t(715429),s=t(926206),n=t(630298);let o=e=>{let r=n.a$.starredProjectsBase();return e.queryKey[0]===r[0]},i=e=>!!(o(e)||"projects"===e.queryKey[0]&&"shared"===e.queryKey[1]||e.queryKey.includes("recently-viewed-projects")||"workspaces"===e.queryKey[0]&&e.queryKey.includes("projects")||"workspaces"===e.queryKey[0]&&e.queryKey.includes("search-projects")||"folders"===e.queryKey[0]&&"projects"===e.queryKey[1]||e.queryKey.includes("is-star-dependent")),c=async e=>{let{projectId:r,shouldStar:t}=e,a=await (0,s.Pg)().getApi();t?await a.put("/projects/".concat(r,"/star")):await a.delete("/projects/".concat(r,"/star"))},d=()=>{let e=(0,a.jE)(),r=(0,l.n)({mutationFn:c,onMutate:async r=>{let{projectId:t,shouldStar:a,project:l}=r;await e.cancelQueries({predicate:i});let s=e.getQueriesData({predicate:i});return e.setQueriesData({predicate:o},e=>{if(!e||!("projects"in e))return e;if(!a)return{...e,projects:e.projects.filter(e=>e.id!==t)};{if(e.projects.some(e=>e.id===t))return{...e,projects:e.projects.map(e=>e.id===t?{...e,is_starred:!0}:e)};let r=(()=>{if(l)return l;for(let[,e]of s){if(!e||"object"!=typeof e)continue;let r=null;if(Array.isArray(e))r=e;else if("pages"in e&&Array.isArray(e.pages)){for(let r of e.pages){let e=r.projects.find(e=>e.id===t);if(e)return e}continue}else"projects"in e&&Array.isArray(e.projects)&&(r=e.projects);if(!r)continue;let a=r.find(e=>e.id===t);if(a)return a}})();return r?{...e,projects:[{...r,is_starred:!0},...e.projects]}:e}}),e.setQueriesData({predicate:e=>i(e)&&!o(e)},e=>{if(!e)return e;let r=e=>e.id===t?{...e,is_starred:a}:e;return Array.isArray(e)?e.map(r):"pages"in e&&Array.isArray(e.pages)?{...e,pages:e.pages.map(e=>({...e,projects:e.projects.map(r)}))}:"projects"in e&&Array.isArray(e.projects)?{...e,projects:e.projects.map(r)}:e}),{previousData:s}},onError:(r,t,a)=>{(null==a?void 0:a.previousData)&&a.previousData.forEach(r=>{let[t,a]=r;e.setQueryData(t,a)})},onSuccess:()=>{e.invalidateQueries({predicate:i})}});return{toggleStar:(e,t,a)=>{r.mutate({projectId:e,shouldStar:!t,project:a})},toggleStarAsync:(e,t,a)=>r.mutateAsync({projectId:e,shouldStar:!t,project:a}),error:r.error,isPending:r.isPending}}},897601:(e,r,t)=>{t.d(r,{A:()=>n});var a,l=t(325413);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(null,arguments)}let n=function(e){return l.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),a||(a=l.createElement("path",{fill:"currentColor",d:"M3.25 17V7A3.75 3.75 0 0 1 7 3.25h4a.75.75 0 0 1 0 1.5H7A2.25 2.25 0 0 0 4.75 7v10A2.25 2.25 0 0 0 7 19.25h10A2.25 2.25 0 0 0 19.25 17v-4a.75.75 0 0 1 1.5 0v4A3.75 3.75 0 0 1 17 20.75H7A3.75 3.75 0 0 1 3.25 17M14.97 4.97a2.871 2.871 0 1 1 4.06 4.06l-6.207 6.207a1.75 1.75 0 0 1-1.237.513H10A1.75 1.75 0 0 1 8.25 14v-1.586c0-.464.185-.91.513-1.237zm3 1.06a1.37 1.37 0 0 0-1.94 0l-.97.97L17 8.94l.97-.97a1.37 1.37 0 0 0 0-1.94M9.75 14c0 .138.112.25.25.25h1.586a.25.25 0 0 0 .177-.073L15.94 10 14 8.06l-4.177 4.177a.25.25 0 0 0-.073.177z"})))}},926387:(e,r,t)=>{t.d(r,{r:()=>l});var a=t(319725);let l=(0,t(780493).w)(a.default,"EllipsisHorizontalIcon")},947764:(e,r,t)=>{t.d(r,{D:()=>s,x:()=>l});var a=t(926206);async function l(e){return(0,a.Pg)().delete("/projects/".concat(e))}async function s(e,r){let t=(0,a.Pg)();await t.put("/projects/".concat(e,"/move-to-workspace"),{workspace_id:r})}},978642:(e,r,t)=>{t.d(r,{S:()=>s,p:()=>a});let a=50,l=/^[^/\\:*?"<>|]+$/;function s(e){let r=e.trim();return r.length<1?{isValid:!1,error:"Folder name cannot be empty"}:r.length>a?{isValid:!1,error:"Folder name cannot exceed ".concat(a," characters")}:l.test(r)?{isValid:!0}:{isValid:!1,error:'Folder name contains invalid characters. Please avoid using / \\ : * ? " < > |'}}},982965:(e,r,t)=>{t.d(r,{i:()=>s});var a=t(325413),l=t(951121);let s=function(){let{copiedText:e="Copied!",resetDelay:r=2e3}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,s]=(0,a.useState)(!1),[n,o]=(0,a.useState)();return{copy:(0,a.useCallback)(async(t,a)=>{if(t)try{await navigator.clipboard.writeText(t),s(!0),a?(o(a),o(e),setTimeout(()=>{o(a),s(!1)},r)):setTimeout(()=>{s(!1)},r)}catch(e){if(e instanceof DOMException&&("NotAllowedError"===e.name||"SecurityError"===e.name))return;(0,l.Ni)(e)}},[e,r]),isCopied:t,buttonText:n}}},990996:(e,r,t)=>{t.d(r,{N:()=>I});var a=t(20097),l=t(183031),s=t(325413),n=t(83245),o=t(488381),i=t(506286),c=t(289965),d=t(207808),u=t(19733),m=t(697260),p=t(372311),h=t(313259),f=t(480695),v=t(758742),x=t(249687),g=t(558926),b=t(631325),j=t(654142),y=t(168954),w=t(645640),N=t(243244),_=t(378684),C=t(317525),k=t(135345),P=t(612466),A=t(375896),S=t(978642),E=t(640715);function I(e){var r,t;let{project:I,open:O,onOpenChange:R,currentFolderId:M}=e,T=(0,o.j4)(e=>e.currentWorkspace),{folders:z,isLoading:D}=(0,_.ow)(null==T?void 0:T.id),K=(0,_._U)(null==T?void 0:T.id),L=(0,_.eJ)(null==T?void 0:T.id),Q=(0,_.Si)(null==T?void 0:T.id),{permitted:q}=(0,i.J)(E.eZ.AddProjectsToFolders),{permitted:B}=(0,i.J)(E.eZ.RemoveProjectsFromFolders),{permitted:F}=(0,i.J)(E.eZ.CreateFolders),{data:V}=(0,l.I)({...C.yX.projects({workspaceId:null==T?void 0:T.id}),select:e=>{var r,t;let a=null==e||null==(r=e.projects)?void 0:r.find(e=>e.id===(null==I?void 0:I.id));return null!=(t=null==a?void 0:a.folder_id)?t:null},enabled:!!(null==T?void 0:T.id)&&!!(null==I?void 0:I.id)}),W=void 0!==M?M:null!=(r=null!=V?V:null==I?void 0:I.folder_id)?r:null,H=(0,s.useMemo)(()=>W?[...z].sort((e,r)=>e.id===W?-1:+(r.id===W)):z,[z,W]),[U,$]=(0,s.useState)(null),[G,J]=(0,s.useState)({toAdd:null,toRemove:null}),[X,Y]=(0,s.useState)(!1),[Z,ee]=(0,s.useState)(""),[er,et]=(0,s.useState)(void 0),[ea,el]=(0,s.useState)(null);s.useEffect(()=>{O&&($(W),J({toAdd:null,toRemove:null}),Y(!1),ee(""),et(void 0),el(null),ev.resetSelection())},[O,W]);let es=()=>{Y(!1),ee(""),et(void 0),el(null)},en=async()=>{let e=(0,S.S)(Z);if(!e.isValid)return void el(e.error||"Invalid folder name");try{let e=await Q.mutateAsync({name:Z.trim(),color:er});$(e.id),J({toAdd:e.id,toRemove:W}),ev.resetSelection(),es()}catch(e){}},eo=e=>{$(e),ev.resetSelection(),e===W?J({toAdd:null,toRemove:null}):null===e?J({toAdd:null,toRemove:W}):J({toAdd:e,toRemove:W})},ei=async()=>{let{toAdd:e,toRemove:r}=G,t=r&&B,a=e&&q;if(t||a)try{if(t&&await L.mutateAsync({folderId:r,projectIds:[I.id],movingToFolderId:null!=e?e:void 0}),a){var l;let r=await K.mutateAsync({folderId:e,projectIds:[I.id]});if((null==r||null==(l=r.skipped_projects)?void 0:l.length)>0)return void n.toast.error("Could not move project to folder",{description:r.skipped_projects[0].reason})}try{await ev.removeUnkeptCollaborators(I.id)}catch(e){}n.toast.success(e?"Project moved to folder":"Project removed from folder"),R(!1)}catch(e){}},ec=null!==G.toAdd||null!==G.toRemove,ed=(0,s.useMemo)(()=>{var e;return G.toAdd&&null!=(e=z.find(e=>e.id===G.toAdd))?e:null},[G.toAdd,z]),eu=(0,s.useMemo)(()=>W?z.find(e=>e.id===W):void 0,[W,z]),em=(0,s.useMemo)(()=>{if(!(null==ed?void 0:ed.visibility))return!1;if(eu)return eu.visibility!==ed.visibility;let e=ed.visibility===k.N.Personal?P.Lu.Draft:P.Lu.Private;return!!I.visibility&&I.visibility!==e},[ed,eu,I.visibility]),ep=(0,s.useMemo)(()=>{var e;return[null!=(e=I.visibility)?e:void 0]},[I.visibility]),eh=(0,s.useMemo)(()=>I.visibility===P.Lu.Draft&&I.user_id?[I.user_id]:[],[I.visibility,I.user_id]),ef=(0,N.F)({folder:null!=ed?ed:void 0,projectVisibilities:ep,projectOwnerIds:eh,enabled:em}),ev=(0,w.G)({projectId:I.id,projectOwnerId:null!=(t=I.user_id)?t:"",folder:null!=ed?ed:void 0,enabled:em}),{redundantCollaborators:ex,externalCollaborators:eg}=ev,eb=K.isPending||L.isPending||ev.isBatchRemoving;return(0,a.jsx)(f.lG,{open:O,onOpenChange:R,children:(0,a.jsxs)(f.Cf,{className:"sm:max-w-[425px]",children:[(0,a.jsxs)(f.c7,{children:[(0,a.jsx)(f.L3,{children:"Move to folder"}),(0,a.jsxs)(f.rr,{children:['Select a folder to move "',(0,a.jsx)("span",{translate:"no",children:I.display_name||I.name}),'" to. A project can only be in one folder at a time.']})]}),(0,a.jsx)("div",{className:"py-4",children:D?(0,a.jsx)("div",{className:"space-y-2",children:[void 0,void 0,void 0].map((e,r)=>(0,a.jsx)(y.E,{className:"h-10 w-full"},r))}):(0,a.jsxs)("div",{className:"max-h-[300px] space-y-2 overflow-y-auto",children:[F&&(0,a.jsx)(a.Fragment,{children:X?(0,a.jsxs)("div",{className:"space-y-2 rounded-lg border p-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(m.y,{color:er,onChange:et}),(0,a.jsx)(b.p,{value:Z,onChange:e=>{let r=e.target.value;ee(r);let t=(0,S.S)(r);el(t.isValid?null:t.error||null)},placeholder:"Folder name",maxLength:S.p,autoFocus:!0,className:(0,A.cn)("h-9 pl-10",ea&&"border-red-500"),onKeyDown:e=>{"Enter"===e.key&&Z.trim()&&!ea&&(e.preventDefault(),en()),"Escape"===e.key&&es()}})]}),ea&&(0,a.jsx)("p",{className:"text-xs text-red-500",children:ea}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(h.$,{type:"button",variant:"ghost",size:"sm",className:"flex-1 hover:bg-muted-active",onClick:es,children:"Cancel"}),(0,a.jsx)(h.$,{type:"button",size:"sm",className:"flex-1",disabled:!Z.trim()||!!ea||Q.isPending,onClick:en,children:Q.isPending?"Creating...":"Create"})]})]}):(0,a.jsxs)("button",{type:"button",onClick:()=>Y(!0),className:"flex w-full items-center gap-3 rounded-lg border border-dashed p-3 text-left transition-colors hover:bg-muted-active",children:[(0,a.jsx)(g.c,{size:"small",className:"text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Create new folder"})]})}),(0,a.jsxs)(j.z,{value:null!=U?U:"none",onValueChange:e=>{"none"===e?eo(null):eo(e)},className:"space-y-2",children:[(W&&B||!W)&&(0,a.jsxs)("label",{className:"grid cursor-pointer grid-cols-[20px_1fr] items-center gap-3 rounded-lg border p-3 transition-[background-color,border-color] duration-150 hover:bg-muted-active",children:[(0,a.jsx)(j.C,{value:"none",disabled:!W&&null===U}),(0,a.jsx)("div",{className:"overflow-hidden",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"No folder"}),!W&&null===U&&(0,a.jsx)(p.E,{variant:"secondary",className:"flex-shrink-0 text-xs",children:"Current"})]})})]}),H.map(e=>{let r=U===e.id,t=W===e.id;return(0,a.jsxs)("label",{className:(0,A.cn)("grid cursor-pointer grid-cols-[20px_1fr] items-center gap-3 rounded-lg border transition-[background-color,border-color] duration-150 hover:bg-muted-active",e.color&&r?"p-[calc(0.75rem-1px)]":"p-3"),style:{borderColor:e.color&&r?e.color:void 0,borderWidth:e.color&&r?"2px":"1px"},children:[(0,a.jsx)(j.C,{value:e.id}),(0,a.jsx)("div",{className:"overflow-hidden",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.visibility===k.N.Personal?(0,a.jsx)(x.B,{size:"small",className:e.color?"flex-shrink-0":"text-muted-foreground",style:e.color?{color:e.color}:void 0}):(0,a.jsx)(v.s,{size:"small",className:e.color?"flex-shrink-0":"text-muted-foreground",style:e.color?{color:e.color}:void 0}),(0,a.jsx)("span",{className:"truncate text-sm font-medium",translate:"no",children:e.name}),t&&r&&(0,a.jsx)(p.E,{variant:"secondary",className:"flex-shrink-0 text-xs",children:"Current"})]})})]},e.id)})]}),0===H.length&&!F&&(0,a.jsxs)("div",{className:"py-8 text-center",children:[(0,a.jsx)(v.s,{className:"mx-auto mb-3 h-12 w-12 text-muted-foreground"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No folders available"})]})]})}),ed&&em&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(u.J,{folderVisibility:ed.visibility,projectVisibilities:ep}),ef&&(0,a.jsx)(c.$,{diff:ef,folderVisibility:ed.visibility}),(ex.length>0||eg.length>0)&&(0,a.jsx)(d.M,{redundantCollaborators:ex,externalCollaborators:eg,selectedIdsToKeep:ev.collaboratorIdsToKeep,onSelectionChange:ev.setCollaboratorIdsToKeep,folderVisibility:ed.visibility})]}),(0,a.jsxs)(f.Es,{children:[(0,a.jsx)(h.$,{variant:"outline",onClick:()=>R(!1),disabled:eb,children:"Cancel"}),(0,a.jsx)(h.$,{onClick:ei,disabled:!ec||eb||em&&ev.isLoading,loading:eb,loadingText:"Saving...",children:em?"Confirm":"Save changes"})]})]})})}}}]);