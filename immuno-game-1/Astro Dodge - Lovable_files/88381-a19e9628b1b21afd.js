try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},r=(new e.Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="82d1285a-b861-41fd-b3b4-88bbc3e782d7",e._sentryDebugIdIdentifier="sentry-dbid-82d1285a-b861-41fd-b3b4-88bbc3e782d7")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[88381],{646:(e,r,t)=>{t.d(r,{M:()=>n});var a=t(625298);let n=(0,t(780493).w)(a.A,"ChevronUpIcon")},9551:(e,r,t)=>{t.d(r,{b:()=>i});var a=t(20097),n=t(313259),l=t(480695),s=t(255483);let i=e=>{let{title:r,subtitle:t,onClose:i}=e;return(0,a.jsxs)(l.Cf,{className:"max-h-[90vh] max-w-[425px] overflow-y-auto",children:[(0,a.jsxs)(l.c7,{className:"space-y-4",children:[(0,a.jsx)(s.LovableLogoColor,{className:"size-9 shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l.L3,{className:"mb-2 text-3xl font-medium",children:r}),(0,a.jsx)("p",{className:"text-sm text-foreground",children:t})]})]}),(0,a.jsx)("div",{className:"flex gap-3 border-t pt-4",children:(0,a.jsx)(n.$,{intent:"secondary",className:"flex-1",onClick:i,children:"Dismiss"})})]})}},31995:(e,r,t)=>{t.d(r,{K:()=>l,m:()=>s});var a=t(602571),n=t(998383);let l=(0,a.vt)()((0,n.Zr)(e=>({overrides:{},isDebugDialogOpen:!1,setOverride:(r,t)=>e(e=>({overrides:{...e.overrides,[r]:t}})),removeOverride:r=>e(e=>{let{[r]:t,...a}=e.overrides;return{overrides:a}}),clearOverrides:()=>e({overrides:{}}),openDebugDialog:()=>e({isDebugDialogOpen:!0}),closeDebugDialog:()=>e({isDebugDialogOpen:!1})}),{name:"flag-overrides",partialize:e=>({overrides:e.overrides})}));function s(){let{isDebugDialogOpen:e,openDebugDialog:r,closeDebugDialog:t}=l.getState();e?t():r()}},50150:(e,r,t)=>{t.d(r,{A:()=>s});var a,n=t(325413);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(null,arguments)}let s=function(e){return n.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),a||(a=n.createElement("path",{fill:"currentColor",d:"M13.272 3.818a.75.75 0 0 1 1.455.364l-4 16a.75.75 0 0 1-1.455-.364zM6.47 7.47a.75.75 0 1 1 1.06 1.06L4.06 12l3.47 3.47a.75.75 0 1 1-1.06 1.06l-4-4a.75.75 0 0 1 0-1.06zm10 0a.75.75 0 0 1 1.06 0l4 4a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 1 1-1.06-1.06L19.94 12l-3.47-3.47a.75.75 0 0 1 0-1.06"})))}},52984:(e,r,t)=>{t.d(r,{Ft:()=>c,K4:()=>o,_A:()=>i,yj:()=>d});var a=t(325413),n=t(262639),l=t(317525),s=t(640715);function i(e){let{workspaceId:r,pageSize:t=20}=e,[i,o]=(0,a.useState)({query:"",status:"active",offset:0}),d={...i,limit:t},{data:c,isLoading:u,error:p}=(0,n.I4)({...l.yX.searchWorkspaceMemberships({workspaceId:r,params:d}),permission:s.eZ.ViewWorkspaceMembers}),m=(0,a.useCallback)(e=>{o(r=>{let t={...r,...e};return void 0===e.offset&&(void 0!==e.query||void 0!==e.status||void 0!==e.roles||void 0!==e.sortBy||void 0!==e.sortOrder)&&(t.offset=0),t})},[]);return{members:(null==c?void 0:c.members)||[],total:(null==c?void 0:c.total)||0,isLoading:u,error:p,search:m,searchParams:d}}function o(e){let{workspaceId:r}=e,{data:t,isLoading:a,error:i}=(0,n.I4)({...l.yX.searchWorkspaceMemberships({workspaceId:r,params:{query:"",status:"active",roles:["owner"],limit:1}}),permission:s.eZ.ViewWorkspaceMembers});return{owner:(null==t?void 0:t.members[0])||null,isLoading:a,error:i}}function d(e){let{workspaceId:r,status:t="active",enabled:a=!0}=e,{data:i}=(0,n.I4)({...l.yX.searchWorkspaceMemberships({workspaceId:r,params:{query:"",status:t,limit:1}}),permission:s.eZ.ViewWorkspaceMembers,enabled:a&&!!r});return{memberCount:(null==i?void 0:i.total)||0}}function c(e){let{workspaceId:r}=e,{data:t,isLoading:a}=(0,n.I4)({...l.yX.builderCount({workspaceId:r}),permission:s.eZ.ViewWorkspaceMembers,enabled:!!r});return{builderCount:t||0,isLoading:a}}},100220:(e,r,t)=>{t.d(r,{E:()=>u});var a=t(20097),n=t(270792),l=t(118486),s=t(325413),i=t(313259),o=t(745784),d=t(255483),c=t(375896);let u=e=>{let{title:r,description:t,children:u,open:p,onOpenChange:m,className:g,centered:h,preventAutoFocus:f}=e;return(0,s.useEffect)(()=>(p?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[p]),(0,a.jsx)(n.lG,{open:p,onOpenChange:m,children:(0,a.jsx)(n.ZJ,{children:(0,a.jsxs)(n.Cf,{className:"fixed inset-0 z-[10000] flex items-center justify-center overflow-y-auto bg-background",onOpenAutoFocus:f?e=>e.preventDefault():void 0,onCloseAutoFocus:e=>{e.preventDefault(),document.body.style.pointerEvents=""},children:[(0,a.jsxs)(l.s6,{children:[(0,a.jsx)(n.L3,{children:r}),(0,a.jsx)(n.rr,{children:t})]}),(0,a.jsxs)("div",{className:(0,c.cn)("flex max-h-full w-full max-w-96 flex-col gap-6 px-4 py-4 md:px-1",h&&"items-center",g),children:[(0,a.jsx)(d.LovableLogoColor,{className:"size-9 shrink-0"}),(0,a.jsxs)("div",{className:(0,c.cn)("flex w-full flex-col gap-2",h&&"items-center text-center"),children:[(0,a.jsx)("h2",{className:(0,c.cn)("text-2xl md:text-3xl",!h&&"mr-auto"),children:r}),(0,a.jsx)("p",{children:t})]}),u]}),(0,a.jsx)("div",{className:"absolute right-2 top-2 md:right-8 md:top-8",children:(0,a.jsx)(n.HM,{asChild:!0,children:(0,a.jsx)(i.$,{variant:"ghost",iconOnly:!0,"aria-label":"Close",children:(0,a.jsx)(o.u,{})})})})]})})})}},108980:(e,r,t)=>{t.d(r,{Q:()=>o,V:()=>i});let a={MAX_DISPLAY_DECIMAL_PLACES:1},n=a.MAX_DISPLAY_DECIMAL_PLACES+1,l=Math.pow(10,a.MAX_DISPLAY_DECIMAL_PLACES),s=Math.pow(10,n),i=e=>Number.isFinite(e)?Math.round(e*s)/s:0,o=e=>{if(!Number.isFinite(e)||e<0)return"0";let r=Math.round(e*l)/l;return r===Math.floor(r)?r.toLocaleString():r.toLocaleString(void 0,{minimumFractionDigits:a.MAX_DISPLAY_DECIMAL_PLACES,maximumFractionDigits:a.MAX_DISPLAY_DECIMAL_PLACES})}},117113:(e,r,t)=>{t.d(r,{H:()=>o});var a=t(20097),n=t(183031),l=t(381222),s=t(640009),i=t(328699);let o=e=>{var r,t,o;let{isInteractive:d=!1,className:c,user:u,zIndex:p,...m}=e,g=(0,s.Q)(u.id),h=(null==(r=u.attributes)?void 0:r.display_name)||(u.username&&u.username!==u.id?u.username:u.id),f=u.username!==u.id?u.username:void 0,{data:x}=(0,n.I)({...i.Y.publicProfile({username:null!=f?f:""}),enabled:!!f&&!u.photo_url}),v=null!=(o=null!=(t=u.photo_url)?t:null==x?void 0:x.avatar_url)?o:void 0;return(0,a.jsx)(l._,{name:h,isInteractive:d,photoSrc:v,userColor:g,className:c,zIndex:p,...m})}},133281:(e,r,t)=>{t.d(r,{A:()=>s});var a,n=t(325413);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(null,arguments)}let s=function(e){return n.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),a||(a=n.createElement("path",{fill:"currentColor",d:"M8.25 17.5a1.75 1.75 0 1 0-3.5 0v1.75H6.5c.861 0 1.75-.808 1.75-1.75m7.806-13.616a2.75 2.75 0 0 1 3.888 0l.172.171a2.75 2.75 0 0 1 0 3.89l-6.172 6.172a2.75 2.75 0 0 1-3.888 0l-.172-.172a2.75 2.75 0 0 1 0-3.89zm2.828 1.06a1.25 1.25 0 0 0-1.768 0l-6.172 6.173a1.25 1.25 0 0 0 0 1.767l.172.171a1.25 1.25 0 0 0 1.768 0l6.172-6.17a1.25 1.25 0 0 0 0-1.769zM9.75 17.5c0 1.82-1.611 3.25-3.25 3.25H4a.75.75 0 0 1-.75-.75v-2.5a3.25 3.25 0 0 1 6.5 0"})))}},163131:(e,r,t)=>{t.d(r,{WorkspacePaymentFailedDialog:()=>x,Yv:()=>f,a_:()=>g,cK:()=>m,wB:()=>h});var a=t(20097),n=t(400282),l=t(470800),s=t(325413),i=(t(83245),t(488381)),o=t(282330),d=t(488430),c=t(313259),u=t(100220),p=t(816232);let m="payment_status",g="plan_id",h="change_type",f="failed",x=()=>{let[e,r]=(0,s.useState)(!1),[t,o]=(0,s.useState)(),[d,c]=(0,s.useState)(),x=(0,n.useSearchParams)(),b=(0,n.useRouter)(),w=(0,n.usePathname)(),y=(0,i.j4)(e=>e.currentWorkspace),j=(0,s.useCallback)(()=>{let e=new URLSearchParams(x.toString());e.delete(m),e.delete(g),e.delete(h),b.replace("".concat(w,"?").concat(e.toString()),{scroll:!1})},[b,x,w]);return(0,s.useEffect)(()=>{o(x.get(g));let e=x.get(h);c(e),x.get(m)===f&&("topup"===e&&y&&l.Ay.capture(p.ZK.PURCHASE.FAILED,{current_plan:y.plan}),r(!0))},[x,y]),(0,a.jsx)(u.E,{title:"topup"===d?"Top-up cancelled":"Payment failed",description:"topup"===d?"Your credit top-up couldn't be completed":"Payment couldn't complete or has lapsed on this workspace.",open:e,onOpenChange:e=>{r(e),!e&&(x.has(m)||x.has(g)||x.has(h))&&j()},children:(0,a.jsx)(v,{closeDialog:()=>{j(),r(!1)},currentWorkspace:y,planId:t,changeType:d})})},v=e=>{let{closeDialog:r,currentWorkspace:t,planId:n,changeType:l}=e,{createPortalSession:s,isCreatePortalSessionLoading:i,checkoutLoading:u,toCheckout:p}=(0,d.R)(),m=(0,o.X)(),g=async()=>{t&&n&&"topup"!==l&&await p({plan:n,workspaceId:t.id,changeType:l})},h="topup"===l?{text:"Retry Top-up",onClick:()=>{r(),m()},loading:!1,disabled:!1}:{text:"Retry payment",onClick:g,loading:u===n,disabled:!n||!!u||i};return(0,a.jsxs)("div",{className:"mt-2 flex w-full gap-6",children:[(0,a.jsx)(c.$,{className:"flex-1",intent:"secondary",onClick:r,children:"Go Back"}),(0,a.jsx)(c.$,{onClick:h.onClick,className:"flex-1",loading:h.loading,disabled:h.disabled,children:h.text})]})}},168954:(e,r,t)=>{t.d(r,{E:()=>l});var a=t(20097),n=t(375896);function l(e){let{className:r,...t}=e;return(0,a.jsx)("div",{className:(0,n.cn)("animate-pulse rounded-md bg-primary/10",r),...t})}},187903:(e,r,t)=>{t.d(r,{Q:()=>a});function a(e){return Number.isInteger(e)?e.toString():e.toFixed(2)}},195107:(e,r,t)=>{t.d(r,{C:()=>u,n:()=>p});var a=t(20097),n=t(980451),l=t(325413),s=t(799599),i=t(637093),o=t(31995);let d=(0,n.default)(async()=>(await t.e(22734).then(t.bind(t,322734))).FeatureFlagDebugDialog,{loadableGenerated:{webpack:()=>[322734]},ssr:!1}),c=(0,l.createContext)(void 0);function u(){let e=(0,l.useContext)(c);if(!e)throw Error("useBaseFlags must be used within FlagsProvider");return e}function p(e){let{children:r,featureFlags:t}=e,n=(0,i.E$)(),l=(0,o.K)(e=>e.isDebugDialogOpen),u=(0,o.K)(e=>e.closeDebugDialog);return(0,s.vC)("ctrl+shift+f",e=>{e.preventDefault(),(0,o.m)()},{enabled:!!n}),(0,a.jsxs)(c.Provider,{value:t,children:[r,n&&l&&(0,a.jsx)(d,{open:l,onOpenChange:e=>!e&&u(),originalFlags:t})]})}c.displayName="BaseFlagsContext"},213224:(e,r,t)=>{t.d(r,{V:()=>i,a:()=>n});var a=t(325413);async function n(e,r){var t;let a=await e();if(!(null==a?void 0:a.isWebViewBridgeAvailable))throw Error("Native bridge not available");if(!(null==(t=a.isNativeMethodAvailable)?void 0:t.call(a,r)))throw Error("".concat(r," not available in native app"));return a}let l=null,s=null;function i(){let e="ReactNativeWebView"in window;return{getBridge:(0,a.useCallback)(async()=>e?l||(s||(s=(async()=>{try{let{linkBridge:e}=await t.e(61820).then(t.bind(t,161820)),r=e({timeout:6e4});try{Reflect.set(r,"then",void 0)}catch(e){window.console.warn("[useNativeAppBridge] Unable to remove bridge.then",e)}return l=r,r}catch(e){return window.console.error("[useNativeAppBridge] Error creating bridge",e),s=null,l=null,null}})()),s):null,[e]),isAvailable:e}}},223591:(e,r,t)=>{t.d(r,{Q:()=>l});var a=t(757423),n=t(433080);let l=(e,r)=>{let{getDisplayPrice:t,getCurrencySymbolForPlan:l}=(0,a.et)(),s=(0,n.RL)(e),i=(0,n.RL)(r),o=t(e),d=t(r);return{current:{limit:s,price:o,currencySymbol:l(e)},selected:{limit:i,price:d,currencySymbol:l(r)},creditDifference:i-s,upgradeCost:d-o}}},259823:(e,r,t)=>{t.d(r,{Fc:()=>d,T2:()=>p,TN:()=>u,XL:()=>c});var a=t(20097),n=t(715165),l=t(325413),s=t(375896),i=t(313259);let o=(0,n.F)("relative grid w-full grid-cols-[0_1fr] rounded-lg border px-4 py-3 text-sm has-[>svg]:grid-cols-[1.75rem_1fr] has-[>svg]:has-[[data-alert-action]]:grid-cols-[1.75rem_1fr_auto] has-[[data-alert-action]]:grid-cols-[0_1fr_auto] [&>svg]:mr-3 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [&>svg]:text-primary-foreground",secondary:"border-transparent bg-secondary text-secondary-foreground [&>svg]:text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground [&>svg]:text-destructive-foreground",warning:"border-transparent bg-warning text-warning-foreground [&>svg]:text-warning-foreground",warning_outline:"border-warning bg-transparent text-warning-foreground [&>svg]:text-warning-foreground",success:"border-transparent bg-success text-success-foreground [&>svg]:text-success-foreground",accent:"border-transparent bg-accent text-accent-foreground [&>svg]:text-accent-foreground",affirmative:"border-transparent bg-affirmative text-affirmative-foreground [&>svg]:text-affirmative-foreground",outline:"border border-border text-foreground",bordered:"border border-input bg-muted text-foreground text-muted-foreground [&>svg]:text-muted-foreground","brand-bubblegum":"bg-brand-bubblegum text-brand-bubblegum-foreground","brand-tiger":"bg-brand-tiger text-brand-tiger-foreground","brand-saffron":"bg-brand-saffron text-brand-saffron-foreground","brand-sapphire":"bg-brand-sapphire text-brand-sapphire-foreground","brand-twilight":"bg-brand-twilight text-brand-twilight-foreground","brand-flamingo":"bg-brand-flamingo text-brand-flamingo-foreground"}},defaultVariants:{variant:"default"}}),d=l.forwardRef((e,r)=>{let{className:t,variant:n,...l}=e;return(0,a.jsx)("div",{ref:r,role:"alert",className:(0,s.cn)(o({variant:n}),t),...l})});d.displayName="Alert";let c=l.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("h5",{ref:r,className:(0,s.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",t),...n})});c.displayName="AlertTitle";let u=l.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...n})});u.displayName="AlertDescription";let p=e=>{let{children:r,variant:t="outline",intent:n="muted",size:l="sm",className:o,...d}=e;return(0,a.jsx)(i.$,{"data-alert-action":!0,variant:t,intent:n,size:l,className:(0,s.cn)("col-start-[-1] row-span-2 row-start-1 ml-3",o),...d,children:r})}},262639:(e,r,t)=>{t.d(r,{I4:()=>c,Ob:()=>u,dG:()=>p});var a=t(183031),n=t(682780),l=t(134472),s=t(325413),i=t(21696),o=t(506286),d=t(637093);function c(e){var r;let{permission:t,...n}=e,{isAuthenticated:l}=(0,i.Z2)(),s=(0,d.WW)(),{permissions:c,isLoading:u}=(0,o.S)(),p=Array.isArray(t)?t.some(e=>c.includes(e)):c.includes(t),m=u&&0===c.length,g=(null==(r=n.enabled)||r)&&!m&&l&&(p||s);return(0,a.I)({...n,enabled:g})}function u(e){var r;let{permission:t,...a}=e,{isAuthenticated:l}=(0,i.Z2)(),s=(0,d.WW)(),{permissions:c,isLoading:u}=(0,o.S)(),p=Array.isArray(t)?t.some(e=>c.includes(e)):c.includes(t),m=u&&0===c.length,g=(null==(r=a.enabled)||r)&&!m&&l&&(p||s);return(0,n.q)({...a,enabled:g})}function p(){let e=(0,l.jE)(),{isAuthenticated:r}=(0,i.Z2)(),t=(0,d.WW)(),{permissions:a,isLoading:n}=(0,o.S)();return(0,s.useCallback)(l=>{let{permission:s,enabled:i,...o}=l;if(n)return;let d=Array.isArray(s)?s.some(e=>a.includes(e)):a.includes(s);r&&(d||t)&&(null==i||i)&&e.prefetchQuery(o)},[e,r,t,a,n])}},271308:(e,r,t)=>{t.d(r,{B:()=>o,O:()=>d});var a=t(20097),n=t(470800),l=t(325413),s=t(602571);let i=(0,l.createContext)(null);i.displayName="PostHogGroupContext";let o=e=>{let{children:r}=e,t=(0,l.useRef)((0,s.vt)(()=>({projectWorkspaceId:null,currentWorkspaceId:null}))),o=(0,l.useCallback)(()=>{let{projectWorkspaceId:e,currentWorkspaceId:r}=t.current.getState();n.Ay.group("workspace",e||r||"none"),n.Ay.reloadFeatureFlags()},[]),d=(0,l.useCallback)(e=>{t.current.setState({projectWorkspaceId:e}),o()},[o]),c=(0,l.useCallback)(e=>{t.current.setState({currentWorkspaceId:e}),o()},[o]),u={store:t.current,setProjectWorkspaceId:d,setCurrentWorkspaceId:c};return(0,a.jsx)(i.Provider,{value:u,children:r})};function d(){let e=(0,l.useContext)(i);if(!e)throw Error("usePostHogGroupContext must be used within a PostHogGroupProvider");return e}},282330:(e,r,t)=>{t.d(r,{C:()=>ei,X:()=>eu});var a=t(470800),n=t(325413),l=t(145010),s=t(816232),i=t(20097),o=t(21696),d=t(488381),c=t(506286),u=t(757423),p=t(834669),m=t(358679),g=t(437409),h=t(875129),f=t(313259),x=t(480695),v=t(154724),b=t(255483),w=t(183031),y=t(926206),j=t(630298);function N(e){let{data:r,isLoading:t,error:a}=(0,w.I)({queryKey:j.T7.buildCreditPricing(e),queryFn:async()=>(0,y.d0)().GET("/workspaces/{workspace_id}/credits/pricing",{params:{path:{workspace_id:e}}}),enabled:!!e,staleTime:1/0,gcTime:1/0}),n=a||(t||r?null:Error("Failed to load pricing data"));return{pricePerCredit:r?r.unit_price/100:0,isLoading:t,error:n}}var _=t(715429),C=t(83245),k=t(163131),P=t(951121),E=t(223591);let S=Array.from({length:20},(e,r)=>50+50*r);var I=t(433080),L=t(259823),A=t(927987),D=t(168954);let O=e=>{let{selectedCredits:r,setSelectedCredits:t,workspace:a}=e,{getCurrencySymbol:n}=(0,u.et)(),l=n(),s=N(a.id),o=s.pricePerCredit,d=(r*o).toFixed(2);return s.error?(0,i.jsx)(L.Fc,{variant:"destructive",children:(0,i.jsx)(L.TN,{children:"Unable to load pricing. Please try again later."})}):s.isLoading?(0,i.jsx)(D.E,{className:"h-[42px] w-full rounded-md"}):(0,i.jsxs)(A.Select,{value:r.toString(),onValueChange:e=>t(Number(e)),children:[(0,i.jsx)(A.SelectTrigger,{className:"w-full justify-start bg-background",children:(0,i.jsxs)("span",{className:"flex min-w-0 flex-1 items-center gap-2",children:[(0,i.jsxs)("span",{className:"min-w-0 truncate",children:["+",r," credits"]}),(0,i.jsxs)("span",{className:"ml-auto shrink-0 whitespace-nowrap text-muted-foreground",children:[l,d]})]})}),(0,i.jsx)(A.SelectContent,{children:S.map(e=>{let r=(e*o).toFixed(2);return(0,i.jsx)(A.tJ,{value:e.toString(),label:"+".concat(e," credits"),endContent:(0,i.jsxs)("span",{className:"text-muted-foreground group-data-[highlighted]:text-brand-twilight-foreground group-data-[state=checked]:text-brand-twilight-primary-foreground",children:[l,r]}),showIndicator:!1,variant:"twilight"},e)})})]})};var T=t(375896);let F=e=>{let{selected:r,onClick:t,children:a}=e;return(0,i.jsxs)("div",{role:"radio","aria-checked":r,tabIndex:0,onClick:t,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),t())},className:(0,T.cn)("relative cursor-pointer rounded-lg p-3 transition-all sm:p-4",r?"bg-muted ring-2 ring-primary":"ring-2 ring-muted"),children:[(0,i.jsx)("div",{className:"absolute right-3 top-3 sm:right-4 sm:top-4",children:(0,i.jsx)("div",{className:"flex-shrink-0",children:(0,i.jsx)("div",{className:(0,T.cn)("h-5 w-5 rounded-full border-2 transition-colors",r?"border-primary bg-primary":"border-muted-foreground/30"),children:r&&(0,i.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,i.jsx)("div",{className:"h-2 w-2 rounded-full bg-primary-foreground"})})})})}),(0,i.jsx)("div",{children:a})]})};var R=t(372311);let M=e=>{let{savingsPercent:r,show:t}=e;return t?(0,i.jsxs)(R.E,{variant:"success",className:"rounded-full px-2 py-0.5 text-xs sm:px-2.5 sm:py-1 sm:text-sm",children:["Subscribe & save ",r,"%"]}):null},W=e=>{let{current:r,selected:t,billingDate:a}=e;return(0,i.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,i.jsx)("span",{className:"text-muted-foreground",children:"Current plan"}),(0,i.jsxs)("span",{className:"text-muted-foreground",children:[r.limit," credits/mo \xb7 ",r.currencySymbol,r.price,"/mo"]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,i.jsx)("span",{className:"text-muted-foreground",children:"Upgrade to"}),(0,i.jsxs)("span",{className:"text-muted-foreground",children:[t.limit," credits/mo \xb7 ",t.currencySymbol,t.price,"/mo"]})]}),(0,i.jsxs)("div",{className:"mt-1 text-xs text-muted-foreground",children:["Next billing cycle ",a]})]})},B=e=>{let{workspace:r,onClose:t,targetPlan:a,availablePlans:l,handleCancel:s,handleConfirm:o,creditsRemaining:d}=e,{handleUpgradeConfirmed:c}=(0,u.et)(),p=l.some(e=>e!==r.plan),[w,j]=(0,n.useState)(p?"upgrade":"topup"),[L,A]=(0,n.useState)(a),[D,T]=(0,n.useState)(!1),R=(0,I.RL)(a)-(0,I.RL)(r.plan),[B,U]=(0,n.useState)(()=>(e=>e<=0?S[0]:S.reduce((r,t)=>Math.abs(t-e)<Math.abs(r-e)?t:r))(R)),{handleTopUp:K,isLoading:V}=(e=>{let{workspace:r,creditAmount:t=50,onSuccess:a}=e,[l,s]=(0,n.useState)(!1),i=(0,_.n)({mutationFn:async()=>{var e;let a=new URL(window.location.href),n=((e,r)=>{let t=new URL("".concat(window.location.origin).concat("/topup-success")),a=new URL(e);return t.searchParams.set("redirect",a.toString()),t.searchParams.set("expected_topup_limit",r.toString()),t.toString()})(a,(null!=(e=r.topup_credits_limit)?e:0)+t),l=(e=>{let r=new URL(e);return r.searchParams.set(k.cK,k.Yv),r.searchParams.set(k.wB,"topup"),r.toString()})(a);return(0,y.d0)().POST("/workspaces/{workspace_id}/credits/topup",{params:{path:{workspace_id:r.id}},body:{credit_amount:t,success_url:n,cancel_url:l}})},onSuccess:async e=>{e.checkout_url?(s(!0),null==a||a(),window.location.assign(e.checkout_url)):C.toast.error("Failed to create checkout session. Please try again.")},onError:e=>{(0,P.Ni)(e)}});return{handleTopUp:async()=>{try{await i.mutateAsync()}catch(e){}},isLoading:i.isPending||l,isRedirecting:l}})({workspace:r,creditAmount:B}),z=(0,I.bn)(r.billing_period_end_date),Y=N(r.id),q=(0,E.Q)(r.plan,L),$=q.creditDifference*Y.pricePerCredit,G=$>0?Math.round(($-q.upgradeCost)/$*100):0,H=G>0&&q.creditDifference>0&&q.upgradeCost>0&&!Y.isLoading&&!Y.error,Z=(0,h.B)(),Q=async()=>{o(w,L,B),"upgrade"===w?(T(!0),await c(L)):await K()},X="upgrade"===w?D:V,J="upgrade"===w&&L===r.plan,ee=X||J;return(0,i.jsxs)(x.Cf,{className:"sm:max-w-[425px]",children:[(0,i.jsxs)("div",{className:"flex max-w-full flex-col gap-4 overflow-hidden",children:[(0,i.jsxs)(x.c7,{children:[(0,i.jsx)("div",{className:"flex pb-4",children:(0,i.jsx)(b.LovableLogoColor,{className:"h-12 w-12"})}),(0,i.jsx)(x.L3,{className:"text-2xl",children:0===d?"Continue building":"Add more credits"}),(0,i.jsx)(x.rr,{children:p?"Choose a long-term upgrade or a one-time top-up.":"Purchase additional credits for your workspace"})]}),(0,i.jsxs)("div",{role:"radiogroup","aria-label":"Credit options",className:"flex flex-col gap-4 p-0.5",children:[p&&(0,i.jsxs)(F,{selected:"upgrade"===w,onClick:()=>j("upgrade"),children:[(0,i.jsx)("h3",{className:"text-lg font-medium",children:"Upgrade your plan"}),(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)(W,{current:q.current,selected:q.selected,billingDate:z})}),(0,i.jsx)("div",{className:"mt-3",children:(0,i.jsx)(g.D,{selectedPlanId:L,workspace:r,children:(0,i.jsx)(M,{savingsPercent:G,show:H})})}),(0,i.jsx)("div",{className:"mt-3",onClick:e=>e.stopPropagation(),children:(0,i.jsx)(m.h,{options:l,selectedOption:L,onSelect:A,showCreditDifference:!0,currentPlanLimit:q.current.limit})})]}),(0,i.jsxs)(F,{selected:"topup"===w,onClick:()=>j("topup"),children:[(0,i.jsx)("h3",{className:"text-lg font-medium",children:"Top up credits"}),(0,i.jsxs)("p",{className:"mt-1 text-sm text-muted-foreground",children:["Purchase credits on demand. Valid for 12 months.",Z&&" Prices are ".concat(Z)]}),(0,i.jsx)("div",{className:"mt-3",onClick:e=>e.stopPropagation(),children:(0,i.jsx)(O,{selectedCredits:B,setSelectedCredits:U,workspace:r})})]})]})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(f.$,{variant:"outline",onClick:()=>{s(w),t()},disabled:X,className:"flex-1",children:"Cancel"}),(0,i.jsx)(f.$,{onClick:Q,disabled:ee,className:"flex-1",children:X?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(v.o,{className:"animate-spin",size:"small"}),"Processing..."]}):"upgrade"===w?"Upgrade plan":"Buy credits"})]})]})};var U=t(936617),K=t(426333),V=t(803099),z=t(518925),Y=t(981853),q=t(640715),$=t(9551),G=t(812543);let H=e=>{let{onClose:r}=e,{mustHidePayments:t,mustUseNativePaywall:a}=(0,z._)();return a?(0,i.jsx)(G.D,{onClose:r}):(0,i.jsxs)(x.Cf,{className:"sm:max-w-[425px]",children:[(0,i.jsx)("div",{className:"flex max-w-full flex-col gap-4 overflow-hidden pb-4",children:(0,i.jsxs)(x.c7,{children:[(0,i.jsx)("div",{className:"flex pb-4",children:(0,i.jsx)(b.LovableLogoColor,{className:"h-12 w-12"})}),(0,i.jsx)(x.L3,{className:"text-2xl",children:t?"Usage limit reached":"Out of credits"}),(0,i.jsx)(x.rr,{children:t?"You've reached the usage limit of your current plan. Visit lovable.dev to manage your account.":"You've used all your credits for this period. Visit lovable.dev to manage your account."})]})}),(0,i.jsx)("div",{className:"flex gap-2",children:(0,i.jsx)(f.$,{variant:"outline",onClick:r,className:"flex-1",children:"Dismiss"})})]})};var Z=t(234281),Q=t.n(Z),X=t(737318);let J=()=>(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{children:"We couldn't load the data needed to upgrade your workspace."}),(0,i.jsxs)("p",{children:["Please refresh the page and try again. If the problem continues, contact our"," ",(0,i.jsx)(Q(),{href:"/support",className:"underline",children:"Support"}),"."]})]}),ee=e=>{let{hasFetchedWorkspace:r}=e;return(0,i.jsx)(x.Cf,{className:"max-h-[90vh] overflow-y-auto",size:"lg",children:(0,i.jsxs)(x.c7,{children:[(0,i.jsx)(x.L3,{className:"text-start text-3xl font-medium",children:"Building something big?"}),r?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x.rr,{className:"text-sm text-muted-foreground",children:"Out of credits."}),(0,i.jsx)(X.O,{})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x.rr,{className:"text-sm text-muted-foreground",children:"Loading..."}),(0,i.jsx)(J,{})]})]})})};var er=t(117113);let et=e=>{let{id:r,displayName:t,avatarClassName:a,actionComponent:n,email:l,isCurrentUser:s=!1,isInvited:o=!1,showBadge:d=!0}=e;return(0,i.jsxs)("div",{className:"flex items-center justify-start gap-3 py-1 md:flex-nowrap",children:[(0,i.jsx)(er.H,{user:{id:r,username:null!=t?t:l},className:(0,T.cn)(a,o&&"opacity-60","h-8 w-8")}),(0,i.jsx)("div",{className:"flex min-w-0 flex-shrink items-center gap-4 ".concat(o&&"opacity-60"),children:(0,i.jsxs)("div",{className:"flex min-w-0 flex-col gap-0",children:[(0,i.jsxs)("div",{className:"flex-shrink truncate text-sm font-medium leading-tight",children:[t," ",s&&(0,i.jsx)("span",{className:"font-normal",children:"(you)"})]}),(0,i.jsx)("span",{className:"max-w-[150px] flex-shrink truncate text-xs text-muted-foreground",children:l})]})}),o&&d&&(0,i.jsx)(R.E,{variant:"outline",className:"hidden gap-1 bg-muted text-xs font-medium text-muted-foreground md:flex",children:"Invite sent"}),n&&(0,i.jsx)("div",{className:"ml-auto flex-shrink-0",children:n})]})};var ea=t(52984);let en=e=>{let{workspace:r,myWorkspaceRole:t,onSendPing:l,onDismiss:o,isSendingPing:d,canViewWorkspaceMembers:c}=e,[u,p]=(0,n.useState)(!1),m=async()=>{a.Ay.capture(s.lY.OUT_OF_CREDITS_DIALOG.SEND_PING_CLICKED,{workspace_id:r.id,workspace_plan:r.plan,workspace_plan_type:r.plan_type,user_role:t}),await l(),p(!0),C.toast.success("Ping sent!",{description:"The workspace owner has been notified about the credit shortage."})},{owner:g}=(0,ea.K4)({workspaceId:r.id,canViewWorkspaceMembers:c});return(0,i.jsxs)(x.Cf,{className:"max-h-[90vh] overflow-y-auto",size:"lg",children:[(0,i.jsx)(x.c7,{className:"flex flex-col gap-4",children:(0,i.jsxs)("div",{className:"flex flex-col items-start gap-1",children:[(0,i.jsx)(b.LovableLogoColor,{className:"size-9"}),(0,i.jsx)(x.L3,{className:"text-start text-3xl font-medium",children:"Workspace out of credits"}),(0,i.jsx)(x.rr,{className:"text-start text-sm text-muted-foreground",children:"Only workspace owners and admins can upgrade and add more credits. Send a ping and continue building."})]})}),(0,i.jsx)("div",{className:"rounded-lg p-3",children:(0,i.jsx)(et,{id:(null==g?void 0:g.user_id)||r.owner_id||"",displayName:null==g?void 0:g.display_name,email:(null==g?void 0:g.email)||"",avatarClassName:"h-8 w-8",actionComponent:(0,i.jsx)("span",{className:"text-xs text-muted-foreground",children:"Owner"}),showBadge:!1})}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(f.$,{variant:"outline",className:"flex-1",onClick:()=>{a.Ay.capture(s.lY.OUT_OF_CREDITS_DIALOG.DISMISS_CLICKED,{workspace_id:r.id,workspace_plan:r.plan,workspace_plan_type:r.plan_type,user_role:t}),o()},children:"Dismiss"}),(0,i.jsx)(f.$,{className:"h-8 flex-1",onClick:m,disabled:d||u,children:d?"Sending...":u?"Ping sent":"Send a ping"})]})]})},el=e=>{var r,t;let{workspace:l,myWorkspaceRole:o,onSendPing:d,onDismiss:c,isSendingPing:u,canViewWorkspaceMembers:p}=e,[m,g]=(0,n.useState)(!1),{mustHidePayments:h}=(0,z._)(),v=async()=>{a.Ay.capture(s.lY.OUT_OF_CREDITS_DIALOG.SEND_PING_CLICKED,{workspace_id:l.id,workspace_plan:l.plan,workspace_plan_type:l.plan_type,user_role:o}),await d(),g(!0),C.toast.success("Ping sent!",{description:"The workspace owner has been notified."})},{owner:w}=(0,ea.K4)({workspaceId:l.id,canViewWorkspaceMembers:p});return(0,i.jsxs)(x.Cf,{className:"max-h-[90vh] overflow-y-auto",size:"lg",children:[(0,i.jsx)(x.c7,{className:"flex flex-col gap-4",children:(0,i.jsxs)("div",{className:"flex flex-col items-start gap-1",children:[(0,i.jsx)(b.LovableLogoColor,{className:"size-9"}),(0,i.jsx)(x.L3,{className:"text-start text-3xl font-medium",children:h?"Usage limit reached":"Workspace out of credits"}),(0,i.jsx)(x.rr,{className:"text-start text-sm text-muted-foreground",children:h?"You've reached the usage limit of your current plan. Only workspace owners and admins can manage the account. Send a ping to notify them.":"Only workspace owners and admins can manage the account. Send a ping to notify them."})]})}),(0,i.jsx)("div",{className:"rounded-lg p-3",children:(0,i.jsx)(et,{id:null!=(t=null!=(r=null==w?void 0:w.user_id)?r:l.owner_id)?t:"",displayName:null==w?void 0:w.display_name,email:(null==w?void 0:w.email)||"",avatarClassName:"h-8 w-8",actionComponent:(0,i.jsx)("span",{className:"text-xs text-muted-foreground",children:"Owner"}),showBadge:!1})}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(f.$,{variant:"outline",className:"flex-1",onClick:()=>{a.Ay.capture(s.lY.OUT_OF_CREDITS_DIALOG.DISMISS_CLICKED,{workspace_id:l.id,workspace_plan:l.plan,workspace_plan_type:l.plan_type,user_role:o}),c()},children:"Dismiss"}),(0,i.jsx)(f.$,{className:"h-8 flex-1",onClick:v,disabled:u||m,children:u?"Sending...":m?"Ping sent":"Send a ping"})]})]})};var es=t(539104),ei=function(e){return e.INACTIVE_WORKSPACE="INACTIVE_WORKSPACE",e.FREE_DAILY_LIMIT="FREE_DAILY_LIMIT",e.FREE_MONTHLY_LIMIT="FREE_MONTHLY_LIMIT",e.LEGACY_DAILY_LIMIT="LEGACY_DAILY_LIMIT",e.PAID_MONTHLY_LIMIT="PAID_MONTHLY_LIMIT",e}({});let eo={INACTIVE_WORKSPACE:{title:"Reactivate your workspace",subtitle:"Your workspace is inactive. Upgrade to continue building.",showCreditDifference:!1,showWhatsChanging:!1,showPlanFeatures:!0,showNextBillingCycle:!1,showPlanDropdown:!0},FREE_DAILY_LIMIT:{title:"Daily limit reached",subtitle:"You've used today's free credits. Upgrade to keep building.",showCreditDifference:!1,showWhatsChanging:!1,showPlanFeatures:!0,showNextBillingCycle:!1,showPlanDropdown:!0},FREE_MONTHLY_LIMIT:{title:"Monthly limit reached",subtitle:"You've used all your free credits this month. Upgrade to keep building.",showCreditDifference:!1,showWhatsChanging:!1,showPlanFeatures:!0,showNextBillingCycle:!1,showPlanDropdown:!0},LEGACY_DAILY_LIMIT:{title:"Daily limit reached",subtitle:"Your plan has daily limits. Upgrade to a modern plan with monthly credits.",showCreditDifference:!1,showWhatsChanging:!0,showPlanFeatures:!1,showNextBillingCycle:!0,showPlanDropdown:!0},PAID_MONTHLY_LIMIT:{title:"Need more credits?",subtitle:"You've used your monthly credits. Add more to continue this month.",showCreditDifference:!0,showWhatsChanging:!1,showPlanFeatures:!1,showNextBillingCycle:!0,showPlanDropdown:!0}};function ed(e){let{workspace:r,membership:t,hasFetchedWorkspace:l,onClose:d,scenario:m}=e,{isAuthenticated:g}=(0,o.Z2)(),{userData:h}=(0,p.u)(),{setPricingScenario:f,selectedProPlan:v,selectedBizPlan:b,currentPlan:w,proPlanIds:j,bizPlanIds:N}=(0,u.et)(),{sendCreditsPing:C,isSendingPing:k}=function(e){let{workspaceId:r}=e,{mutateAsync:t,isPending:a}=(0,_.n)({mutationFn:async()=>(0,y.d0)().POST("/workspaces/{workspace_id}/credits-ping",{params:{path:{workspace_id:r}}}),onError:e=>{(0,P.Ni)(e)}});return{sendCreditsPing:t,isSendingPing:a}}({workspaceId:(null==r?void 0:r.id)||""}),{permitted:E}=(0,c.J)(q.eZ.ViewWorkspaceMembers),{canTopUpCredits:S,creditsRemaining:L}=(0,V.S)(r),{isMobileApp:A}=(0,K.V)(),{mustHidePayments:O,mustUseNativePaywall:T}=(0,z._)();(0,n.useEffect)(()=>{f("outOfCredits")},[f]),(0,n.useEffect)(()=>{r&&a.Ay.capture(s.ZK.MODAL.OPENED,{current_plan:r.plan,can_top_up_credits:S})},[r,S]);let F=e=>{a.Ay.capture(s.ZK.MODAL.CANCEL_CLICKED,{current_plan:null==r?void 0:r.plan,selected_option:e}),null==d||d()},R=(e,t,n)=>{a.Ay.capture(s.ZK.MODAL.CONFIRM_CLICKED,{selected_option:e,current_plan:null==r?void 0:r.plan,selected_credits:"topup"===e?n:void 0,selected_plan:"upgrade"===e?t:void 0})},M=(0,n.useMemo)(()=>"biz"===(0,I.m6)(w.id)?b:v,[w.id,v,b]),W=eo[(0,n.useMemo)(()=>m||(r?function(e){var r,t;let a=e.plan,{isFreePlan:n,isInactivePlan:l,isAmbassadorPlan:s,isPaidPlan:i,isLegacyPlan:o}=(0,I.cb)(a),d=(null!=(r=e.billing_period_credits_limit)?r:0)>0,c=n&&(null!=(t=e.daily_credits_used_in_billing_period)?t:0)>=es.le;return l?"INACTIVE_WORKSPACE":n&&!c?"FREE_DAILY_LIMIT":n&&c?"FREE_MONTHLY_LIMIT":(o||s)&&!d?"LEGACY_DAILY_LIMIT":"PAID_MONTHLY_LIMIT"}(r):ei.FREE_DAILY_LIMIT),[m,r])],G=(0,n.useMemo)(()=>r?(0,Y.Y)({currentPlan:w,targetPlanCategory:(0,I.m6)(M),proPlanIds:j,bizPlanIds:N}):[],[r,w,M,j,N]);if(!r)return(0,i.jsx)(ee,{hasFetchedWorkspace:l});if(!g||!h)return(0,i.jsx)(x.Cf,{className:"max-h-[90vh] overflow-y-auto",size:"lg",children:(0,i.jsx)(D.E,{className:"h-[400px] w-full"})});let Z=null==t?void 0:t.role,{permitted:Q}=(0,c.J)(q.eZ.ManageWorkspaceBilling);if(!Q){let e={workspace:r,myWorkspaceRole:Z,onSendPing:async()=>{await C()},onDismiss:()=>{null==d||d()},isSendingPing:k,canViewWorkspaceMembers:E};return A?(0,i.jsx)(el,{...e}):(0,i.jsx)(en,{...e})}return T?(0,i.jsx)(H,{onClose:d}):S?A?(0,i.jsx)(H,{onClose:d}):(0,i.jsx)(B,{workspace:r,onClose:()=>null==d?void 0:d(),targetPlan:M,availablePlans:G,handleCancel:F,handleConfirm:R,creditsRemaining:L}):A?(0,i.jsx)($.b,{title:O?"Usage limit reached":"Out of credits",subtitle:O?"You've reached the usage limit of your current plan. Visit lovable.dev to manage your account.":"You've used all your available credits. Visit lovable.dev to manage your account.",onClose:d}):(0,i.jsx)(U.n,{targetPlan:M,availablePlans:G,title:W.title,subtitle:W.subtitle,showCreditDifference:W.showCreditDifference,showWhatsChanging:W.showWhatsChanging,showPlanFeatures:W.showPlanFeatures,showNextBillingCycle:W.showNextBillingCycle,showPlanDropdown:W.showPlanDropdown,handleCancel:F,handleConfirm:R})}let ec=function(){let{onClose:e,scenario:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{currentWorkspace:t,hasFetchedCurrentWorkspace:a,membership:n}=(0,d.j4)(e=>e);return(0,i.jsx)(ed,{workspace:t,membership:n,hasFetchedWorkspace:a,onClose:e,scenario:r})},eu=()=>{let e=(0,l.f)(ec);return(0,n.useCallback)(function(){let{scenario:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e({childProps:{onClose:()=>e(!1),scenario:r},dialogProps:{onOpenChange:e=>{e||a.Ay.capture(s.ZK.MODAL.CLOSED)}}})},[e])}},315633:(e,r,t)=>{t.d(r,{l:()=>n});var a=t(50150);let n=(0,t(780493).w)(a.A,"CodeIcon")},323867:(e,r,t)=>{t.d(r,{C:()=>l});var a=t(926206),n=t(985677);async function l(e,r,t,l){var s,i,o;let d=(0,a.Pg)(),c=await d.post("/workspaces/".concat(r,"/iap/verify"),{jws:t});if(c.success)return await e.finishCreditPurchase(l),{status:"success",creditsGranted:c.credits_granted,planId:c.plan_id};switch(c.error_code){case n.S.AlreadyProcessed:return await e.finishCreditPurchase(l),{status:"already_processed"};case n.S.AlreadySubscribed:return await e.finishCreditPurchase(l),{status:"already_subscribed"};case n.S.UnknownProduct:return await e.finishCreditPurchase(l),{status:"permanent_error",errorCode:c.error_code};case n.S.PlanProductMismatch:return{status:"transient_error",error:null!=(s=c.error)?s:"Product doesn't match current plan"};case n.S.VerificationFailed:case void 0:return{status:"transient_error",error:null!=(i=c.error)?i:"Verification failed"};default:return{status:"transient_error",error:null!=(o=c.error)?o:"Unknown error: ".concat(c.error_code)}}}},328699:(e,r,t)=>{t.d(r,{Y:()=>o});var a=t(292968),n=t(302231),l=t(926206),s=t(96324),i=t(630298);let o={workspace:e=>{let{workspaceId:r,userData:t}=e;return(0,a.j)({queryKey:i.a$.workspace(r),queryFn:async()=>{let e=(0,l.d0)(),t=await e.GET("/user/workspaces/{workspace_id}",{params:{path:{workspace_id:r}}});return null==t?void 0:t.workspace},enabled:!!t&&!!r})},experimentalFeatures:e=>{let{user:r}=e;return(0,a.j)({queryKey:i.a$.experimentalFeatures(),enabled:!!r&&!!r.idToken&&(0,n.H)(r),refetchOnWindowFocus:!1,queryFn:async()=>{let e=(0,l.Pg)();try{return await e.get("/users/".concat(null==r?void 0:r.uid,"/experimental-features"))}catch(e){return s.logging.error("Failed to fetch experimental features",{error:e}),null}}})},contributions:e=>{let{userId:r}=e;return(0,a.j)({queryKey:i.a$.contributions(r),queryFn:async()=>r?(0,l.Pi)().get("/users/".concat(r,"/contributions")):{},enabled:!!r})},publicProfile:e=>{let{username:r}=e;return(0,a.j)({queryKey:i.a$.profile(r),queryFn:()=>(0,l.Pg)().get("/profile/".concat(r)),enabled:!!r,staleTime:36e5,retry:!1})},studentDomains:()=>(0,a.j)({queryKey:i.a$.studentDomains(),queryFn:async()=>(0,l.Pg)().get("/user/student/domains")}),toolApprovalPreferences:()=>(0,a.j)({queryKey:i.a$.toolApprovalPreferences(),queryFn:async()=>(0,l.Pg)().get("/user/preferences/tool-preferences"),staleTime:6e5}),starredProjects:e=>{let{limit:r}=e;return(0,a.j)({queryKey:i.a$.starredProjects(r),queryFn:async()=>{let e=(0,l.Pg)(),t=new URLSearchParams;r&&t.set("limit",r.toString());let a=t.toString()?"/user/projects/starred-projects?".concat(t.toString()):"/user/projects/starred-projects";return await e.get(a)},staleTime:3e5})},usernameSuggestions:e=>{let{workspaceId:r}=e;return(0,a.j)({queryKey:i.a$.usernameSuggestions(r),queryFn:async()=>{var e;let t=(0,l.d0)(),a=await t.GET("/user/username/suggestions",{params:{query:r?{workspace_id:r}:{}}});return null!=(e=null==a?void 0:a.suggestions)?e:[]},staleTime:1/0,retry:!1})}}},334229:(e,r,t)=>{t.d(r,{cn:()=>l});var a=t(137221),n=t(742893);function l(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,n.Q)((0,a.$)(r))}},358679:(e,r,t)=>{t.d(r,{h:()=>i});var a=t(20097),n=t(927987),l=t(433080),s=t(728277);function i(e){let{options:r,selectedOption:t,onSelect:i,disabled:o=!1,disabledText:d,showCreditDifference:c=!1,currentPlanLimit:u}=e,p=e=>{let r=(0,l.RL)(e);if(c&&void 0!==u){let t=r-u;if(e===s.VL.KTLO)return"5 daily credits";if(t>0)return"+".concat(t," additional credits");if(0===t)return"No additional credits"}return"".concat(r," credits / month")},m=()=>p(t);if(o){let e=d||m();return e?(0,a.jsx)("div",{className:"flex w-full items-center justify-between rounded-md border border-muted-border bg-muted px-3 py-2 text-sm text-muted-foreground",children:e}):null}return(0,a.jsxs)(n.Select,{value:t,onValueChange:i,disabled:o,children:[(0,a.jsx)(n.SelectTrigger,{className:"bg-background",children:(0,a.jsx)("span",{className:"min-w-0 truncate",children:m()})}),(0,a.jsx)(n.SelectContent,{children:r.map(e=>(0,a.jsx)(n.SelectItem,{value:e,variant:"twilight",children:p(e)},e))})]})}},359674:(e,r,t)=>{t.d(r,{q:()=>n});var a=t(845217);let n=(0,t(780493).w)(a.A,"LinkIcon")},372311:(e,r,t)=>{t.d(r,{E:()=>o});var a=t(20097),n=t(461364),l=t(715165);t(325413);var s=t(334229);let i=(0,l.F)("inline-flex items-center rounded-sm text-center text-xs font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 [a&]:cursor-pointer",{variants:{size:{sm:"h-4 px-1 py-0",md:"px-1.5 py-0.5"},variant:{default:"border-transparent bg-primary text-primary-foreground shadow [a&]:hover:bg-primary/80",active:"text-muted-active-foreground border-transparent bg-muted-active [a&]:hover:bg-muted-active/80",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground [a&]:hover:bg-destructive/80",warning:"border-transparent bg-warning text-warning-foreground [a&]:hover:bg-warning/80",success:"border-transparent bg-success text-success-foreground [a&]:hover:bg-success/80",accent:"border-transparent bg-accent text-accent-foreground [a&]:hover:bg-accent/80",affirmative:"border-transparent bg-affirmative text-affirmative-foreground [a&]:hover:bg-affirmative/80",outline:"border border-border text-foreground","brand-bubblegum":"bg-brand-bubblegum text-brand-bubblegum-foreground [a&]:hover:bg-brand-bubblegum/80","brand-tiger":"bg-brand-tiger text-brand-tiger-foreground [a&]:hover:bg-brand-tiger/80","brand-saffron":"bg-brand-saffron text-brand-saffron-foreground [a&]:hover:bg-brand-saffron/80","brand-sapphire":"bg-brand-sapphire text-brand-sapphire-foreground [a&]:hover:bg-brand-sapphire/80","brand-twilight":"bg-brand-twilight text-brand-twilight-foreground [a&]:hover:bg-brand-twilight/80","brand-flamingo":"bg-brand-flamingo text-brand-flamingo-foreground [a&]:hover:bg-brand-flamingo/80"}},defaultVariants:{variant:"default",size:"md"}});function o(e){let{className:r,variant:t,size:l,asChild:o=!1,...d}=e,c=o?n.DX:"span";return(0,a.jsx)(c,{"data-slot":"badge",className:(0,s.cn)(i({variant:t,size:l}),r),...d})}},381222:(e,r,t)=>{t.d(r,{_:()=>o});var a=t(20097),n=t(847100),l=t(640009),s=t(375896);let i={sm:"h-[20px] w-[20px]",md:"h-[26px] w-[26px]",lg:"h-[32px] w-[32px]"},o=e=>{let{size:r="md",name:t,isInteractive:o,className:d,photoSrc:c,userColor:u,isWorkspace:p=!1,shape:m,zIndex:g,...h}=e,f=t?t.charAt(0).toUpperCase():"",x=(0,l.I)(u),v=null!=m?m:"rounded-[8px]";return(0,a.jsxs)(n.eu,{className:(0,s.cn)("h-[26px] w-[26px] shrink-0 items-center border border-transparent text-xs",{[x.hoverBg]:!c&&!p&&o,"cursor-pointer":o,[x.hoverBorder]:o,[x.groupHoverBorder]:o,"group-[.avatars]:border-background":!0,["".concat(v," hover:border-transparent")]:p},i[r],d),style:{zIndex:g},...h,children:[(0,a.jsx)(n.BK,{className:"aspect-auto object-cover",src:c}),(0,a.jsx)(n.q5,{className:(0,s.cn)("items-center border-none font-medium text-white",x.bg,p&&(null!=m?m:"rounded-lg")),translate:"no",children:f})]})}},388952:(e,r,t)=>{t.d(r,{S:()=>n});var a=t(968681);let n=(0,t(780493).w)(a.default,"CheckIcon")},419771:(e,r,t)=>{t.d(r,{A:()=>s});var a,n=t(325413);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(null,arguments)}let s=function(e){return n.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),a||(a=n.createElement("path",{fill:"currentColor",d:"M18.16 4.46a1 1 0 0 1 1.68 1.081l-9 14a1 1 0 0 1-1.621.084l-5-6.25a1 1 0 0 1 1.562-1.25l4.13 5.163z"})))}},426333:(e,r,t)=>{t.d(r,{V:()=>l});var a=t(325413),n=t(958372);function l(){let e=(0,a.use)(n.r);if(!e)throw Error("usePlatform must be used within PlatformProvider");return e}},428674:(e,r,t)=>{t.d(r,{X:()=>i});var a=t(183031),n=t(488381),l=t(926206),s=t(630298);function i(){let{currentWorkspace:e}=(0,n.j4)(e=>e),r=null==e?void 0:e.id;return(0,a.I)({queryKey:s.workspaceKeys.iapProducts(null!=r?r:""),queryFn:async()=>{var e,t;let a=(0,l.Pg)(),n=await a.get("/workspaces/".concat(r,"/iap/products"));return{creditProductIds:null!=(e=n.credit_product_ids)?e:[],subscriptionProductIds:null!=(t=n.subscription_product_ids)?t:[]}},enabled:!!r})}},437409:(e,r,t)=>{t.d(r,{D:()=>g});var a=t(20097),n=t(488381),l=t(757423),s=t(622323),i=t(875129),o=t(168954),d=t(223591),c=t(740981),u=t(433080),p=t(375896),m=t(187903);let g=e=>{let{selectedPlanId:r,showCreditDifference:t=!0,children:g,workspace:h}=e,{currentPlan:f,proPlanIds:x,bizPlanIds:v}=(0,l.et)(),{giftCardBalanceInDollars:b,hasGiftCardBalance:w}=(0,s.A)(),y=(0,i.B)(),j=(0,n.nu)(e=>e.currentWorkspace),N=(0,d.Q)(f.id,r),{isBizPlan:_}=(0,u.cb)(f.id),C=_?(0,u.LL)(f,v):(0,u.yw)(f.id,x),k=(0,c.Q)(t?null!=h?h:j:null,t?r:void 0,t?C:void 0),P=Math.max(0,N.upgradeCost),E=t&&k.isSuccess?k.amountDue:P,S=t?E:N.selected.price,I=N.selected.currencySymbol,L=Math.max(0,S-b),A=t&&k.isLoading;return(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsxs)("div",{className:(0,p.cn)("flex items-center",g&&"justify-between"),children:[(0,a.jsx)("div",{className:"flex items-center",children:A?(0,a.jsx)(o.E,{className:"my-[7px] h-10 w-24"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{className:"text-4xl font-medium",children:[I,(0,m.Q)(L)]}),(0,a.jsxs)("div",{className:"ml-2 text-base text-foreground",children:[(0,a.jsx)("span",{children:t?"due today":"per month"}),y&&(0,a.jsx)("span",{className:(0,p.cn)("text-xs text-muted-foreground-subtle",g&&"block leading-tight"),children:g?y:" ".concat(y)})]})]})}),g]}),w&&0===L&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Your ",I,(0,m.Q)(b)," gift card balance covers this upgrade"]}),w&&L>0&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["After ",I,(0,m.Q)(b)," gift card credit applied"]})]})}},465338:(e,r,t)=>{t.d(r,{$:()=>p});var a=t(183031),n=t(263048),l=t(325413),s=t(21696),i=t(506286),o=t(926206),d=t(630298),c=t(191115),u=t(640715);let p=e=>{var r,t,p,g,h,f,x,v,b,w,y,j,N,_,C,k;let{isAuthenticated:P,authUser:E}=(0,s.Z2)(),{permitted:S}=(0,i.J)(u.eZ.ViewWorkspaceUsage),{data:I}=(0,a.I)({queryKey:[...d.workspaceKeys.detail(null!=(r=null==e?void 0:e.id)?r:""),"users",null!=(t=null==E?void 0:E.uid)?t:"","monthly-usage"],queryFn:async()=>{if(!(null==e?void 0:e.id)||!(null==E?void 0:E.uid))return{user_monthly_usage:0,max_usage:null};try{let r=(0,o.d0)();return await r.GET("/workspaces/{workspace_id}/user-monthly-usage",{params:{path:{workspace_id:null==e?void 0:e.id}}})}catch(e){return console.error("Error fetching user monthly usage:",e),{user_monthly_usage:0,max_usage:null}}},enabled:!!(null==e?void 0:e.id)&&!!(null==E?void 0:E.uid)&&S}),L=(0,l.useMemo)(()=>{var r,t,a;if(e&&P)return!!((null!=(r=e.credits_granted)?r:0)-e.credits_used>0)||!!((null!=(t=e.topup_credits_used)?t:0)<(null!=(a=e.topup_credits_limit)?a:0))||!!(e.daily_credits_used<e.daily_credits_limit)||!!((e.billing_period_credits_used||0)<e.billing_period_credits_limit)},[e,P]),A=null!=(p=null==e?void 0:e.daily_credits_limit)?p:0,D=null!=(g=null==e?void 0:e.daily_credits_used)?g:0,O=null!=(h=null==e?void 0:e.billing_period_credits_limit)?h:0,T=null!=(f=null==e?void 0:e.billing_period_credits_used)?f:0,F=null!=(x=null==e?void 0:e.topup_credits_used)?x:0,R=null!=(v=null==e?void 0:e.topup_credits_limit)?v:0,M=(null==e?void 0:e.topup_credits_purchased_at)?(0,n.e)((0,c.ay)(e.topup_credits_purchased_at),1):null,W=null!=(b=null==e?void 0:e.rollover_credits_used)?b:0,B=null!=(w=null==e?void 0:e.rollover_credits_limit)?w:0,U=null!=(y=null==e?void 0:e.credits_granted)?y:0,K=null!=(j=null==e?void 0:e.credits_used)?j:0,V=null!=(N=null==e?void 0:e.total_credits_used_in_billing_period)?N:0,z=null!=(_=null==I?void 0:I.max_usage)?_:null;return{dailyCreditLimit:A,dailyCreditsUsed:D,billingPeriodCreditLimit:O,billingPeriodCreditsUsed:T,rolloverCreditsLimit:B,rolloverCreditsUsed:W,topUpCreditsLimit:R,topUpCreditsUsed:F,topUpCreditsExpireDate:M,bonusCreditsLimit:U,bonusCreditsUsed:K,totalCreditsUsedInBillingPeriod:V,areCreditsAvailable:L,billingPeriodEndDate:m(null==e?void 0:e.billing_period_end_date),userMonthlyUsage:null!=(C=null==I?void 0:I.user_monthly_usage)?C:0,maxUserMonthlyUsage:z,hasCreditLimit:null!==z&&z>0,workspaceDefaultLimit:null!=(k=null==e?void 0:e.default_monthly_member_credit_limit)?k:void 0}},m=e=>e?"string"==typeof e?new Date(e):e.toDate():null},468852:(e,r,t)=>{t.d(r,{Label:()=>d});var a=t(20097),n=t(972055),l=t(715165),s=t(325413),i=t(334229);let o=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,r)=>{let{className:t,...l}=e;return(0,a.jsx)(n.b,{ref:r,className:(0,i.cn)(o(),t),...l})});d.displayName=n.b.displayName},479074:(e,r,t)=>{t.d(r,{Am:()=>l,FL:()=>s});var a=t(6442);let n=a.Ikc({bundleId:a.YjP(),version:a.YjP(),platform:a.k5n(["ios","android"]),platformVersion:a.YjP(),deviceModel:a.YjP().optional()});function l(e){try{return n.parse(JSON.parse(e))}catch(e){return null}}function s(e){let r=l(e);if(null==r?void 0:r.platform)return r.platform;let t=e.toLowerCase();return/(^|\s)ios(\s|$)/.test(t)?"ios":/(^|\s)android(\s|$)/.test(t)?"android":null}},488381:(e,r,t)=>{t.d(r,{cA:()=>P,zC:()=>O,Dx:()=>E,lR:()=>T,j4:()=>I,QY:()=>A,nu:()=>L,Ic:()=>D});var a=t(20097),n=t(183031),l=t(400282),s=t(325413),i=t(83245),o=t(602571),d=t(21696),c=t(271308),u=t(834669),p=t(524103),m=t(96324),g=t(539104),h=t(433080),f=t(317525),x=t(501269),v=t(134472),b=t(715429),w=t(951121),y=t(926206),j=t(630298),N=t(757423),_=t(488430),C=t(12412);let k=(0,s.createContext)(null);function P(e){var r,t;let P,{children:E}=e,{allWorkspaces:S,isLoading:I,isInitialized:L}=(0,x.Mu)(e=>({allWorkspaces:e.workspaces,isLoading:e.isLoading,isInitialized:e.isInitialized})),A=(0,s.useMemo)(()=>S.filter(e=>{var r;return!("collaborator"===("membership"in e?null==(r=e.membership)?void 0:r.role:void 0)&&e.enforce_sso&&(!e.external_collaborator_level||"none"===e.external_collaborator_level))}),[S]),D=(0,s.useMemo)(()=>A&&0!==A.length?A.reduce((e,r)=>{var t,a;let n=null!=(t=g.E[(0,h.m6)(e.plan)])?t:0;return(null!=(a=g.E[(0,h.m6)(r.plan)])?a:0)>n?r:e},A[0]):null,[A]),O=(0,l.useSearchParams)(),T=O.get("workspace")||null,F=(0,s.useRef)((0,o.vt)(e=>({currentWorkspace:null,membership:null,hasFetchedCurrentWorkspace:!1,isWorkspaceLoading:!1,projectId:null,projectWorkspaceId:null,currentUserSelectedWorkspaceId:null,currentWorkspaceId:void 0,setProjectWorkspaceOverride:(r,t)=>e({projectId:r,projectWorkspaceId:t}),clearProjectWorkspaceOverride:()=>e({projectId:null,projectWorkspaceId:null}),setCurrentUserSelectedWorkspaceId:r=>e({currentUserSelectedWorkspaceId:r})}))),R=F.current,M=R(e=>e.projectId),W=R(e=>e.projectWorkspaceId),B=!!M&&!!W,U=R(e=>e.currentUserSelectedWorkspaceId),K=(0,p.dA)(e=>e.active),{authUser:V,isAuthenticated:z}=(0,d.Z2)(),{userData:Y}=(0,u.u)(),q=(0,l.useRouter)(),$=(0,l.usePathname)(),G=O.get("workspaceId"),H=(P=null!=(r=null==V?void 0:V.uid)?r:"","".concat("lovable-current-workspace-id","-").concat(P)),[Z,Q]=(0,s.useState)(T),X=B?W:Z;(0,s.useEffect)(()=>{R.setState({currentWorkspaceId:null!=X?X:void 0})},[X,R]);let J=(0,s.useCallback)(e=>{let{projectId:r,projectWorkspaceId:t}=R.getState();r&&t&&(R.getState().clearProjectWorkspaceOverride(),q.push("/")),Q(e),R.getState().setCurrentUserSelectedWorkspaceId(e);try{e&&window.localStorage.setItem(H,e)}catch(r){m.logging.debug("Error setting current workspace id to localstorage",{error:r,newId:e})}},[H,R,q]);(0,s.useEffect)(()=>{if(z)try{let e=window.localStorage.getItem(H);e&&J(e)}catch(e){m.logging.debug("Error getting current workspace id from localstorage",{error:e})}},[H,z,J]);let ee=(0,s.useCallback)(()=>{let e=new URLSearchParams(O);e.delete("workspace");let r=e.toString(),t=window.location.hash,a="".concat($).concat(r?"?".concat(r):"").concat(t);q.replace(a,{scroll:!1})},[q,$,O]),er=(0,s.useRef)(!1);(0,s.useEffect)(()=>{!B&&V&&!I&&L&&(()=>{if(T&&S){if(S.some(e=>e.id===T)){T!==Z&&J(T),ee(),er.current=!0;return}i.toast.error("The workspace you're trying to access is not available"),ee()}if(er.current){!Z&&(null==D?void 0:D.id)&&J(D.id);return}try{let e=window.localStorage.getItem(H);if(e&&S&&S.length>0&&S.some(r=>r.id===e)){J(e),er.current=!0;return}}catch(e){m.logging.debug("Error getting current workspace id from localstorage",{error:e})}if(null==D?void 0:D.id){J(D.id),er.current=!0;return}J(null),er.current=!0})()},[V,S,I,L,T,null==D?void 0:D.id,Z,H,J,ee,B]);let{data:et,isLoading:ea,isError:en}=(0,n.I)({...f.yX.detail({workspaceId:null!=X?X:"",projectId:B?M:void 0}),enabled:!!X&&!K});(0,s.useEffect)(()=>{if(en&&!K&&!B){var e;J(null!=(e=null==D?void 0:D.id)?e:null)}},[en,K,B,null==D?void 0:D.id,J]);let{data:el}=(0,n.I)({...f.yX.detail({workspaceId:null!=G?G:"",projectId:void 0}),enabled:!B&&!!G});!function(e){let{authUser:r,currentWorkspaceId:t,userData:a,isLoadingAllWorkspaces:n,isWorkspacesInitialized:l,currentWorkspace:i,isProjectScoped:o}=e,[d,c]=(0,s.useState)(!1),{toCheckout:u}=(0,_.R)(),p=(0,s.useCallback)(async()=>{if((null==r?void 0:r.uid)&&t&&!d)try{let e=localStorage.getItem(N.LS);if(!e)return;let r=JSON.parse(e),a=Date.now()-r.timestamp;if(localStorage.removeItem(N.LS),a>36e5)return;c(!0),await u({plan:r.planId,workspaceId:t})}catch(e){m.logging.error("Error processing pending plan selection",{error:e,userId:null==r?void 0:r.uid,workspaceId:t}),localStorage.removeItem(N.LS)}},[null==r?void 0:r.uid,t,d,u]);(0,s.useEffect)(()=>{!o&&r&&t&&!n&&l&&!d&&(null==a?void 0:a.segmentation_form_status)===C.C.SUBMITTED&&(null==i?void 0:i.plan)==="free"&&p()},[o,r,null==i?void 0:i.plan,t,n,l,d,p,null==a?void 0:a.segmentation_form_status])}({authUser:V,currentWorkspaceId:Z,userData:null!=Y?Y:null,isLoadingAllWorkspaces:I,isWorkspacesInitialized:L,currentWorkspace:null!=(t=null==et?void 0:et.workspace)?t:null,isProjectScoped:B}),function(e){let{allWorkspaces:r,isLoadingAllWorkspaces:t,isWorkspacesInitialized:a,workspaceDataForUnacceptedInvites:n,setCurrentWorkspaceId:o,authUser:d,isProjectScoped:c}=e,u=(0,l.useRouter)(),p=(0,l.usePathname)(),m=(0,l.useSearchParams)(),g=(0,s.useRef)(new Set),h=m.get("workspaceId"),{store:f}=(0,x.k9)(),N=(0,v.jE)(),_=(0,s.useCallback)(()=>{let e=new URLSearchParams(m);e.delete("workspaceId"),u.replace("".concat(p,"?").concat(e.toString()),{scroll:!1})},[u,p,m]),{mutate:C}=(0,b.n)({mutationFn:async e=>{let r=(0,y.Pg)();return await r.put("/user/workspaces/".concat(e.id,"/accept-invite")),e},onSuccess:e=>{o(e.id),_(),g.current.has(e.id)||(i.toast.success(e.name?'Switched to "'.concat(e.name,'" workspace'):"Switched to workspace"),null==f||f.setState({workspaces:[...r,e]})),g.current.add(e.id)},onError:(e,r)=>{g.current.has(r.id)||(_(),g.current.add(r.id),(0,w.Ni)(e))},onSettled:()=>{N.invalidateQueries({queryKey:j.workspaceKeys.all})},retry:!1});(0,s.useEffect)(()=>{if(!c){if(h&&!d&&!t){let e="".concat(p,"?workspaceId=").concat(h);u.replace("/login?redirect=".concat(encodeURIComponent(e)));return}a&&h&&(null==n?void 0:n.workspace)&&!g.current.has(n.workspace.id)&&C(n.workspace)}},[c,a,t,C,null==n?void 0:n.workspace,h,d,u,p,m])}({allWorkspaces:S,isLoadingAllWorkspaces:I,isWorkspacesInitialized:L,authUser:V,workspaceDataForUnacceptedInvites:null!=el?el:{workspace:null},setCurrentWorkspaceId:J,isProjectScoped:B}),(0,s.useEffect)(()=>{var e,r;let t=!!(null==et?void 0:et.workspace),a=!X&&L&&!I,n=!!X&&!ea&&!(null==et?void 0:et.workspace);F.current.setState({currentWorkspace:null!=(e=null==et?void 0:et.workspace)?e:null,membership:null!=(r=null==et?void 0:et.current_member)?r:null,hasFetchedCurrentWorkspace:t||a||n,isWorkspaceLoading:ea})},[et,ea,X,L,I]),(0,s.useEffect)(()=>{V||(F.current.setState({currentWorkspace:null,membership:null,hasFetchedCurrentWorkspace:!1,isWorkspaceLoading:!1}),er.current=!1)},[V]);let es=(0,c.O)();(0,s.useEffect)(()=>(B?null==es||es.setProjectWorkspaceId(null!=X?X:null):null==es||es.setCurrentWorkspaceId(null!=Z?Z:null),()=>{B?null==es||es.setProjectWorkspaceId(null):null==es||es.setCurrentWorkspaceId(null)}),[Z,X,es,B]);let ei=(0,s.useMemo)(()=>({store:F.current,setCurrentWorkspaceId:J,currentWorkspaceId:X,currentUserSelectedWorkspaceId:U,isProjectScoped:B}),[F.current,B,Z,U,J]);return(0,a.jsx)(k.Provider,{value:ei,children:E})}function E(){let e=(0,s.useContext)(k);if(!e)throw Error("useCurrentWorkspaceContext must be used within a CurrentWorkspaceProvider");return e}function S(){return(0,s.useContext)(k)}function I(e){let{store:r}=E();if(!r)throw Error("useCurrentWorkspaceStore must be used within a CurrentWorkspaceProvider");return r(e)}function L(e){let r=S(),t=null==r?void 0:r.store;return t?t(e):null}function A(){var e;let r=S();return null!=(e=null==r?void 0:r.isProjectScoped)&&e}function D(){let{store:e}=E();if(!e)throw Error("useSetProjectWorkspaceOverride must be used within a CurrentWorkspaceProvider");return e.getState().setProjectWorkspaceOverride}function O(){let{store:e}=E();if(!e)throw Error("useClearProjectWorkspaceOverride must be used within a CurrentWorkspaceProvider");return e.getState().clearProjectWorkspaceOverride}function T(){return I(e=>e.currentWorkspaceId)}k.displayName="WorkspaceContext"},488430:(e,r,t)=>{t.d(r,{d:()=>E,R:()=>P});var a=t(20097),n=t(715429),l=t(400282),s=t(470800),i=t(325413),o=t(83245),d=t(488381),c=t(834669),u=t(501269),p=t(313259),m=t(480695);function g(e){let{open:r,onOpenChange:t,scheduleType:n,onConfirm:l}=e,[s,o]=(0,i.useState)(!1),d=async()=>{o(!0);try{await l()}catch(e){}finally{o(!1)}};return(0,a.jsx)(m.lG,{open:r,onOpenChange:t,children:(0,a.jsxs)(m.Cf,{size:"sm",onInteractOutside:e=>s&&e.preventDefault(),onEscapeKeyDown:e=>s&&e.preventDefault(),children:[(0,a.jsx)(m.c7,{children:(0,a.jsx)(m.L3,{children:"Pending changes will be removed"})}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"cancellation"===n?"Your scheduled cancellation will be removed if you continue.":"Your scheduled plan change will be removed if you continue."}),(0,a.jsxs)(m.Es,{children:[(0,a.jsx)(p.$,{variant:"outline",onClick:()=>t(!1),disabled:s,children:"Keep pending changes"}),(0,a.jsx)(p.$,{onClick:d,loading:s,loadingText:"Removing...",children:"Remove and continue"})]})]})})}var h=t(365588),f=t(951121),x=t(926206),v=t(96324),b=t(816232),w=t(433080),y=t(524107),j=t(163131);let N="billing",_="plan_type",C="redirect",k=(0,i.createContext)(void 0);k.displayName="SubscriptionContext";let P=()=>{let e=(0,i.useContext)(k);if(!e)throw Error("useSubscription must be used within a SubscriptionProvider");return e},E=e=>{let{children:r}=e,[t,p]=(0,i.useState)(!1),[m,P]=(0,i.useState)(!1),[E,S]=(0,i.useState)(!1),[I,L]=(0,i.useState)(!1),A=(0,l.useSearchParams)(),{userData:D}=(0,c.u)(),O=(0,d.nu)(e=>e.currentWorkspace),T=(0,u.Mu)(e=>e.workspaces),[F,R]=(0,i.useState)(null),M=(0,i.useRef)(!1),W=A.get("checkoutCode"),B=null==D?void 0:D.pending_promotion_code,U=W||B||void 0,K=(0,n.n)({mutationFn:async e=>{var r,t;let{plan:a,workspaceId:n,grandfatheredDiscount:l=!1,planType:s="monthly",changeType:i,useStudentDiscount:o=!1}=e;p(a);let d=new URL(window.location.href),c=(e=>{let{currentUrl:r,planId:t,changeType:a}=e,n=new URL(r);return n.searchParams.set("payment_status",j.Yv),n.searchParams.set(j.a_,t),a&&n.searchParams.set(j.wB,a),n.toString()})({currentUrl:d,planId:a,changeType:i}),u=(e=>{let{currentUrl:r,planId:t,planType:a,changeType:n}=e,l=new URL("".concat(window.location.origin).concat("/purchase-success"));if("/profile/plans"===window.location.pathname)l.searchParams.set(C,window.location.origin);else{let e=new URL(r);"/settings"===r.pathname&&r.searchParams.get("tab")===N&&e.searchParams.set("tab",N),n&&e.searchParams.set(j.wB,n),e.searchParams.set(_,a),l.searchParams.set(C,e.toString())}return l.searchParams.set(j.a_,t),l.searchParams.set(_,a),l.toString()})({currentUrl:d,planId:a,planType:s,changeType:i}),m=n===(null==O?void 0:O.id)?O:T.find(e=>e.id===n),g=(0,w.h5)(a,s,m),h=(0,y.D)(),f={price_lookup_key:g,quantity:1,cancel_url:c,success_url:u,client_reference_id:null!=(t=null==(r=window.Rewardful)?void 0:r.referral)?t:void 0,workspace_id:n,with_discount:l,coupon_code:U,use_student_discount:o,tracking_data:h};return(0,x.Pg)().post("/workspaces/".concat(n,"/stripe/checkout"),f)},onSuccess:e=>{window.location.assign(e.url)},onMutate:e=>{let{plan:r}=e;p(r),M.current||s.Ay.capture(b.nA.CREDIT_PLAN_CHECKOUT_CLICKED,{coupon_code:U,new_plan:r})},onError:(e,r)=>{if(M.current){M.current=!1,v.logging.error("error_retrying_checkout_after_schedule_release",{error:e});return}if(e instanceof h.L&&"pending_schedule_conflict"===e.type){var t;R({scheduleType:(null==(t=e.props)?void 0:t.schedule_type)||"plan_change",onConfirm:async()=>{let e=(0,x.Pg)();try{await e.post("/workspaces/".concat(r.workspaceId,"/stripe/cancel-changes"))}catch(e){throw(0,f.Ni)(e),e}try{M.current=!0,await K.mutateAsync(r)}catch(e){(0,f.Ni)(e)}finally{R(null)}}});return}v.logging.error("error_creating_checkout_session",{error:e}),(0,f.Ni)(e)},onSettled:()=>{p(!1),M.current=!1}}),V=async e=>{let{plan:r,workspaceId:t,grandfatheredDiscount:a=!1,planType:n="monthly",changeType:l,useStudentDiscount:s=!1}=e;try{await K.mutateAsync({plan:r,workspaceId:t,grandfatheredDiscount:a,planType:n,changeType:l,useStudentDiscount:s})}catch(e){}},z=async e=>{let{workspaceId:r,returnUrl:t,urlPath:a}=e;try{P(!0);let e=(0,x.Pg)(),n=await e.post("/workspaces/".concat(r,"/stripe/portal-session"),{return_url:null!=t?t:window.location.href}),l=a?n.url+a:n.url;window.location.assign(l)}catch(e){e instanceof h.L&&"network_error"===e.type&&o.toast.error("Network error: Please check your internet connection and try again."),v.logging.error("error_creating_portal_session",{error:e})}finally{P(!1)}},Y=async e=>{let{workspaceId:r}=e;try{S(!0);let e=(0,x.Pg)();await e.post("/workspaces/".concat(r,"/stripe/cancel-subscription")),o.toast.success("Subscription canceled successfully",{description:"Your subscription will remain active until the end of your current billing period."})}catch(e){(0,f.Ni)(e)}finally{S(!1)}},q=async e=>{let{workspaceId:r}=e;try{L(!0);let e=(0,x.Pg)();await e.post("/workspaces/".concat(r,"/stripe/cancel-changes")),o.toast.success("Subscription changes canceled successfully",{description:"Any pending subscription changes have been canceled."})}catch(e){(0,f.Ni)(e)}finally{L(!1)}};return(0,a.jsxs)(k.Provider,{value:{checkoutLoading:t,isCreatePortalSessionLoading:m,isCancelSubscriptionLoading:E,isCancelSubscriptionChangesLoading:I,toCheckout:V,createPortalSession:z,cancelSubscription:Y,cancelSubscriptionChanges:q},children:[r,F&&(0,a.jsx)(g,{open:!0,onOpenChange:()=>R(null),scheduleType:F.scheduleType,onConfirm:F.onConfirm})]})}},494867:(e,r,t)=>{t.d(r,{n:()=>n});var a=t(986304);let n=(0,t(780493).w)(a.default,"PeopleIcon")},506286:(e,r,t)=>{t.d(r,{J:()=>c,S:()=>d});var a=t(183031),n=t(325413),l=t(987707),s=t(21696),i=t(488381),o=t(636010);function d(){let e=(0,o.Fz)(),r=(0,i.j4)(e=>{var r;return null==(r=e.currentWorkspace)?void 0:r.id}),{isAuthenticated:t}=(0,s.Z2)(),{data:d,isLoading:c}=(0,a.I)({...l.w.permissions({workspaceId:r,projectId:e}),enabled:t});return{permissions:(0,n.useMemo)(()=>t&&Array.isArray(d)?d:[],[t,d]),isLoading:c}}function c(e,r){var t,d;let c=(0,o.Fz)(),u=(0,i.j4)(e=>{var r;return null==(r=e.currentWorkspace)?void 0:r.id}),{isAuthenticated:p}=(0,s.Z2)(),m=null!=(t=null==r?void 0:r.workspaceId)?t:u,g=null!=(d=null==r?void 0:r.projectId)?d:c,{data:h,isLoading:f,isFetching:x}=(0,a.I)({...l.w.permissions({workspaceId:m,projectId:g}),enabled:p});return{permitted:(0,n.useMemo)(()=>!!p&&!!Array.isArray(h)&&(Array.isArray(e)?e.some(e=>h.includes(e)):h.includes(e)),[p,h,e]),isLoading:f,isFetching:x}}},518925:(e,r,t)=>{t.d(r,{_:()=>s});var a=t(488381),n=t(426333),l=t(433080);function s(){let{isIOSApp:e}=(0,n.V)(),{currentWorkspace:r}=(0,a.j4)(e=>e),{isEnterprisePlan:t}=(0,l.cb)(null==r?void 0:r.plan);return{mustHidePayments:e,mustUseNativePaywall:e&&!t}}},524107:(e,r,t)=>{t.d(r,{D:()=>n});var a=t(531140);let n=()=>{let e={},r=(0,a.R)("_fbc");r&&(e.fbc=r);let t=(0,a.R)("_fbp");t&&(e.fbp=t);let n=(0,a.R)("_ttp");n&&(e.ttp=n);let l=(0,a.R)("ttclid");return l&&(e.ttclid=l),e}},604937:(e,r,t)=>{t.d(r,{D:()=>n});var a=t(927721);let n=(0,t(780493).w)(a.A,"ChevronDownIcon")},622323:(e,r,t)=>{t.d(r,{A:()=>o});var a=t(183031),n=t(488381),l=t(926206),s=t(706251),i=t(630298);let o=()=>{var e;let r=(0,n.j4)(e=>e.currentWorkspace),t=(0,l.Pg)(),{data:o,isLoading:d}=(0,a.I)({queryKey:i.u_.customerBalance(null!=(e=null==r?void 0:r.id)?e:""),queryFn:async()=>t.get("/workspaces/".concat(null==r?void 0:r.id,"/gift-card/balance")),enabled:!!(null==r?void 0:r.id)}),c=o&&o.balance<0?Math.abs(o.balance):0,u=Math.round(c/100);return{giftCardBalanceInCents:c,giftCardBalanceInDollars:u,giftCardCurrencySymbol:o?(0,s.Qn)(o.currency):"$",hasGiftCardBalance:c>0,isLoading:d}}},625298:(e,r,t)=>{t.d(r,{A:()=>s});var a,n=t(325413);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(null,arguments)}let s=function(e){return n.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),a||(a=n.createElement("path",{fill:"currentColor",d:"M11.526 8.418a.75.75 0 0 1 1.004.052l5 5a.75.75 0 1 1-1.06 1.06L12 10.06l-4.47 4.47a.75.75 0 1 1-1.06-1.06l5-5z"})))}},631325:(e,r,t)=>{t.d(r,{p:()=>s});var a=t(20097),n=t(325413),l=t(375896);let s=n.forwardRef((e,r)=>{let{className:t,type:n,...s}=e;return(0,a.jsx)("input",{type:n,className:(0,l.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base transition-colors duration-150 ease-in-out file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground hover:border-ring/20 focus-visible:border-ring focus-visible:outline-none disabled:cursor-not-allowed disabled:border-input disabled:opacity-50 md:text-sm",t),ref:r,...s})});s.displayName="Input"},636010:(e,r,t)=>{t.d(r,{Fz:()=>c,Iw:()=>s,Vu:()=>d,gI:()=>n,hQ:()=>o,mb:()=>i,rd:()=>l});var a=t(325413);let n=(0,a.createContext)(null);function l(){let e=(0,a.useContext)(n);return null!=e?e:void 0}function s(e){let r=(0,a.useContext)(n);if(!r)throw Error("useProjectStore must be used within a ProjectProvider");return r.store(e)}function i(e){let r=l();return null==r?void 0:r.store(e)}function o(){return{selectedInstance:s(e=>e.selectedCloudInstance),setSelectedInstance:s(e=>e.setSelectedCloudInstance)}}function d(){let e=l();return{selectedInstance:null==e?void 0:e.store(e=>e.selectedCloudInstance),setSelectedInstance:null==e?void 0:e.store(e=>e.setSelectedCloudInstance)}}function c(){return i(e=>e.projectId)}n.displayName="ProjectStoreContext"},640009:(e,r,t)=>{t.d(r,{I:()=>s,Q:()=>i});var a=t(325413);let n=["brand-ocean-primary","brand-twilight-primary","brand-flamingo-primary","brand-bubblegum-primary","brand-saffron-primary","brand-tiger-primary"],l={"brand-ocean-primary":{bg:"bg-brand-ocean-primary",hoverBg:"hover:bg-brand-ocean-primary",hoverBorder:"hover:border-brand-ocean-primary",groupHoverBorder:"group-[.avatars]:hover:border-brand-ocean-primary"},"brand-twilight-primary":{bg:"bg-brand-twilight-primary",hoverBg:"hover:bg-brand-twilight-primary",hoverBorder:"hover:border-brand-twilight-primary",groupHoverBorder:"group-[.avatars]:hover:border-brand-twilight-primary"},"brand-flamingo-primary":{bg:"bg-brand-flamingo-primary",hoverBg:"hover:bg-brand-flamingo-primary",hoverBorder:"hover:border-brand-flamingo-primary",groupHoverBorder:"group-[.avatars]:hover:border-brand-flamingo-primary"},"brand-bubblegum-primary":{bg:"bg-brand-bubblegum-primary",hoverBg:"hover:bg-brand-bubblegum-primary",hoverBorder:"hover:border-brand-bubblegum-primary",groupHoverBorder:"group-[.avatars]:hover:border-brand-bubblegum-primary"},"brand-saffron-primary":{bg:"bg-brand-saffron-primary",hoverBg:"hover:bg-brand-saffron-primary",hoverBorder:"hover:border-brand-saffron-primary",groupHoverBorder:"group-[.avatars]:hover:border-brand-saffron-primary"},"brand-tiger-primary":{bg:"bg-brand-tiger-primary",hoverBg:"hover:bg-brand-tiger-primary",hoverBorder:"hover:border-brand-tiger-primary",groupHoverBorder:"group-[.avatars]:hover:border-brand-tiger-primary"}};function s(e){return l[e]}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"fake-user";return(0,a.useMemo)(()=>{let r=function(e){let r=0x811c9dc5;for(let t=0;t<e.length;t++)r^=e.charCodeAt(t),r=Math.imul(r,0x1000193);return r>>>0}(e)%n.length;return n[r]},[e])}},654142:(e,r,t)=>{t.d(r,{C:()=>o,z:()=>i});var a=t(20097),n=t(185939),l=t(325413),s=t(375896);let i=l.forwardRef((e,r)=>{let{className:t,...l}=e;return(0,a.jsx)(n.bL,{className:(0,s.cn)("grid gap-2",t),...l,ref:r})});i.displayName=n.bL.displayName;let o=l.forwardRef((e,r)=>{let{className:t,...l}=e;return(0,a.jsx)(n.q7,{ref:r,className:(0,s.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),...l,children:(0,a.jsx)(n.C1,{className:"flex items-center justify-center",children:(0,a.jsx)("div",{className:"aspect-square h-2.5 w-2.5 shrink-0 rounded-full bg-primary"})})})});o.displayName=n.q7.displayName},659690:(e,r,t)=>{t.r(r),t.d(r,{default:()=>s});var a,n=t(325413);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(null,arguments)}let s=function(e){return n.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),a||(a=n.createElement("path",{fill:"currentColor",d:"M19.25 6.693a.25.25 0 0 0-.162-.234l-7-2.625a.25.25 0 0 0-.176 0l-7 2.625a.25.25 0 0 0-.162.234V12c0 2.682 1.561 4.738 3.344 6.164a13 13 0 0 0 2.554 1.595c.375.176.7.305.954.387.28.092.4.104.398.104s.119-.012.398-.104c.253-.082.58-.21.954-.387.751-.354 1.668-.886 2.554-1.595C17.69 16.738 19.25 14.681 19.25 12zM20.75 12c0 3.319-1.939 5.762-3.906 7.336-.99.791-2.01 1.384-2.853 1.78a10 10 0 0 1-1.128.456c-.294.096-.61.178-.863.178s-.569-.082-.863-.178a10 10 0 0 1-1.128-.456 14.6 14.6 0 0 1-2.853-1.78C5.19 17.762 3.25 15.319 3.25 12V6.693c0-.73.453-1.382 1.136-1.638l7-2.625a1.75 1.75 0 0 1 1.228 0l7 2.625a1.75 1.75 0 0 1 1.136 1.638z"})))}},667773:(e,r,t)=>{t.d(r,{t:()=>n});var a=t(419771);let n=(0,t(780493).w)(a.A,"CheckMediumIcon")},681957:(e,r,t)=>{t.d(r,{l:()=>n});var a=t(659690);let n=(0,t(780493).w)(a.default,"ShieldIcon")},737318:(e,r,t)=>{t.d(r,{O:()=>i});var a=t(20097),n=t(918985),l=t(168954),s=t(375896);let i=e=>{let{showEnterpriseCard:r=!1,className:t}=e;return(0,a.jsxs)("div",{className:(0,s.cn)("flex w-full flex-col gap-4",t),children:[(0,a.jsxs)("div",{className:"grid w-full grid-cols-1 gap-5 sm:grid-cols-3",children:[(0,a.jsxs)(n.Zp,{className:"flex h-full flex-col gap-3 px-4 py-6",children:[(0,a.jsx)(l.E,{className:"h-6 w-24"}),(0,a.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,a.jsx)(l.E,{className:"h-9 w-20"}),(0,a.jsx)(l.E,{className:"h-5 w-16"})]}),(0,a.jsx)(l.E,{className:"h-4 w-full"}),(0,a.jsx)(l.E,{className:"mb-2 h-9 w-full"}),(0,a.jsx)(l.E,{className:"h-9 w-full"}),(0,a.jsxs)("div",{className:"mt-2 flex flex-col gap-4",children:[(0,a.jsx)(l.E,{className:"h-4 w-32"}),(0,a.jsx)("div",{className:"flex flex-col gap-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(l.E,{className:"h-4 w-4"}),(0,a.jsx)(l.E,{className:"h-4 w-full"})]})})]})]}),(0,a.jsxs)(n.Zp,{className:"flex h-full flex-col gap-3 px-4 py-6",children:[(0,a.jsx)(l.E,{className:"h-6 w-24"}),(0,a.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,a.jsx)(l.E,{className:"h-9 w-20"}),(0,a.jsx)(l.E,{className:"h-5 w-16"})]}),(0,a.jsx)(l.E,{className:"h-4 w-full"}),(0,a.jsx)(l.E,{className:"mb-2 h-9 w-full"}),(0,a.jsx)(l.E,{className:"h-9 w-full"}),(0,a.jsxs)("div",{className:"mt-2 flex flex-col gap-4",children:[(0,a.jsx)(l.E,{className:"h-4 w-32"}),(0,a.jsx)("div",{className:"flex flex-col gap-4",children:[1,2,3,4,5].map(e=>(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(l.E,{className:"h-4 w-4"}),(0,a.jsx)(l.E,{className:"h-4 w-full"})]},e))})]})]}),(0,a.jsxs)(n.Zp,{className:"flex h-full flex-col gap-3 px-4 py-6",children:[(0,a.jsx)(l.E,{className:"h-6 w-24"}),(0,a.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,a.jsx)(l.E,{className:"h-9 w-20"}),(0,a.jsx)(l.E,{className:"h-5 w-16"})]}),(0,a.jsx)(l.E,{className:"h-4 w-full"}),(0,a.jsx)(l.E,{className:"mb-2 h-9 w-full"}),(0,a.jsx)(l.E,{className:"h-9 w-full"}),(0,a.jsxs)("div",{className:"mt-2 flex flex-col gap-4",children:[(0,a.jsx)(l.E,{className:"h-4 w-32"}),(0,a.jsx)("div",{className:"flex flex-col gap-4",children:[1,2,3].map(e=>(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(l.E,{className:"h-4 w-4"}),(0,a.jsx)(l.E,{className:"h-4 w-full"})]},e))})]})]})]}),r&&(0,a.jsxs)(n.Zp,{className:"flex w-full flex-col items-center justify-between gap-4 px-4 py-6 md:flex-row",children:[(0,a.jsxs)("div",{className:"flex flex-shrink flex-col gap-2",children:[(0,a.jsx)(l.E,{className:"h-6 w-32"}),(0,a.jsx)(l.E,{className:"h-4 w-64"})]}),(0,a.jsx)(l.E,{className:"h-9 w-36"})]})]})}},740981:(e,r,t)=>{t.d(r,{Q:()=>m,t:()=>p});var a=t(183031),n=t(757423),l=t(926206),s=t(568482),i=t(862021),o=t(433080),d=t(630298);function c(e,r,t){if(!e)return null;try{return(0,o.h5)(e,r,t)}catch(e){return null}}function u(e,r,t){var n;return(0,a.I)({queryKey:d.T7.upgradePreview(null!=(n=null==e?void 0:e.id)?n:"",null!=r?r:""),queryFn:async()=>{if(!(null==e?void 0:e.id)||!r)throw Error("Missing workspace ID or target plan key");return(0,l.d0)().GET("/workspaces/{workspace_id}/subscription/upgrade-preview",{params:{path:{workspace_id:e.id},query:{target_plan_key:r}}})},enabled:t&&!!(null==e?void 0:e.id)&&!!r,gcTime:6e4,staleTime:1/0,retry:!1})}function p(e,r,t){let a=(0,i.aX)(s.TO.StripeUpgradePreview),{isPaidPlan:n}=(0,o.cb)(null==e?void 0:e.plan),l=!!(null==e?void 0:e.plan)&&n,d=!!(null==e?void 0:e.subscription_status),p=null==e?void 0:e.plan_type,m=!p||p===t,g=r!==(null==e?void 0:e.plan),h=c(r,t,e);u(e,h,a&&l&&d&&m&&g&&!!h)}function m(e,r,t){var a,l,d,p,m,g,h,f,x,v,b,w,y;let{planType:j,getDisplayPrice:N,currentPlan:_}=(0,n.et)(),C=(0,i.aX)(s.TO.StripeUpgradePreview),{isPaidPlan:k}=(0,o.cb)(null==e?void 0:e.plan),P=!!(null==e?void 0:e.plan)&&k,E=N(_.id),S=Math.max(0,(r?N(r):0)-E),I=null==e?void 0:e.plan_type,L=!I||I===j,A=!!(null==e?void 0:e.subscription_status),D=C&&P&&A&&L,O=c(r,j,e),T=c(t,j,e),F=Math.max(0,(t?N(t):0)-E),R=t!==_.id,M=u(e,T,D&&R&&!!T),W=(null==(a=M.data)?void 0:a.amount_due)!=null?M.data.amount_due/100:null,B=M.isSuccess&&(null==(l=M.data)?void 0:l.amount_due)===Math.round(100*F),U=u(e,O,D&&!B&&O!==T);return!D||B||M.isError?{amountDue:S,currency:null!=(h=null==(g=M.data)?void 0:g.currency)?h:"usd",isLoading:!1,isSuccess:!0,error:null}:O===T?{amountDue:null!=W?W:S,currency:null!=(x=null==(f=M.data)?void 0:f.currency)?x:"usd",isLoading:M.isLoading,isSuccess:M.isSuccess,error:null}:U.isError?{amountDue:S,currency:null!=(b=null==(v=M.data)?void 0:v.currency)?b:"usd",isLoading:!1,isSuccess:!0,error:null}:{amountDue:(null==(d=U.data)?void 0:d.amount_due)!=null?U.data.amount_due/100:S,currency:null!=(y=null!=(w=null==(p=U.data)?void 0:p.currency)?w:null==(m=M.data)?void 0:m.currency)?y:"usd",isLoading:M.isLoading||U.isLoading,isSuccess:U.isSuccess,error:null}}},757423:(e,r,t)=>{t.d(r,{LS:()=>eh,ET:()=>ex,et:()=>ev});var a=t(20097),n=t(134472),l=t(470800),s=t(325413),i=t(83245),o=t(145010),d=t(936617),c=t(981853),u=t(433080);let p={PRO_TO_PRO_UPGRADE:{title:"Add more credits",subtitle:"Here's what happens if you upgrade:",showCreditDifference:!0,showWhatsChanging:!1,showPlanFeatures:!1,showNextBillingCycle:!0,showPlanDropdown:!0},PRO_TO_BIZ_UPGRADE:{title:"Upgrade to Business",subtitle:"Here's what happens if you upgrade:",showCreditDifference:!0,showWhatsChanging:!0,showPlanFeatures:!1,showNextBillingCycle:!0,showPlanDropdown:!0},BIZ_TO_BIZ_UPGRADE:{title:"Add more credits",subtitle:"Here's what happens if you upgrade:",showCreditDifference:!0,showWhatsChanging:!1,showPlanFeatures:!1,showNextBillingCycle:!0,showPlanDropdown:!0}},m=e=>{let{targetPlan:r,scenario:t}=e,{currentPlan:n,proPlanIds:l,bizPlanIds:s}=ev(),i=p[t],o=(0,c.Y)({currentPlan:n,targetPlanCategory:(0,u.m6)(r),proPlanIds:l,bizPlanIds:s});return(0,a.jsx)(d.n,{targetPlan:r,availablePlans:o,title:i.title,subtitle:i.subtitle,showCreditDifference:i.showCreditDifference,showWhatsChanging:i.showWhatsChanging,showPlanFeatures:i.showPlanFeatures,showNextBillingCycle:i.showNextBillingCycle,showPlanDropdown:i.showPlanDropdown})};var g=t(480695),h=t(488430),f=t(728277),x=t(617146),v=function(e){return e.SUGGEST_LOWER_PLAN="SUGGEST_LOWER_PLAN",e.FEATURES_TO_TRY="FEATURES_TO_TRY",e.KTLO_OFFER="KTLO_OFFER",e.FEEDBACK="FEEDBACK",e.VIDEO="VIDEO",e.FINAL_CONFIRMATION="FINAL_CONFIRMATION",e}({});let b=(0,s.createContext)(void 0);b.displayName="DowngradeContext";let w=e=>{var r;let{children:t,targetPlan:n,onCancel:l,workspace:i}=e,o=i.plan!==x.G.KTLO&&n===f.VL.FREE,d=(0,s.useCallback)(()=>o?v.KTLO_OFFER:v.FEEDBACK,[o]),c=(0,s.useMemo)(()=>d(),[d]),[u,p]=(0,s.useState)(c),[m,g]=(0,s.useState)({reason:""}),[w,y]=(0,s.useState)(!1),j=ev(),{toCheckout:N}=(0,h.R)(),_=async e=>{y(!0);try{let r=null!=e?e:n;(null==i?void 0:i.id)&&(r&&r!==f.VL.FREE?await N({plan:r,workspaceId:i.id,grandfatheredDiscount:!1,planType:j.planType,changeType:"downgrade"}):(await j.cancelSubscription(),l()))}finally{y(!1)}},C=async()=>{y(!0);try{(null==i?void 0:i.id)&&await N({plan:f.VL.KTLO_2,workspaceId:i.id,grandfatheredDiscount:!1,planType:"monthly",changeType:"downgrade"})}catch(e){y(!1)}},k={currentStep:u,feedback:m,currentPlan:null!=(r=i.plan)?r:f.VL.FREE,targetPlan:null!=n?n:f.VL.FREE,shouldShowKtloOffer:o,setCurrentStep:p,setFeedback:g,onCancel:l,onConfirm:_,onSwitchToKtlo:C,isLoading:w||j.isCancelSubscriptionLoading,getNextStepAfterSuggestLowerPlan:()=>v.FEATURES_TO_TRY,getNextStepAfterFeatures:d,getNextStepAfterKtlo:()=>v.FEEDBACK,getNextStepAfterFeedback:()=>n===f.VL.FREE?v.VIDEO:v.FINAL_CONFIRMATION,getNextStepAfterVideo:()=>v.FINAL_CONFIRMATION};return(0,a.jsx)(b.Provider,{value:k,children:t})},y=()=>{let e=(0,s.useContext)(b);if(void 0===e)throw Error("useDowngrade must be used within a DowngradeProvider");return e};var j=t(313259),N=t(631325),_=t(468852),C=t(654142),k=t(816232),P=t(375896);let E=[{value:"technical_issues",label:"I am having too many technical issues"},{value:"too_expensive",label:"It's too expensive"},{value:"not_using",label:"I'm not using Lovable enough"},{value:"missing_features",label:"It's missing features"},{value:"switched_to_competitor",label:"I switched to a competitor"},{value:"other",label:"Other reason"}];var S=t(255483);let I=e=>{let{title:r,description:t}=e;return(0,a.jsxs)("div",{className:"flex flex-col items-start gap-4",children:[(0,a.jsx)(S.LovableLogoColor,{className:"h-9"}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(g.L3,{className:"text-2xl font-medium md:text-3xl",children:r}),t&&(0,a.jsx)(g.rr,{className:"text-base text-muted-foreground",children:t})]})]})},L=()=>{let e=y();return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsx)(I,{title:"Why are you downgrading?",description:"We use this information to improve our product."}),(0,a.jsx)(C.z,{value:e.feedback.reason,onValueChange:r=>e.setFeedback({...e.feedback,reason:r}),className:"flex flex-col gap-1",children:E.map(r=>(0,a.jsxs)("div",{className:(0,P.cn)("flex cursor-pointer items-center gap-3 rounded-lg px-4 py-3 transition-colors",e.feedback.reason===r.value?"bg-primary/5":"hover:bg-muted/50"),onClick:()=>e.setFeedback({...e.feedback,reason:r.value}),children:[(0,a.jsx)(C.C,{value:r.value,id:r.value}),(0,a.jsx)(_.Label,{htmlFor:r.value,className:"text-base font-normal leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:r.label})]},r.value))}),(0,a.jsx)(N.p,{placeholder:"Tell us more about your decision...",className:"h-12",maxLength:500,value:e.feedback.additionalNotes,onChange:r=>e.setFeedback({...e.feedback,additionalNotes:r.target.value})}),(0,a.jsxs)("div",{className:"flex flex-col gap-4 pt-2",children:[(0,a.jsx)(j.$,{intent:"affirmative",className:"w-full",onClick:()=>{l.Ay.capture(k.rz.FEEDBACK.KEEP_PLAN_CLICKED),e.onCancel()},children:"Keep current plan"}),(0,a.jsx)(j.$,{variant:"outline",className:"w-full",onClick:()=>{l.Ay.capture(k.rz.FEEDBACK.CONTINUE_CLICKED,{reason:e.feedback.reason}),e.setCurrentStep(e.getNextStepAfterFeedback())},children:"Downgrade plan"})]})]})})};var A=t(715429),D=t(6442),O=t(388952),T=t(745784),F=t(926206),R=t(96324);let M=e=>{let{children:r,className:t}=e;return(0,a.jsx)("div",{className:(0,P.cn)("rounded-xl border bg-background p-5",t),children:r})},W=D.Ikc({reason:D.YjP().optional(),additional_notes:D.YjP().max(500,"Additional notes must be less than 500 characters").optional()}),B=()=>{let e=y(),r=(0,F.Pg)(),t=(0,A.n)({mutationFn:async()=>{let t=W.parse({reason:e.feedback.reason,additional_notes:e.feedback.additionalNotes});await r.post("/user/cancellation",t),await e.onConfirm()},onSuccess:()=>{l.Ay.capture(k.rz.FINAL_CONFIRMATION.CONFIRM_CLICKED,{from_plan:e.currentPlan,to_plan:e.targetPlan})},onError:e=>{if(R.logging.error("Error submitting feedback:",e),e instanceof D.GaX){let r=e.issues[0];i.toast.error("Validation Error",{description:r.message})}else{var r;i.toast.error("Error",{description:(null==(r=e.data)?void 0:r.detail)||"Failed to submit feedback"})}}}),n=((e,r)=>{let t=(0,u.m6)(e),a=(0,u.m6)(r),n=(0,u.RL)(e),l=(0,u.RL)(r);if("pro"===t){if("pro"===a)return[{text:"Credit limit will decrease from ".concat(n," to ").concat(l," per month"),isPositive:!1},{text:"Credit rollover maximum will be ".concat(l," from next month"),isPositive:!1},{text:"You keep all of your current Pro plan features",isPositive:!0}];if("free"===a)return[{text:"A Lovable badge will be added to all new projects",isPositive:!1},{text:"You will lose team management features",isPositive:!1},{text:"Custom domains will be removed",isPositive:!1},{text:"Monthly credit limit will decrease from ".concat(n," to 0"),isPositive:!1},{text:"Credit rollover will be disabled",isPositive:!1}]}if("biz"===t){if("biz"===a)return[{text:"Credit limit will decrease from ".concat(n," to ").concat(l," per month"),isPositive:!1},{text:"Credit rollover maximum will be ".concat(l," from next month"),isPositive:!1},{text:"You keep all of your current Business plan features",isPositive:!0}];if("pro"===a)return[{text:"No SSO",isPositive:!1},{text:"No design templates",isPositive:!1},{text:"No data opt out",isPositive:!1},{text:"No personal projects",isPositive:!1},{text:"Credit limit will decrease from ".concat(n," to ").concat(l," per month"),isPositive:!1},{text:"Credit rollover maximum will be ".concat(l," from next month"),isPositive:!1},{text:"You keep all of your current Pro plan features",isPositive:!0}];if("free"===a)return[{text:"No SSO",isPositive:!1},{text:"No design templates",isPositive:!1},{text:"No data opt out",isPositive:!1},{text:"No personal projects",isPositive:!1},{text:"A Lovable badge will be added to all new projects",isPositive:!1},{text:"You will lose team management features",isPositive:!1},{text:"Custom domains will be removed",isPositive:!1},{text:"Monthly credit limit will decrease from ".concat(n," to 0"),isPositive:!1},{text:"Credit rollover will be disabled",isPositive:!1}]}return"ktlo"===a?[{text:"Credits will change from ".concat(n," per month to freemium (").concat(5," per day, up to 30 per month)"),isPositive:!1},{text:"No credit rollovers",isPositive:!1},{text:"You keep: Pro features: Private Projects, No Lovable Badge, Roles and Permissions, Custom Domains",isPositive:!0}]:[]})(e.currentPlan,e.targetPlan);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I,{title:"Continue downgrading?",description:"Keep your momentum. Finish your project. You can do it."}),(0,a.jsxs)(M,{children:[(0,a.jsx)("div",{className:"mb-4 text-lg font-medium",children:"Here is what will change if you downgrade:"}),(0,a.jsxs)("ul",{className:"flex flex-col gap-4",children:[0===n.length&&(0,a.jsxs)("li",{className:"flex items-start gap-3",children:[(0,a.jsx)(T.u,{className:"size-5"}),(0,a.jsx)("span",{children:"Features of your current plan"})]}),n.map((e,r)=>(0,a.jsxs)("li",{className:"flex items-start gap-3",children:[e.isPositive?(0,a.jsx)(O.S,{className:"size-5 text-green-600"}):(0,a.jsx)(T.u,{className:"size-5 text-muted-foreground"}),(0,a.jsx)("span",{children:e.text})]},r))]}),(0,a.jsx)(j.$,{variant:"outline",className:"mt-4 w-full",onClick:()=>{l.Ay.capture(k.rz.FINAL_CONFIRMATION.KEEP_PLAN_CLICKED),e.onCancel()},children:"Keep current plan"})]}),(0,a.jsx)(j.$,{intent:"destructive",className:"w-full",onClick:()=>t.mutate(),loading:t.isPending,children:"Confirm downgrade"})]})};var U=t(875129),K=t(419442);let V=()=>{let e=y(),{getCurrencySymbolForPlan:r,subscriptionCurrency:t,currentPlan:n}=ev(),{isPaidPlan:s}=(0,u.cb)(n.id),i=f.VL.KTLO_2,o=r(i),d=(0,K.Lu)(t,s),c=(0,u.jL)({id:i,type:"monthly"},d),p=(0,u.jL)({id:f.VL.PRO_1,type:"monthly"},d),m=Math.round((p-c)/p*100),g=async()=>{l.Ay.capture(k.rz.KTLO_OFFER.SWITCH_CLICKED,{plan_price:c}),await e.onSwitchToKtlo()};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I,{title:"Switch to Lite",description:"Try our new Lite plan and retain important features that keep your project going."}),(0,a.jsxs)(M,{children:[(0,a.jsx)("div",{className:"mb-2 text-lg font-medium",children:"Lite plan"}),(0,a.jsxs)("div",{className:"mb-1 flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-3xl font-medium md:text-4xl",children:[o,c]}),(0,a.jsxs)("span",{className:"text-base font-medium text-muted-foreground",children:["per month ",(0,a.jsx)(U.n,{})]}),(0,a.jsxs)("span",{className:"rounded bg-success px-2 py-0.5 text-xs text-success-foreground",children:[m,"% off"]})]}),(0,a.jsx)("ul",{className:"mt-4 flex flex-col gap-3",children:["5 daily credits","Keep custom domains","No Lovable badge","Team settings stay in place"].map((e,r)=>(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)(O.S,{className:"size-5"}),(0,a.jsx)("span",{children:e})]},r))}),(0,a.jsx)(j.$,{className:"mt-6 w-full",intent:"affirmative",onClick:g,loading:e.isLoading,children:"Switch to Lite"})]}),(0,a.jsx)(j.$,{variant:"outline",className:"w-full",onClick:()=>{l.Ay.capture(k.rz.KTLO_OFFER.CONTINUE_DOWNGRADE_CLICKED,{plan_price:c}),e.setCurrentStep(e.getNextStepAfterKtlo())},children:"Downgrade plan"})]})};var z=t(944060),Y=t(315633),q=t(359674),$=t(895900),G=t(494867),H=t(681957);let Z=[{id:"custom-domains",name:"Custom domains",description:"Connect your own domain to your projects",icon:q.q},{id:"team-collab",name:"Team collaboration",description:"Invite team members to work together",icon:G.n},{id:"visual-editor",name:"Visual editor",description:"Edit the frontend of your project instantly",icon:z.q},{id:"code-editor",name:"Code editor",description:"Edit the backend of your project in code",icon:Y.l},{id:"chat-mode",name:"Chat mode",description:"Plan your next step with AI",icon:$.Y},{id:"security-checks",name:"Security checks",description:"Run checks when publishing with Supabase to find and fix vulnerabilities",icon:H.l}],Q=()=>{let e=y();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I,{title:"Have you tried these features?"}),(0,a.jsxs)(M,{children:[(0,a.jsx)("div",{className:"flex flex-col gap-1.5 md:gap-2",children:Z.map(e=>{let r=e.icon;return(0,a.jsxs)("div",{className:"flex items-start gap-3 rounded-lg px-2 py-2 transition-colors md:gap-4 md:px-3",children:[(0,a.jsx)("span",{className:"mt-1.5 select-none text-base md:mt-2 md:text-lg",children:(0,a.jsx)(r,{size:"small"})}),(0,a.jsxs)("div",{className:"flex flex-1 flex-col gap-0.5",children:[(0,a.jsx)(_.Label,{htmlFor:e.id,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:e.description})]})]},e.id)})}),(0,a.jsxs)(j.$,{intent:"affirmative",className:"mt-4 w-full",onClick:()=>{l.Ay.capture(k.rz.FEATURE_USAGE.KEEP_PLAN_CLICKED),e.onCancel()},children:["Keep Lovable ",(0,u._R)(e.currentPlan)]})]}),(0,a.jsx)(j.$,{variant:"outline",onClick:()=>{l.Ay.capture(k.rz.FEATURE_USAGE.CONTINUE_CLICKED),e.setCurrentStep(e.getNextStepAfterFeatures())},children:"Downgrade plan"})]})};var X=t(488381),J=t(358679),ee=t(168954),er=t(539104);let et=()=>{let e=y(),r=ev(),{proPlanIds:t,bizPlanIds:n,setPlanType:i}=r,o=(0,X.j4)(e=>e.currentWorkspace),{isEnterprisePlan:d}=(0,u.cb)(r.currentPlan.id),c=(0,s.useMemo)(()=>{let r=e.currentPlan.startsWith(er.lV)?n:t;return(0,u.e3)(e.currentPlan,r)},[e.currentPlan,t,n]),p=(0,s.useMemo)(()=>(null==o?void 0:o.plan)&&c.length>0&&!c.some(e=>e===(null==o?void 0:o.plan))?c[0]:null,[c,null==o?void 0:o.plan]),[m,g]=(0,s.useState)(p);(0,s.useEffect)(()=>{i("monthly")},[i]),(0,s.useEffect)(()=>{(null==o?void 0:o.plan)&&!m&&e.setCurrentStep(e.getNextStepAfterSuggestLowerPlan())},[null==o?void 0:o.plan,m,e]);let h=async()=>{m&&(l.Ay.capture(k.rz.SUGGEST_LOWER_PLAN.DOWNGRADE_CREDITS_CLICKED,{current_plan_id:e.currentPlan,target_plan_id:m,target_plan_type:r.planType,plan_price:r.getDisplayPrice(m)}),await e.onConfirm(m))};return m?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I,{title:"Downgrade now",description:"Do you want to downgrade by changing your monthly credits?"}),(0,a.jsxs)(M,{children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("div",{className:"text-lg font-medium",children:"Reduce monthly credits"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-3xl font-medium md:text-4xl",children:[r.getCurrencySymbolForPlan(m),r.getDisplayPrice(m)]}),(0,a.jsx)("span",{className:"text-base font-medium text-muted-foreground",children:"per month"})]}),(0,a.jsx)(J.h,{options:c,selectedOption:m,disabled:!r.canManageWorkspaceBilling,onSelect:g})]}),(0,a.jsx)(j.$,{className:"mt-4 w-full",intent:"affirmative",disabled:m===e.currentPlan||d||!r.canManageWorkspaceBilling,onClick:h,loading:e.isLoading,children:"Downgrade credits"})]}),(0,a.jsx)(j.$,{variant:"outline",onClick:()=>{l.Ay.capture(k.rz.SUGGEST_LOWER_PLAN.CONTINUE_CLICKED),e.setCurrentStep(e.getNextStepAfterSuggestLowerPlan())},children:"Downgrade plan"})]}):(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)(ee.E,{className:"h-16 w-full"})})},ea=()=>{let e=y();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I,{title:"Before you go...",description:"Keep your momentum. Finish your project. You can do it."}),(0,a.jsxs)("div",{className:"relative aspect-video w-full overflow-hidden rounded-lg",children:[(0,a.jsx)(ee.E,{className:"absolute inset-0 h-full w-full rounded-lg"}),(0,a.jsx)("iframe",{className:"absolute inset-0 h-full w-full",src:"https://www.youtube.com/embed/3Wemd18YUqs?autoplay=1",title:"YouTube video",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})]}),(0,a.jsxs)("div",{className:"mt-4 flex w-full flex-col gap-4",children:[(0,a.jsxs)(j.$,{intent:"affirmative",className:"w-full",onClick:()=>{var r,t;l.Ay.capture(null!=(t=null==(r=k.rz.VIDEO)?void 0:r.KEEP_PLAN_CLICKED)?t:"downgrade_video_keep_plan_clicked"),e.onCancel()},children:["Keep Lovable ",(0,u._R)(e.currentPlan||"unknown")]}),(0,a.jsx)(j.$,{variant:"outline",className:"w-full",onClick:()=>{l.Ay.capture(k.rz.VIDEO.CONTINUE_CLICKED),e.setCurrentStep(e.getNextStepAfterVideo())},children:"Continue downgrade"})]})]})},en=()=>{let e=y();return(0,a.jsx)(a.Fragment,{children:(()=>{switch(e.currentStep){case v.SUGGEST_LOWER_PLAN:return(0,a.jsx)(et,{});case v.FEATURES_TO_TRY:return(0,a.jsx)(Q,{});case v.KTLO_OFFER:return(0,a.jsx)(V,{});case v.FEEDBACK:return(0,a.jsx)(L,{});case v.VIDEO:return(0,a.jsx)(ea,{});case v.FINAL_CONFIRMATION:return(0,a.jsx)(B,{});default:return null}})()})},el=e=>{let{workspace:r,onClose:t}=e,{targetDowngradePlan:n,setTargetDowngradePlan:l}=ev();return(0,a.jsx)(g.Cf,{className:"pointer-events-auto flex max-h-[95vh] flex-col gap-4 overflow-y-auto outline-none",children:(0,a.jsx)(w,{targetPlan:null!=n?n:void 0,onCancel:()=>{l(null),t()},workspace:r,children:(0,a.jsx)(en,{})})})};var es=t(762296),ei=t(568482),eo=t(862021),ed=t(928304),ec=t(630298),eu=t(640715),ep=t(706251),em=t(21696),eg=t(506286);let eh="pendingPlanSelection",ef=(0,s.createContext)(void 0);ef.displayName="PricingContext";let ex=e=>{let{children:r,pricingScenario:t}=e,d=(0,n.jE)(),c=(0,X.j4)(e=>e.currentWorkspace),p=(0,ed.JY)(),{state:g,authUser:x}=(0,em.Z2)(),v=(0,eo.B3)(ei.aj.RegionalPro0),b=null!==g&&!!x&&((0,u.IB)(p)||(null==c?void 0:c.plan)===f.VL.PRO_0||(null==c?void 0:c.plan_scheduled)===f.VL.PRO_0),w=(0,s.useMemo)(()=>b?(0,f.tR)((0,u.cz)(v,null==c?void 0:c.plan)):(0,f.tR)(er.pB),[b,v,null==c?void 0:c.plan]),y=(0,X.Dx)(),{toCheckout:j,createPortalSession:N,checkoutLoading:_,isCreatePortalSessionLoading:C,cancelSubscription:P,isCancelSubscriptionLoading:E,cancelSubscriptionChanges:S,isCancelSubscriptionChangesLoading:I}=(0,h.R)(),[L,A]=(0,s.useState)(null!=t?t:"billing"),D="newWorkspace"===t?null:(0,u.uR)(null==c?void 0:c.subscription_currency,null==c?void 0:c.plan),O="newWorkspace"!==t&&(0,u.cb)(null==c?void 0:c.plan).isPaidPlan,T=(0,s.useCallback)(async e=>{(null==c?void 0:c.id)?await N({workspaceId:c.id,returnUrl:null==e?void 0:e.returnUrl,urlPath:null==e?void 0:e.urlPath}):i.toast.error("Something went wrong.",{description:"Please, refresh the page and try again."})},[N,null==c?void 0:c.id]),F=(0,s.useCallback)(async(e,r)=>{(null==c?void 0:c.id)?(await e({workspaceId:c.id}),(null==y?void 0:y.store)&&y.store.setState({currentWorkspace:{...c,...r(c)}}),await new Promise(e=>setTimeout(async()=>{await d.invalidateQueries({queryKey:ec.workspaceKeys.all}),e(void 0)},1e3))):i.toast.error("Something went wrong.",{description:"Please, refresh the page and try again."})},[c,null==y?void 0:y.store,d]),R=(0,s.useCallback)(()=>F(P,()=>({plan_scheduled:f.VL.FREE,plan_type_scheduled:void 0})),[F,P]),M=(0,s.useCallback)(()=>F(S,()=>({plan_scheduled:void 0,plan_type_scheduled:void 0})),[F,S]),W=(0,s.useMemo)(()=>{var e,r;return{id:null!=(e=null==c?void 0:c.plan)?e:f.VL.FREE,type:null!=(r=null==c?void 0:c.plan_type)?r:"monthly"}},[c]),B=(0,s.useMemo)(()=>{if(null==c?void 0:c.plan_scheduled){var e,r;return{id:null!=(e=null==c?void 0:c.plan_scheduled)?e:f.VL.FREE,type:null!=(r=null==c?void 0:c.plan_type_scheduled)?r:"monthly"}}},[c]),U="loggedOut"===L,{isFreePlan:V,isLitePlan:z,isLegacyPlan:Y}=(0,u.cb)(W.id),{isLitePlan:q}=(0,u.cb)(null==B?void 0:B.id),$=.2*!!Y,[G,H]=(0,s.useState)(W.type),Z="newWorkspace"===t,Q=(0,s.useMemo)(()=>Z?w[0]:(0,u.yw)(W.id,w),[W,w,Z]),J=(0,f.pS)(er.mR),ee=(0,s.useMemo)(()=>Z?J[0]:(0,u.LL)(W,J),[W,J,Z]),[et,ea]=(0,s.useState)(Q),[en,ex]=(0,s.useState)(ee),ev=(0,s.useMemo)(()=>z?W.id:q&&B?B.id:f.VL.KTLO,[z,q,W.id,B]),[eb,ew]=(0,s.useState)(null),[ey,ej]=(0,s.useState)(w[0]);(0,s.useEffect)(()=>{ea(Q),ex(ee),ew(null),H(W.type)},[Q,ee,L,W]);let eN=(0,s.useCallback)(e=>{let r=(0,K.Lu)(D,O);return(0,u.jL)({id:e,type:G},r)},[G,D,O]),e_=(0,s.useCallback)(()=>(0,K.N3)(D,O),[D,O]),eC=(0,s.useCallback)(e=>{let r=(0,K.Lu)(D,O),t=(0,u.Tt)(e,r);return(0,ep.Qn)(t)},[D,O]),ek="loggedOut"===L||(null==B?void 0:B.id)==="free",eP=z||q,eE=!B&&!eP,{permitted:eS}=(0,eg.J)(eu.eZ.ManageWorkspaceBilling),eI=(0,s.useCallback)(e=>{if("monthly"===W.type&&"annual"===G&&e===W.id)return!1;let r=(0,u.jL)({...W,type:"monthly"}),t=(0,u.jL)({id:e,type:G,type:"monthly"}),a=(0,u.RL)(W.id),n=(0,u.RL)(e),l=(0,u.m6)(W.id),s=(0,u.m6)(e);return"biz"==l?"biz"==s?t<r:n<=a:"biz"==s?n<a:t<r},[W,G]),eL=(0,s.useCallback)(e=>e===W.id&&G===W.type?"current":V||(0,u.jL)(W)===eN(e)?"upgrade":"enterprise"===W.id?"downgrade":e===W.id&&"annual"===G&&"monthly"===W.type?"switchToAnnual":eI(e)?"downgrade":"upgrade",[W,V,eN,G,eI]),eA=(0,s.useCallback)(e=>{let r=eL(e);if("current"===r)return"Your current plan";if("switchToAnnual"===r)return"Switch to annual";let{isProPlan:t,isBizPlan:a}=(0,u.cb)(W.id),{isProPlan:n,isBizPlan:l}=(0,u.cb)(e);return"upgrade"===r?t&&n||a&&l?"Upgrade current plan":"Upgrade":"enterprise"===W.id?"Downgrade (Contact us)":"Downgrade"},[eL,W]),eD=(0,s.useMemo)(()=>{var e,r,t;return(null==x?void 0:x.email)||(null==x||null==(t=x.firebase)||null==(r=t.identities)||null==(e=r.email)?void 0:e[0])||"xxxxx"},[x]),eO=(0,es.A)("sm"),eT=(0,s.useMemo)(()=>eO?1:[ek,eP,!0,!0,eE].filter(Boolean).length,[eO,ek,eP,!0,!0,eE]),eF=(0,s.useCallback)(e=>{let r=eL(e);return"upgrade"===r||"switchToAnnual"===r?"solid":"link"},[eL]),eR=(0,s.useCallback)(e=>{let r=eL(e);return"upgrade"===r||"switchToAnnual"===r?"brand-twilight":"default"},[eL]),eM=eF(et),eW=eR(et),eB=eF(en),eU=eR(en),eK=(0,s.useCallback)(e=>{if("free"===e){window.location.href="/signup";return}let r={planId:e,planType:"pro",timestamp:Date.now(),price:eN(e),limit:(0,u.RL)(e)};localStorage.setItem(eh,JSON.stringify(r)),window.location.href="/signup"},[eN]),eV=(()=>{let e=(0,o.f)(m);return r=>{let{targetPlan:t,scenario:a}=r;e({childProps:{targetPlan:t,scenario:a,onClose:()=>e(!1)}})}})(),ez=(0,s.useCallback)(async e=>{(null==c?void 0:c.id)&&await j({plan:e,workspaceId:c.id,grandfatheredDiscount:Y,planType:G,changeType:"upgrade",useStudentDiscount:"studentDiscount"==L})},[c,j,Y,G,L]),eY=(0,s.useCallback)(async e=>{l.Ay.capture(k.aw.PLAN_UPGRADE_CLICKED,{current_plan_id:W.id,current_plan_type:W.type,target_plan_id:e,target_plan_type:G,plan_type:(0,u.m6)(e),plan_price:eN(e)});let r=(null==c?void 0:c.subscription_status)==="trialing",t=function(e,r,t){if("annual"===t||"annual"===e.type)return null;let a=(0,u.m6)(e.id),n=(0,u.m6)(r);return"biz"===a&&"pro"===n?null:"pro"===a&&"biz"===n?"PRO_TO_BIZ_UPGRADE":"pro"===a&&"pro"===n?"PRO_TO_PRO_UPGRADE":"biz"===a&&"biz"===n?"BIZ_TO_BIZ_UPGRADE":null}(W,e,G);t&&!r?eV({targetPlan:e,scenario:t}):await ez(e)},[W,G,eN,ez,eV,null==c?void 0:c.subscription_status]),eq=(0,s.useCallback)(()=>{ew(f.VL.FREE)},[]),e$=(0,s.useCallback)(e=>{if(e&&"annual"===G)return 2*(0,u.jL)({id:e,type:"monthly"})},[G]),eG=(0,o.f)(el),eH=(0,s.useCallback)(()=>{c&&eG({childProps:{workspace:c,onClose:()=>eG(!1)},dialogProps:{onOpenChange:e=>{e||ew(null)}}})},[eG,c]);return(0,a.jsx)(ef.Provider,{value:{isLitePlan:z,isScheduledLitePlan:q,currentPlan:W,selectedProPlan:et,setSelectedProPlan:ea,selectedBizPlan:en,setSelectedBizPlan:ex,selectedLitePlan:ev,proPlanIds:w,bizPlanIds:J,planType:G,setPlanType:H,pricingScenario:L,setPricingScenario:A,getDisplayPrice:eN,subscriptionCurrency:D||null,getCurrencySymbol:e_,getCurrencySymbolForPlan:eC,showFreePlan:ek,showKtloPlan:eP,showProPlan:!0,showBizPlan:!0,showEnterprisePlan:eE,showProDropdown:!U,showBizDropdown:!U,isLoggedOut:U,canManageWorkspaceBilling:eS,userEmail:eD,scheduledPlan:B,discountPercent:$,getSavingsAmount:e$,handleUpgradeClicked:eY,handleUpgradeConfirmed:ez,handleLoggedOutUpgrade:eK,getButtonVariant:eF,getButtonIntent:eR,getButtonText:eA,getPlanComparisonStatus:eL,createPortalSession:T,isCreatePortalSessionLoading:C,cancelSubscription:R,isCancelSubscriptionLoading:E,cancelSubscriptionChanges:M,isCancelSubscriptionChangesLoading:I,checkoutLoading:_,numberOfPlansShown:eT,freePlanButtonVariant:U?"solid":"link",freePlanButtonIntent:U?"brand-twilight":"default",proPlanButtonVariant:eM,proPlanButtonIntent:eW,bizPlanButtonVariant:eB,bizPlanButtonIntent:eU,isPlanDowngrade:eI,targetDowngradePlan:eb,setTargetDowngradePlan:ew,setFreePlanAsTarget:eq,newWorkspaceSelectedPlan:ey,setNewWorkspaceSelectedPlan:ej,onDowngradeClick:eH},children:r})},ev=()=>{let e=(0,s.useContext)(ef);if(!e)throw Error("usePricing must be used within a PricingProvider");return e}},762296:(e,r,t)=>{t.d(r,{A:()=>l,f:()=>n});var a=t(889701);let n={sm:640,md:768,lg:1024,xl:1280,"2xl":1536},l=e=>{if("number"==typeof e&&e<0)throw Error("Breakpoint value must be positive");let r="number"==typeof e?e:n[e];return(0,a.U)("(max-width: ".concat(r-1,"px)"))}},803099:(e,r,t)=>{t.d(r,{S:()=>l});var a=t(987530),n=t(433080);let l=e=>{let r=(0,a.D)(null!=e?e:null);if(!e)return{canTopUpCredits:!1,isLowOnCredits:!1,creditsRemaining:0};let{isProPlan:t,isBizPlan:l,isLegacyPlan:s}=(0,n.cb)(e.plan);return{canTopUpCredits:t||l||s,isLowOnCredits:r.totalRemaining<5,creditsRemaining:r.totalRemaining}}},812543:(e,r,t)=>{t.d(r,{D:()=>w});var a=t(20097),n=t(134472),l=t(325413),s=t(488381),i=t(834669),o=t(313259),d=t(480695),c=t(388952),u=t(255483),p=t(168954),m=t(428674),g=t(213224),h=t(926206),f=t(985677),x=t(323867),v=t(630298),b=t(375896);function w(e){let{onClose:r,onSuccess:t,forceMode:w,forceProductIds:y}=e,{getBridge:j}=(0,g.V)(),{currentWorkspace:N}=(0,s.j4)(e=>e),{userData:_}=(0,i.u)(),C=(0,n.jE)(),k=(null==N?void 0:N.payment_provider)==="apple",P=(null==N?void 0:N.plan)==="free"||(null==N?void 0:N.plan)==="inactive",E="subscriptions"===w||"topups"!==w&&P&&!k,{data:S,isLoading:I}=(0,m.X)(),[L,A]=(0,l.useState)([]),[D,O]=(0,l.useState)(!0),[T,F]=(0,l.useState)(null),[R,M]=(0,l.useState)(!1),[W,B]=(0,l.useState)(!1),[U,K]=(0,l.useState)(null),[V,z]=(0,l.useState)(null),Y=(0,l.useMemo)(()=>null!=y?y:S?E?S.subscriptionProductIds:S.creditProductIds:void 0,[y,E,S]);(0,l.useEffect)(()=>{if(!y&&I)return;if(!(null==Y?void 0:Y.length))return void O(!1);let e=!1;return O(!0),(async()=>{try{let r=await j();if(!r||e)return;let t=await r.getIAPProducts(Y);if(e)return;A(t)}finally{e||O(!1)}})(),()=>{e=!0}},[j,S,y,I,E]);let q=async()=>{if(T&&(null==N?void 0:N.id)&&(null==_?void 0:_.id)){M(!0),z(null);try{var e,r;let a,n=await j();if(!n)throw Error("Native bridge not available");let l=(null!=(e=null==S?void 0:S.subscriptionProductIds)?e:[]).includes(T);if(!(a=l&&n.isNativeMethodAvailable("purchaseSubscription")?await n.purchaseSubscription(T,N.id):await n.purchaseCredits(T,N.id)).success){if(null==(r=a.error)?void 0:r.toLowerCase().includes("cancel"))return void M(!1);throw Error(a.error||"Purchase failed")}if(!a.purchaseToken||!a.transactionId)throw Error("Missing purchase token or transaction ID");let s=(0,h.Pg)(),i=await s.post("/workspaces/".concat(N.id,"/iap/verify"),{jws:a.purchaseToken});if(!i.success){if(i.error_code===f.S.PlanProductMismatch)throw Error("This product doesn't match your current plan. The purchase is saved and can be recovered from the correct workspace.");if(i.error_code===f.S.AlreadySubscribed)throw await n.finishCreditPurchase(a.transactionId),Error("You already have an active subscription for this workspace.");throw(i.error_code===f.S.AlreadyProcessed||i.error_code===f.S.UnknownProduct)&&await n.finishCreditPurchase(a.transactionId),Error(i.error||"Verification failed")}await n.finishCreditPurchase(a.transactionId),C.invalidateQueries({queryKey:v.workspaceKeys.detail(N.id)});let o=L.find(e=>e.id===T);K({isSubscription:l,productTitle:null==o?void 0:o.title}),null==t||t(i.credits_granted)}catch(e){z(e instanceof Error?e.message:String(e))}finally{M(!1)}}},$=async()=>{if(null==N?void 0:N.id){B(!0);try{let e,r=await j();if(!r)return;let a=await r.getPendingPurchases(!0),n=0,l=!1;for(let t of a)try{let a=await (0,x.C)(r,N.id,t.purchaseToken,t.transactionId);"success"===a.status&&(l=!0,n+=a.creditsGranted,a.planId&&(e=a.planId))}catch(e){}await C.invalidateQueries({queryKey:v.workspaceKeys.detail(N.id)}),l?(K({isSubscription:!!e}),null==t||t(n)):window.alert("No purchases to restore. Your current plan and credits are up to date.")}catch(e){window.alert("Failed to restore purchases. Please try again later.")}finally{B(!1)}}},G=()=>{null==r||r()};if(U){var H;return(0,a.jsx)(d.Cf,{className:"sm:max-w-[425px]",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4 py-6 text-center",children:[(0,a.jsx)("div",{className:"flex size-16 items-center justify-center rounded-full bg-success",children:(0,a.jsx)(c.S,{className:"size-8 text-success-foreground"})}),(0,a.jsx)(d.L3,{className:"text-2xl",children:U.isSubscription?"You are all set":"Credits added"}),(0,a.jsx)(d.rr,{className:"text-base",children:U.isSubscription?'"'.concat(null==N?void 0:N.name,'" is now on ').concat(null!=(H=U.productTitle)?H:"Lovable","."):"Your credits have been added to your workspace."}),(0,a.jsx)(o.$,{onClick:G,className:"mt-2 w-full",children:U.isSubscription?"Let's build":"Continue building"})]})})}return V?(0,a.jsxs)(d.Cf,{className:"sm:max-w-[425px]",children:[(0,a.jsxs)(d.c7,{children:[(0,a.jsx)("div",{className:"flex pb-4",children:(0,a.jsx)(u.LovableLogoColor,{className:"h-12 w-12"})}),(0,a.jsx)(d.L3,{className:"text-2xl",children:"Something went wrong"}),(0,a.jsx)(d.rr,{children:V})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(o.$,{variant:"outline",onClick:G,className:"flex-1",children:"Cancel"}),(0,a.jsx)(o.$,{onClick:()=>{z(null),K(null)},className:"flex-1",children:"Try again"})]})]}):(0,a.jsxs)(d.Cf,{className:"sm:max-w-[425px]",children:[(0,a.jsxs)(d.c7,{children:[(0,a.jsx)("div",{className:"flex pb-4",children:(0,a.jsx)(u.LovableLogoColor,{className:"h-12 w-12"})}),(0,a.jsx)(d.L3,{className:"text-2xl",children:E?"Upgrade to keep building":"Add credits"}),(0,a.jsx)(d.rr,{children:E?"Choose a plan to get credits and keep building.":"Purchase credits to continue building."})]}),(0,a.jsx)("div",{className:"flex flex-col gap-3",children:D?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.E,{className:"h-16 w-full rounded-lg"}),(0,a.jsx)(p.E,{className:"h-16 w-full rounded-lg"}),!E&&(0,a.jsx)(p.E,{className:"h-16 w-full rounded-lg"})]}):0===L.length?(0,a.jsx)("div",{className:"rounded-lg bg-muted p-4 text-center text-sm text-muted-foreground",children:"Unable to load products. Please try again later."}):L.map(e=>{let r=T===e.id;return(0,a.jsxs)("button",{type:"button",disabled:R||W,onClick:()=>F(e.id),className:(0,b.cn)("flex items-center justify-between rounded-lg border p-4 text-left transition-all","active:bg-muted/50","focus:outline-none","disabled:cursor-not-allowed disabled:opacity-50",r?"border-primary bg-primary/5 ring-1 ring-primary":"border-border"),children:[(0,a.jsx)("span",{className:"text-base font-medium",children:e.title}),(0,a.jsx)("span",{className:"text-base font-medium",children:e.displayPrice})]},e.id)})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsx)(o.$,{variant:"outline",onClick:G,disabled:R,children:"Cancel"}),(0,a.jsx)(o.$,{onClick:q,disabled:D||R||W||!T,loading:R,children:E?"Subscribe":"Buy credits"})]}),(0,a.jsx)("button",{type:"button",onClick:$,disabled:R||W,className:"text-sm text-muted-foreground underline disabled:opacity-50",children:W?"Restoring...":"Restore purchases"}),(0,a.jsxs)("p",{className:"text-center text-xs text-muted-foreground",children:["By purchasing, you agree to our"," ",(0,a.jsx)("a",{href:"https://lovable.dev/terms",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"Terms of Service"})," ","and"," ",(0,a.jsx)("a",{href:"https://lovable.dev/privacy",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"Privacy Policy"}),"."]})]})}},845217:(e,r,t)=>{t.d(r,{A:()=>o});var a,n,l,s=t(325413);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(null,arguments)}let o=function(e){return s.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),a||(a=s.createElement("path",{fill:"currentColor",d:"m17.54 12.47.465-.465a4.25 4.25 0 0 0-6.01-6.01l-.536.536a.75.75 0 0 1-1.06-1.061l.535-.536a5.75 5.75 0 0 1 8.132 8.132l-.465.465a.75.75 0 0 1-1.06-1.061"})),n||(n=s.createElement("path",{fill:"currentColor",d:"M13.47 9.47a.75.75 0 1 1 1.06 1.06l-4 4a.75.75 0 1 1-1.06-1.06z"})),l||(l=s.createElement("path",{fill:"currentColor",d:"M4.934 19.066a5.75 5.75 0 0 1 0-8.132l.465-.465a.75.75 0 0 1 1.06 1.061l-.464.465a4.25 4.25 0 1 0 6.01 6.01l.536-.536a.75.75 0 0 1 1.06 1.061l-.535.536a5.75 5.75 0 0 1-8.132 0"})))}},847100:(e,r,t)=>{t.d(r,{BK:()=>o,eu:()=>i,q5:()=>d});var a=t(20097),n=t(770772),l=t(325413),s=t(375896);let i=l.forwardRef((e,r)=>{let{className:t,...l}=e;return(0,a.jsx)(n.bL,{ref:r,className:(0,s.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...l})});i.displayName=n.bL.displayName;let o=l.forwardRef((e,r)=>{let{className:t,...l}=e;return(0,a.jsx)(n._V,{ref:r,className:(0,s.cn)("aspect-square h-full w-full",t),...l})});o.displayName=n._V.displayName;let d=l.forwardRef((e,r)=>{let{className:t,...l}=e;return(0,a.jsx)(n.H4,{ref:r,className:(0,s.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...l})});d.displayName=n.H4.displayName},862021:(e,r,t)=>{t.d(r,{B3:()=>h,Ii:()=>p,O_:()=>f,UJ:()=>u,aX:()=>g,qF:()=>m});var a=t(470800),n=t(325413),l=t(637093),s=t(568482),i=t(31995),o=t(195107);let d=new Set,c=new Set;function u(e,r){return"boolean"==typeof e?e:r}function p(e,r,t,a){let n=t[e];if(void 0!==n)return{value:n,isOverride:!0};let l=r[e];return null!=l?{value:l,isOverride:!1}:{value:a,isOverride:!1}}function m(e,r,t,a){return!(0,s.e7)(e)||a?r:t}function g(e){let r=(0,o.C)(),t=(0,i.K)(e=>e.overrides),a=(0,l.E$)(),n=(0,s.cQ)(e),{value:d}=p(e,r,t,n),g=u(d,n);return!(0,s.HX)(e)||void 0!==r[e]||(0,s.s7)(e)||c.has(e)||(c.add(e),console.log("[PostHog flag] ".concat(e,": using default=").concat(n," (not in context)"))),m(e,g,n,a)}function h(e){let r=(0,o.C)(),t=(0,i.K)(e=>e.overrides),u=(0,l.E$)(),g=(0,s.t0)(e),{value:h,isOverride:f}=p(e,r,t,g),x=(0,s.et)(e),v=m(e,"string"==typeof h&&x.includes(h)?h:g,g,u);return!(0,s.HX)(e)||void 0!==r[e]||(0,s.s7)(e)||c.has(e)||(c.add(e),console.log("[PostHog experiment] ".concat(e,": using default=").concat(g," (not in context)"))),(0,n.useEffect)(()=>{f||(0,s.HX)(e)&&!d.has(e)&&(d.add(e),a.Ay.capture("$feature_flag_called",{$feature_flag_response:v,$feature_flag:e}))},[v,e,f]),v}function f(e,r){let t=h(e);return(Array.isArray(r)?r:[r]).includes(t)}},875129:(e,r,t)=>{t.d(r,{B:()=>s,n:()=>i});var a=t(20097),n=t(928304),l=t(706251);let s=()=>{let e=(0,n.JY)();return e&&(0,l.J3)(e)?(0,n.T4)():null},i=()=>{let e=s();return e?(0,a.jsx)("span",{className:"ml-1 align-text-bottom text-xs text-muted-foreground-subtle",children:e}):null}},889701:(e,r,t)=>{t.d(r,{U:()=>n});var a=t(325413);let n=e=>{let r=(0,a.useCallback)(r=>{let t=window.matchMedia(e);return t.addEventListener("change",r),()=>t.removeEventListener("change",r)},[e]),t=(0,a.useCallback)(()=>window.matchMedia(e).matches,[e]);return(0,a.useSyncExternalStore)(r,t,l)},l=()=>!1},895900:(e,r,t)=>{t.d(r,{Y:()=>n});var a=t(904764);let n=(0,t(780493).w)(a.A,"MessageTextIcon")},904764:(e,r,t)=>{t.d(r,{A:()=>s});var a,n=t(325413);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(null,arguments)}let s=function(e){return n.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),a||(a=n.createElement("path",{fill:"currentColor",d:"M3.752 7a2.25 2.25 0 0 1 2.25-2.25h12A2.25 2.25 0 0 1 20.252 7v8a2.25 2.25 0 0 1-2.25 2.25h-6a.75.75 0 0 0-.386.106l-3.864 2.319V18a.75.75 0 0 0-.75-.75h-1A2.25 2.25 0 0 1 3.752 15zM7 11.25a.75.75 0 0 0 0 1.5h4a.75.75 0 0 0 0-1.5zm.004-4a.75.75 0 1 0 0 1.5h10a.75.75 0 0 0 0-1.5zM2.252 15a3.75 3.75 0 0 0 3.75 3.75h.25V21a.75.75 0 0 0 1.136.644l4.822-2.894h5.792a3.75 3.75 0 0 0 3.75-3.75V7a3.75 3.75 0 0 0-3.75-3.75h-12A3.75 3.75 0 0 0 2.252 7z"})))}},918985:(e,r,t)=>{t.d(r,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>s,aR:()=>i,wL:()=>u});var a=t(20097),n=t(325413),l=t(375896);let s=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("flex flex-col gap-6 rounded-lg border bg-card p-6 shadow-sm",t),...n})});s.displayName="Card";let i=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("flex flex-col space-y-1.5",t),...n})});i.displayName="CardHeader";let o=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("font-medium leading-none tracking-tight",t),...n})});o.displayName="CardTitle";let d=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("text-sm text-muted-foreground",t),...n})});d.displayName="CardDescription";let c=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("gap-6 pt-0",t),...n})});c.displayName="CardContent";let u=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("flex items-center pt-0 gap-2",t),...n})});u.displayName="CardFooter"},927721:(e,r,t)=>{t.d(r,{A:()=>s});var a,n=t(325413);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(null,arguments)}let s=function(e){return n.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),a||(a=n.createElement("path",{fill:"currentColor",d:"M11.526 15.582a.75.75 0 0 0 1.004-.052l5-5a.75.75 0 1 0-1.06-1.06L12 13.94 7.53 9.47a.75.75 0 1 0-1.06 1.06l5 5z"})))}},927987:(e,r,t)=>{t.d(r,{Select:()=>c,SelectContent:()=>x,SelectItem:()=>w,SelectTrigger:()=>m,SelectValue:()=>p,TR:()=>v,mi:()=>j,s3:()=>u,tJ:()=>y,wQ:()=>g});var a=t(20097),n=t(785604),l=t(325413),s=t(388952),i=t(604937),o=t(646),d=t(375896);let c=n.bL,u=n.YJ,p=n.WT,m=l.forwardRef((e,r)=>{let{className:t,children:l,...s}=e;return(0,a.jsxs)(n.l9,{ref:r,className:(0,d.cn)("flex h-9 w-full items-center justify-between gap-2 whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span[data-radix-select-value]]:line-clamp-1",t),...s,children:[l,(0,a.jsx)(n.In,{asChild:!0,children:(0,a.jsx)(i.D,{size:"small",className:"shrink-0 opacity-50"})})]})});m.displayName=n.l9.displayName;let g=l.forwardRef((e,r)=>{let{className:t,children:l,...s}=e;return(0,a.jsxs)(n.l9,{ref:r,className:(0,d.cn)("flex h-7 items-center justify-start gap-1 whitespace-nowrap rounded-none border-none bg-transparent px-0 py-0 text-sm shadow-none ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-0 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...s,children:[l,(0,a.jsx)(n.In,{asChild:!0,children:(0,a.jsx)(i.D,{size:"small",className:"opacity-50"})})]})});g.displayName="SelectTriggerGhost";let h=l.forwardRef((e,r)=>{let{className:t,...l}=e;return(0,a.jsx)(n.PP,{ref:r,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...l,children:(0,a.jsx)(o.M,{size:"small"})})});h.displayName=n.PP.displayName;let f=l.forwardRef((e,r)=>{let{className:t,...l}=e;return(0,a.jsx)(n.wn,{ref:r,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...l,children:(0,a.jsx)(i.D,{size:"small"})})});f.displayName=n.wn.displayName;let x=l.forwardRef((e,r)=>{let{className:t,children:l,position:s="popper",...i}=e;return(0,a.jsx)(n.ZL,{children:(0,a.jsxs)(n.UC,{ref:r,className:(0,d.cn)("relative z-[10000] max-h-96 min-w-32 overflow-hidden rounded-md border bg-card text-card-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1","origin-[var(--radix-select-content-transform-origin)]",t),position:s,...i,children:[(0,a.jsx)(h,{}),(0,a.jsx)(n.LM,{className:(0,d.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,a.jsx)(f,{})]})})});x.displayName=n.UC.displayName;let v=l.forwardRef((e,r)=>{let{className:t,...l}=e;return(0,a.jsx)(n.JU,{ref:r,className:(0,d.cn)("px-2 py-1.5 text-sm font-medium",t),...l})});v.displayName=n.JU.displayName;let b={default:{highlighted:"data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground",checked:"data-[state=checked]:bg-accent data-[state=checked]:text-accent-foreground data-[state=checked]:data-[highlighted]:bg-accent data-[state=checked]:data-[highlighted]:text-accent-foreground"},subtle:{highlighted:"data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground",checked:""},twilight:{highlighted:"data-[highlighted]:bg-brand-twilight data-[highlighted]:text-brand-twilight-foreground",checked:"data-[state=checked]:bg-brand-twilight-primary data-[state=checked]:text-brand-twilight-primary-foreground data-[state=checked]:data-[highlighted]:bg-brand-twilight-primary data-[state=checked]:data-[highlighted]:text-brand-twilight-primary-foreground"}},w=l.forwardRef((e,r)=>{let{className:t,children:l,variant:i="default",...o}=e,c=b[i];return(0,a.jsxs)(n.q7,{ref:r,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",c.highlighted,c.checked,t),...o,children:[(0,a.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(n.VF,{children:(0,a.jsx)(s.S,{size:"small"})})}),(0,a.jsx)(n.p4,{children:l})]})});w.displayName=n.q7.displayName;let y=l.forwardRef((e,r)=>{let{className:t,label:l,endContent:i,showIndicator:o=!0,variant:c="default",...u}=e,p=b[c];return(0,a.jsxs)(n.q7,{ref:r,className:(0,d.cn)("group relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",p.highlighted,p.checked,o&&"pr-8",!o&&"pr-2",t),...u,children:[o&&(0,a.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(n.VF,{children:(0,a.jsx)(s.S,{size:"small"})})}),(0,a.jsxs)("span",{className:(0,d.cn)("flex w-full items-center justify-between",o&&"pr-6"),children:[(0,a.jsx)(n.p4,{children:l}),i&&(0,a.jsx)("span",{className:"ml-4",children:i})]})]})});y.displayName="SelectItemWithSlots";let j=l.forwardRef((e,r)=>{let{className:t,...l}=e;return(0,a.jsx)(n.wv,{ref:r,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",t),...l})});j.displayName=n.wv.displayName},936617:(e,r,t)=>{t.d(r,{n:()=>w});var a=t(20097),n=t(325413),l=t(488381),s=t(757423),i=t(358679),o=t(437409),d=t(313259),c=t(480695),u=t(667773),p=t(255483),m=t(223591),g=t(433080),h=t(375896);let f=["User roles & permissions","Custom domains","Remove the Lovable badge"],x=["SSO","Personal Projects","Opt out of data training","Design templates"],v=["Downgrade anytime","Credits rollover"],b=e=>{let{features:r}=e;return(0,a.jsx)("div",{className:"mt-3 space-y-3",children:r.map((e,r)=>(0,a.jsxs)("div",{className:"flex items-start gap-[6px]",children:[(0,a.jsx)(u.t,{size:"small",className:"relative top-0.5"}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:e})]},r))})},w=e=>{let{targetPlan:r,availablePlans:t,title:u,subtitle:w,showCreditDifference:y=!0,showWhatsChanging:j=!0,showPlanFeatures:N=!0,showNextBillingCycle:_=!0,showPlanDropdown:C=!0,handleCancel:k,handleConfirm:P}=e,{handleUpgradeConfirmed:E,currentPlan:S,checkoutLoading:I}=(0,s.et)(),L=(0,g.m6)(r),[A,D]=(0,n.useState)(r),O=(0,l.j4)(e=>e.currentWorkspace),T=(0,m.Q)(S.id,A),F=_&&!N,R=(0,g.bn)(null==O?void 0:O.billing_period_end_date),M=async()=>{null==P||P("upgrade",A),await E(A)};return(0,a.jsxs)(c.Cf,{className:"max-h-[90vh] max-w-[425px] overflow-y-auto",children:[(0,a.jsxs)(c.c7,{className:"space-y-4",children:[(0,a.jsx)(p.LovableLogoColor,{className:"size-9 shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.L3,{className:"mb-2 text-3xl font-medium",children:u}),(0,a.jsx)("p",{className:"text-sm text-foreground",children:w})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsxs)("div",{className:"rounded-lg border-2 border-muted-border p-4",children:[(0,a.jsx)("div",{className:"text-lg font-medium",children:"Upgrade Fee"}),(0,a.jsx)("div",{className:(0,h.cn)({"mb-3":C}),children:(0,a.jsx)(o.D,{selectedPlanId:A,showCreditDifference:y,workspace:O})}),C&&(0,a.jsx)(i.h,{options:t,selectedOption:A,onSelect:D,showCreditDifference:y,currentPlanLimit:T.current.limit})]}),j&&(0,a.jsxs)("div",{className:"rounded-lg bg-muted p-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"What's changing?"}),(0,a.jsxs)("p",{className:"mt-1.5 text-sm text-muted-foreground",children:["You are unlocking all business features"," ",T.creditDifference?"and receiving ".concat(T.creditDifference," credits today"):"but your credits will stay the same"]})]}),N&&(0,a.jsxs)("div",{className:"rounded-lg bg-muted p-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"You will unlock:"}),(0,a.jsx)(b,{features:[..."biz"===L?x:f,...F?[]:v]})]}),_&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium",children:["Next billing cycle (",R,")"]}),(0,a.jsx)(b,{features:["Your plan will update to ".concat(T.selected.currencySymbol).concat(T.selected.price," / month for ").concat(T.selected.limit," credits"),...F?v:[]]})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 border-t pt-4",children:[(0,a.jsx)(c.HM,{asChild:!0,children:(0,a.jsx)(d.$,{intent:"secondary",className:"flex-1",onClick:()=>{null==k||k("upgrade")},children:"Cancel"})}),(0,a.jsx)(d.$,{className:"flex-1",onClick:M,loading:!!I,"data-testid":"pricing-summary-upgrade",children:T.upgradeCost>0?"Upgrade":"Confirm"})]})]})}},944060:(e,r,t)=>{t.d(r,{q:()=>n});var a=t(133281);let n=(0,t(780493).w)(a.A,"BrushIcon")},958372:(e,r,t)=>{t.d(r,{PlatformProvider:()=>i,r:()=>s});var a=t(20097),n=t(325413),l=t(479074);let s=(0,n.createContext)(null);function i(e){let{children:r,ssrPlatformAppVersion:t}=e,i=(0,n.useMemo)(()=>{let e=t?(0,l.FL)(t):null;return{platformAppVersion:t,isMobileApp:null!==e,platform:e,isIOSApp:"ios"===e,isAndroidApp:"android"===e}},[t]);return(0,a.jsx)(s.Provider,{value:i,children:r})}s.displayName="PlatformContext"},968681:(e,r,t)=>{t.r(r),t.d(r,{default:()=>s});var a,n=t(325413);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(null,arguments)}let s=function(e){return n.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),a||(a=n.createElement("path",{fill:"currentColor",d:"M18.369 4.595a.75.75 0 0 1 1.262.81l-9 14a.75.75 0 0 1-1.217.064l-5-6.25a.75.75 0 0 1 1.172-.938l4.347 5.435z"})))}},981853:(e,r,t)=>{t.d(r,{Y:()=>n});var a=t(433080);function n(e){let{currentPlan:r,targetPlanCategory:t,proPlanIds:n,bizPlanIds:l}=e,s=(0,a.m6)(r.id);if("pro"!==t&&"biz"!==t&&"enterprise"!==t)throw Error("Target plan category must be pro or biz");if("enterprise"===t)return[];let i="pro"===t?n:l;return s===t?(0,a.yQ)(r.id,i):(0,a.Bq)(r.id,i)}},985677:(e,r,t)=>{t.d(r,{S:()=>a});let a={AlreadyProcessed:"already_processed",AlreadySubscribed:"already_subscribed",UnknownProduct:"unknown_product",VerificationFailed:"verification_failed",PlanProductMismatch:"plan_product_mismatch"}},986304:(e,r,t)=>{t.r(r),t.d(r,{default:()=>s});var a,n=t(325413);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(null,arguments)}let s=function(e){return n.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),a||(a=n.createElement("path",{fill:"currentColor",d:"M8.5 12.25a.75.75 0 0 1 0 1.5 4.75 4.75 0 0 0-4.27 2.665c-.155.318-.096.602.12.852.237.273.662.483 1.15.483h2a.75.75 0 0 1 0 1.5h-2c-.892 0-1.743-.377-2.284-1.001-.562-.648-.783-1.572-.332-2.494A6.25 6.25 0 0 1 8.5 12.25m8 0a6.25 6.25 0 0 1 5.843 4.026c.307.807.085 1.587-.401 2.132-.472.528-1.188.842-1.942.842h-7c-.754 0-1.47-.314-1.942-.842-.487-.545-.707-1.325-.4-2.132A6.25 6.25 0 0 1 16.5 12.25m0 1.5a4.75 4.75 0 0 0-4.441 3.06.55.55 0 0 0 .118.6c.172.191.473.34.823.34h7c.35 0 .651-.149.823-.34a.55.55 0 0 0 .118-.6 4.75 4.75 0 0 0-4.44-3.06M9.75 8a1.25 1.25 0 1 0-2.5 0 1.25 1.25 0 0 0 2.5 0m8.5-.5a1.75 1.75 0 1 0-3.5 0 1.75 1.75 0 0 0 3.5 0m-7 .5a2.75 2.75 0 1 1-5.5 0 2.75 2.75 0 0 1 5.5 0m8.5-.5a3.25 3.25 0 1 1-6.5 0 3.25 3.25 0 0 1 6.5 0"})))}},987530:(e,r,t)=>{t.d(r,{D:()=>o});var a=t(465338),n=t(539104),l=t(433080),s=t(108980);let i=e=>e?"string"==typeof e?new Date(e):e.toDate():null,o=e=>{let{billingPeriodCreditLimit:r,billingPeriodCreditsUsed:t,dailyCreditLimit:o,dailyCreditsUsed:d,bonusCreditsLimit:c,bonusCreditsUsed:u,billingPeriodEndDate:p,totalCreditsUsedInBillingPeriod:m,topUpCreditsLimit:g,topUpCreditsUsed:h,topUpCreditsExpireDate:f,rolloverCreditsLimit:x,rolloverCreditsUsed:v}=(0,a.$)(e),b=(null==e?void 0:e.plan)==="free"?Math.max(0,Math.min(n.le-(null!=m?m:0),null!=o?o:0)):null!=o?o:0,w={granted:(0,s.V)(c),billing:(0,s.V)(r),rollover:(0,s.V)(x),topup:(0,s.V)(g),daily:(0,s.V)(b)},y={granted:(0,s.V)(Math.min(u,c)),topup:(0,s.V)(Math.min(h,g)),billing:(0,s.V)(Math.min(t,r)),rollover:(0,s.V)(Math.min(v,x)),daily:(0,s.V)(Math.min(d,b))},j=(e=>{if(!e)return!1;let{isLegacyPlan:r,isAmbassadorPlan:t,isLitePlan:a}=(0,l.cb)(e.plan);return(r||t||a)&&(0===e.billing_period_credits_limit||void 0===e.billing_period_credits_limit)})(e),N={granted:(0,s.V)(w.granted-y.granted),billing:j?0:(0,s.V)(w.billing-y.billing),rollover:(0,s.V)(w.rollover-y.rollover),topup:(0,s.V)(w.topup-y.topup),daily:(0,s.V)(w.daily-y.daily)},_=(0,s.V)(N.granted+N.billing+N.rollover+N.topup+N.daily),C=(0,s.V)(y.granted+y.billing+y.rollover+y.topup+y.daily),k=(0,s.V)(j?w.granted+w.rollover+w.topup+w.daily:w.granted+w.billing+w.rollover+w.topup+w.daily),P=[{name:"granted",remaining:N.granted,limit:w.granted},{name:"topup",remaining:N.topup,limit:w.topup},{name:"billing",remaining:N.billing,limit:w.billing},{name:"rollover",remaining:N.rollover,limit:w.rollover},{name:"daily",remaining:N.daily,limit:w.daily}].filter(e=>e.remaining>0),E=N.daily>0?"daily":N.rollover>0?"rollover":N.billing>0?"billing":N.topup>0?"topup":N.granted>0?"granted":null,S=(e=>{if(!e)return null;if("annual"===e.plan_type){let r=i(e.last_rollover_period||e.billing_period_start_date||e.billing_period_end_date);if(r){let e=r.getMonth()+1,t=r.getFullYear(),a=r.getDate(),n=new Date(t,e+1,0).getDate();return new Date(t,e,Math.min(a,n))}return null}return e.billing_period_end_date?i(e.billing_period_end_date):null})(e),I=(null==e?void 0:e.plan_type)==="annual"?p:S;return{totalRemaining:_,totalAllocation:k,totalUsed:C,sources:P,hasCredits:k>0,currentlyConsuming:E,billingPeriodEndDate:p,creditsResetDate:S,rolloverCreditsExpirationDate:I,totalCreditsUsedInBillingPeriod:null!=m?m:0,topUpCreditsExpireDate:f}}},987707:(e,r,t)=>{t.d(r,{w:()=>i});var a=t(292968),n=t(433498),l=t(926206),s=t(630298);let i={permissions:e=>{let{workspaceId:r,projectId:t}=e;return(0,a.j)({queryKey:s.QO.get(r,t),queryFn:async()=>{if(!t&&!r)return[];let e=(0,l.Pg)(),a=new URLSearchParams;return t?a.append("projectId",t):r&&a.append("workspaceId",r),e.get("/permissions?".concat(a.toString()))},refetchOnWindowFocus:!1,staleTime:3e5,retry:3,placeholderData:n.rX})}}}}]);